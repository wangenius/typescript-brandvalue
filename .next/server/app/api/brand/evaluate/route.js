/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/brand/evaluate/route";
exports.ids = ["app/api/brand/evaluate/route"];
exports.modules = {

/***/ "(rsc)/./app/api/brand/evaluate/route.ts":
/*!*****************************************!*\
  !*** ./app/api/brand/evaluate/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/services */ \"(rsc)/./app/services/index.ts\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\n\nconst runtime = \"nodejs\";\nconst calculator = new _services__WEBPACK_IMPORTED_MODULE_0__.BrandZCalculator();\nasync function POST(req) {\n    try {\n        const body = await req.json();\n        if (!body || !body.brand_name || !body.brand_assets) {\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n                success: false,\n                error: \"请提供完整的品牌数据，包括brand_name和brand_assets字段\"\n            }, {\n                status: 400\n            });\n        }\n        const { stream = false } = body;\n        const calculator = new _services__WEBPACK_IMPORTED_MODULE_0__.BrandZCalculator();\n        // 如果启用流式返回\n        if (stream) {\n            const encoder = new TextEncoder();\n            const readable = new ReadableStream({\n                async start (controller) {\n                    try {\n                        // 发送初始状态\n                        controller.enqueue(encoder.encode(`data: ${JSON.stringify({\n                            step: 0,\n                            totalSteps: 3,\n                            status: \"开始品牌评估\",\n                            progress: 0\n                        })}\\n\\n`));\n                        // 步骤1：品牌一致性评估\n                        controller.enqueue(encoder.encode(`data: ${JSON.stringify({\n                            step: 1,\n                            totalSteps: 3,\n                            status: \"正在进行品牌一致性评估...\",\n                            progress: 33\n                        })}\\n\\n`));\n                        const consistencyResult = await calculator.evaluateConsistency(body);\n                        controller.enqueue(encoder.encode(`data: ${JSON.stringify({\n                            step: 1,\n                            totalSteps: 3,\n                            status: \"✅ 品牌一致性评估完成\",\n                            progress: 33,\n                            data: {\n                                consistencyResult\n                            }\n                        })}\\n\\n`));\n                        // 步骤2：BrandZ价值评估\n                        controller.enqueue(encoder.encode(`data: ${JSON.stringify({\n                            step: 2,\n                            totalSteps: 3,\n                            status: \"正在进行BrandZ价值评估...\",\n                            progress: 66\n                        })}\\n\\n`));\n                        const brandzResult = await calculator.evaluateBrandZValue(body, consistencyResult.total_score);\n                        controller.enqueue(encoder.encode(`data: ${JSON.stringify({\n                            step: 2,\n                            totalSteps: 3,\n                            status: \"✅ BrandZ价值评估完成\",\n                            progress: 66,\n                            data: {\n                                brandzResult\n                            }\n                        })}\\n\\n`));\n                        // 步骤3：生成综合报告\n                        controller.enqueue(encoder.encode(`data: ${JSON.stringify({\n                            step: 3,\n                            totalSteps: 3,\n                            status: \"正在生成综合报告...\",\n                            progress: 90\n                        })}\\n\\n`));\n                        const comprehensiveReport = calculator.generateComprehensiveReport(body, consistencyResult, brandzResult);\n                        // 发送最终结果\n                        controller.enqueue(encoder.encode(`data: ${JSON.stringify({\n                            step: 3,\n                            totalSteps: 3,\n                            status: \"✅ 品牌评估完成\",\n                            progress: 100,\n                            completed: true,\n                            data: comprehensiveReport\n                        })}\\n\\n`));\n                        controller.close();\n                    } catch (error) {\n                        controller.enqueue(encoder.encode(`data: ${JSON.stringify({\n                            error: error?.message || \"品牌评估失败\"\n                        })}\\n\\n`));\n                        controller.close();\n                    }\n                }\n            });\n            return new next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse(readable, {\n                headers: {\n                    'Content-Type': 'text/event-stream',\n                    'Cache-Control': 'no-cache',\n                    'Connection': 'keep-alive'\n                }\n            });\n        }\n        // 非流式返回（保持原有逻辑）\n        // 1. 品牌一致性评估\n        const consistencyResult = await calculator.evaluateConsistency(body);\n        // 2. BrandZ价值评估\n        const brandzResult = await calculator.evaluateBrandZValue(body, consistencyResult.total_score);\n        // 3. 生成综合报告\n        const comprehensiveReport = calculator.generateComprehensiveReport(body, consistencyResult, brandzResult);\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n            success: true,\n            data: comprehensiveReport\n        });\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n            success: false,\n            error: error?.message || \"服务器内部错误\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNSYyxVQUFVOzRCQUNWUyxXQUFXOzRCQUNYTixNQUFNSTt3QkFDUixHQUFHLElBQUksQ0FBQzt3QkFFUmQsV0FBV2lCLEtBQUs7b0JBQ2xCLEVBQUUsT0FBT3pCLE9BQVk7d0JBQ25CUSxXQUFXQyxPQUFPLENBQUNOLFFBQVFPLE1BQU0sQ0FBQyxDQUFDLE1BQU0sRUFBRUMsS0FBS0MsU0FBUyxDQUFDOzRCQUN4RFosT0FBT0EsT0FBTzBCLFdBQVc7d0JBQzNCLEdBQUcsSUFBSSxDQUFDO3dCQUNSbEIsV0FBV2lCLEtBQUs7b0JBQ2xCO2dCQUNGO1lBQ0Y7WUFFQSxPQUFPLElBQUluQyxxREFBWUEsQ0FBQ2UsVUFBVTtnQkFDaENzQixTQUFTO29CQUNQLGdCQUFnQjtvQkFDaEIsaUJBQWlCO29CQUNqQixjQUFjO2dCQUNoQjtZQUNGO1FBQ0Y7UUFFQSxnQkFBZ0I7UUFDaEIsYUFBYTtRQUNiLE1BQU1YLG9CQUFvQixNQUFNeEIsV0FBV3lCLG1CQUFtQixDQUFDdEI7UUFFL0QsZ0JBQWdCO1FBQ2hCLE1BQU13QixlQUFlLE1BQU0zQixXQUFXNEIsbUJBQW1CLENBQ3ZEekIsTUFDQXFCLGtCQUFrQkssV0FBVztRQUcvQixZQUFZO1FBQ1osTUFBTUMsc0JBQXNCOUIsV0FBVytCLDJCQUEyQixDQUNoRTVCLE1BQ0FxQixtQkFDQUc7UUFFRixPQUFPN0IscURBQVlBLENBQUNNLElBQUksQ0FBQztZQUN2QkcsU0FBUztZQUNUbUIsTUFBTUk7UUFDUjtJQUNGLEVBQUUsT0FBT3RCLE9BQVk7UUFDbkIsT0FBT1YscURBQVlBLENBQUNNLElBQUksQ0FDdEI7WUFBRUcsU0FBUztZQUFPQyxPQUFPQSxPQUFPMEIsV0FBVztRQUFVLEdBQ3JEO1lBQUV6QixRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3dhbmdlbml1cy9Eb2N1bWVudHMvdHdpbmtsZS90eXBlc2NyaXB0LWJyYW5kdmFsdWUvYXBwL2FwaS9icmFuZC9ldmFsdWF0ZS9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBicmFuZF92YWx1YXRlLCBCcmFuZElucHV0RGF0YSwgQnJhbmRaQ2FsY3VsYXRvciB9IGZyb20gXCJAL3NlcnZpY2VzXCI7XG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5cbmV4cG9ydCBjb25zdCBydW50aW1lID0gXCJub2RlanNcIjtcbmNvbnN0IGNhbGN1bGF0b3IgPSBuZXcgQnJhbmRaQ2FsY3VsYXRvcigpO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IChhd2FpdCByZXEuanNvbigpKSBhcyBCcmFuZElucHV0RGF0YSAmIHsgc3RyZWFtPzogYm9vbGVhbiB9O1xuXG4gICAgaWYgKCFib2R5IHx8ICFib2R5LmJyYW5kX25hbWUgfHwgIWJvZHkuYnJhbmRfYXNzZXRzKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogXCLor7fmj5DkvpvlrozmlbTnmoTlk4HniYzmlbDmja7vvIzljIXmi6xicmFuZF9uYW1l5ZKMYnJhbmRfYXNzZXRz5a2X5q61XCIsXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHN0cmVhbSA9IGZhbHNlIH0gPSBib2R5O1xuICAgIGNvbnN0IGNhbGN1bGF0b3IgPSBuZXcgQnJhbmRaQ2FsY3VsYXRvcigpO1xuXG4gICAgLy8g5aaC5p6c5ZCv55So5rWB5byP6L+U5ZueXG4gICAgaWYgKHN0cmVhbSkge1xuICAgICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgY29uc3QgcmVhZGFibGUgPSBuZXcgUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICBhc3luYyBzdGFydChjb250cm9sbGVyKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIOWPkemAgeWIneWni+eKtuaAgVxuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGVuY29kZXIuZW5jb2RlKGBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgc3RlcDogMCxcbiAgICAgICAgICAgICAgdG90YWxTdGVwczogMyxcbiAgICAgICAgICAgICAgc3RhdHVzOiBcIuW8gOWni+WTgeeJjOivhOS8sFwiLFxuICAgICAgICAgICAgICBwcm9ncmVzczogMFxuICAgICAgICAgICAgfSl9XFxuXFxuYCkpO1xuXG4gICAgICAgICAgICAvLyDmraXpqqQx77ya5ZOB54mM5LiA6Ie05oCn6K+E5LywXG4gICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoZW5jb2Rlci5lbmNvZGUoYGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICBzdGVwOiAxLFxuICAgICAgICAgICAgICB0b3RhbFN0ZXBzOiAzLFxuICAgICAgICAgICAgICBzdGF0dXM6IFwi5q2j5Zyo6L+b6KGM5ZOB54mM5LiA6Ie05oCn6K+E5LywLi4uXCIsXG4gICAgICAgICAgICAgIHByb2dyZXNzOiAzM1xuICAgICAgICAgICAgfSl9XFxuXFxuYCkpO1xuXG4gICAgICAgICAgICBjb25zdCBjb25zaXN0ZW5jeVJlc3VsdCA9IGF3YWl0IGNhbGN1bGF0b3IuZXZhbHVhdGVDb25zaXN0ZW5jeShib2R5KTtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShlbmNvZGVyLmVuY29kZShgZGF0YTogJHtKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgIHN0ZXA6IDEsXG4gICAgICAgICAgICAgIHRvdGFsU3RlcHM6IDMsXG4gICAgICAgICAgICAgIHN0YXR1czogXCLinIUg5ZOB54mM5LiA6Ie05oCn6K+E5Lyw5a6M5oiQXCIsXG4gICAgICAgICAgICAgIHByb2dyZXNzOiAzMyxcbiAgICAgICAgICAgICAgZGF0YTogeyBjb25zaXN0ZW5jeVJlc3VsdCB9XG4gICAgICAgICAgICB9KX1cXG5cXG5gKSk7XG5cbiAgICAgICAgICAgIC8vIOatpemqpDLvvJpCcmFuZFrku7flgLzor4TkvLBcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShlbmNvZGVyLmVuY29kZShgZGF0YTogJHtKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgIHN0ZXA6IDIsXG4gICAgICAgICAgICAgIHRvdGFsU3RlcHM6IDMsXG4gICAgICAgICAgICAgIHN0YXR1czogXCLmraPlnKjov5vooYxCcmFuZFrku7flgLzor4TkvLAuLi5cIixcbiAgICAgICAgICAgICAgcHJvZ3Jlc3M6IDY2XG4gICAgICAgICAgICB9KX1cXG5cXG5gKSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGJyYW5kelJlc3VsdCA9IGF3YWl0IGNhbGN1bGF0b3IuZXZhbHVhdGVCcmFuZFpWYWx1ZShcbiAgICAgICAgICAgICAgYm9keSxcbiAgICAgICAgICAgICAgY29uc2lzdGVuY3lSZXN1bHQudG90YWxfc2NvcmVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoZW5jb2Rlci5lbmNvZGUoYGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICBzdGVwOiAyLFxuICAgICAgICAgICAgICB0b3RhbFN0ZXBzOiAzLFxuICAgICAgICAgICAgICBzdGF0dXM6IFwi4pyFIEJyYW5kWuS7t+WAvOivhOS8sOWujOaIkFwiLFxuICAgICAgICAgICAgICBwcm9ncmVzczogNjYsXG4gICAgICAgICAgICAgIGRhdGE6IHsgYnJhbmR6UmVzdWx0IH1cbiAgICAgICAgICAgIH0pfVxcblxcbmApKTtcblxuICAgICAgICAgICAgLy8g5q2l6aqkM++8mueUn+aIkOe7vOWQiOaKpeWRilxuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGVuY29kZXIuZW5jb2RlKGBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgc3RlcDogMyxcbiAgICAgICAgICAgICAgdG90YWxTdGVwczogMyxcbiAgICAgICAgICAgICAgc3RhdHVzOiBcIuato+WcqOeUn+aIkOe7vOWQiOaKpeWRii4uLlwiLFxuICAgICAgICAgICAgICBwcm9ncmVzczogOTBcbiAgICAgICAgICAgIH0pfVxcblxcbmApKTtcblxuICAgICAgICAgICAgY29uc3QgY29tcHJlaGVuc2l2ZVJlcG9ydCA9IGNhbGN1bGF0b3IuZ2VuZXJhdGVDb21wcmVoZW5zaXZlUmVwb3J0KFxuICAgICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgICBjb25zaXN0ZW5jeVJlc3VsdCxcbiAgICAgICAgICAgICAgYnJhbmR6UmVzdWx0XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyDlj5HpgIHmnIDnu4jnu5PmnpxcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShlbmNvZGVyLmVuY29kZShgZGF0YTogJHtKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgIHN0ZXA6IDMsXG4gICAgICAgICAgICAgIHRvdGFsU3RlcHM6IDMsXG4gICAgICAgICAgICAgIHN0YXR1czogXCLinIUg5ZOB54mM6K+E5Lyw5a6M5oiQXCIsXG4gICAgICAgICAgICAgIHByb2dyZXNzOiAxMDAsXG4gICAgICAgICAgICAgIGNvbXBsZXRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgZGF0YTogY29tcHJlaGVuc2l2ZVJlcG9ydFxuICAgICAgICAgICAgfSl9XFxuXFxuYCkpO1xuXG4gICAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGVuY29kZXIuZW5jb2RlKGBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgZXJyb3I6IGVycm9yPy5tZXNzYWdlIHx8IFwi5ZOB54mM6K+E5Lyw5aSx6LSlXCJcbiAgICAgICAgICAgIH0pfVxcblxcbmApKTtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShyZWFkYWJsZSwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L2V2ZW50LXN0cmVhbScsXG4gICAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAnbm8tY2FjaGUnLFxuICAgICAgICAgICdDb25uZWN0aW9uJzogJ2tlZXAtYWxpdmUnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g6Z2e5rWB5byP6L+U5Zue77yI5L+d5oyB5Y6f5pyJ6YC76L6R77yJXG4gICAgLy8gMS4g5ZOB54mM5LiA6Ie05oCn6K+E5LywXG4gICAgY29uc3QgY29uc2lzdGVuY3lSZXN1bHQgPSBhd2FpdCBjYWxjdWxhdG9yLmV2YWx1YXRlQ29uc2lzdGVuY3koYm9keSk7XG5cbiAgICAvLyAyLiBCcmFuZFrku7flgLzor4TkvLBcbiAgICBjb25zdCBicmFuZHpSZXN1bHQgPSBhd2FpdCBjYWxjdWxhdG9yLmV2YWx1YXRlQnJhbmRaVmFsdWUoXG4gICAgICBib2R5LFxuICAgICAgY29uc2lzdGVuY3lSZXN1bHQudG90YWxfc2NvcmVcbiAgICApO1xuXG4gICAgLy8gMy4g55Sf5oiQ57u85ZCI5oql5ZGKXG4gICAgY29uc3QgY29tcHJlaGVuc2l2ZVJlcG9ydCA9IGNhbGN1bGF0b3IuZ2VuZXJhdGVDb21wcmVoZW5zaXZlUmVwb3J0KFxuICAgICAgYm9keSxcbiAgICAgIGNvbnNpc3RlbmN5UmVzdWx0LFxuICAgICAgYnJhbmR6UmVzdWx0XG4gICAgKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IGNvbXByZWhlbnNpdmVSZXBvcnQsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3I/Lm1lc3NhZ2UgfHwgXCLmnI3liqHlmajlhoXpg6jplJnor69cIiB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkJyYW5kWkNhbGN1bGF0b3IiLCJOZXh0UmVzcG9uc2UiLCJydW50aW1lIiwiY2FsY3VsYXRvciIsIlBPU1QiLCJyZXEiLCJib2R5IiwianNvbiIsImJyYW5kX25hbWUiLCJicmFuZF9hc3NldHMiLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXMiLCJzdHJlYW0iLCJlbmNvZGVyIiwiVGV4dEVuY29kZXIiLCJyZWFkYWJsZSIsIlJlYWRhYmxlU3RyZWFtIiwic3RhcnQiLCJjb250cm9sbGVyIiwiZW5xdWV1ZSIsImVuY29kZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzdGVwIiwidG90YWxTdGVwcyIsInByb2dyZXNzIiwiY29uc2lzdGVuY3lSZXN1bHQiLCJldmFsdWF0ZUNvbnNpc3RlbmN5IiwiZGF0YSIsImJyYW5kelJlc3VsdCIsImV2YWx1YXRlQnJhbmRaVmFsdWUiLCJ0b3RhbF9zY29yZSIsImNvbXByZWhlbnNpdmVSZXBvcnQiLCJnZW5lcmF0ZUNvbXByZWhlbnNpdmVSZXBvcnQiLCJjb21wbGV0ZWQiLCJjbG9zZSIsIm1lc3NhZ2UiLCJoZWFkZXJzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/brand/evaluate/route.ts\n");

/***/ }),

/***/ "(rsc)/./app/services/core/BrandAssetGenerator.ts":
/*!**************************************************!*\
  !*** ./app/services/core/BrandAssetGenerator.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BrandAssetGenerator: () => (/* binding */ BrandAssetGenerator),\n/* harmony export */   generateBrandAsset: () => (/* binding */ generateBrandAsset)\n/* harmony export */ });\n/* harmony import */ var _LLM__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./LLM */ \"(rsc)/./app/services/core/LLM.ts\");\n\n/**\n * 品牌资产生成器\n * 使用大模型从长文本内容生成结构化的品牌资产数据\n */ class BrandAssetGenerator {\n    /**\n   * 从长文本内容生成品牌资产\n   * @param content 包含品牌信息的长文本\n   * @returns 结构化的品牌资产数据\n   */ async generateBrandAsset(content) {\n        try {\n            console.log(\"开始分步生成品牌资产...\");\n            // 步骤1：生成基本品牌信息\n            const basicInfo = await this.generateBasicBrandInfo(content);\n            console.log(\"✅ 基本品牌信息生成完成\");\n            console.log(\"基本品牌信息:\", basicInfo);\n            // 步骤2：生成品牌定位\n            const positioning = await this.generateBrandPositioning(content, basicInfo.brand_name);\n            console.log(\"✅ 品牌定位生成完成\");\n            console.log(\"品牌定位:\", positioning);\n            // 步骤3：生成品牌表达\n            const expression = await this.generateBrandExpression(content, basicInfo.brand_name);\n            console.log(\"✅ 品牌表达生成完成\");\n            console.log(\"品牌表达:\", expression);\n            // 步骤4：生成用户画像\n            const personas = await this.generateUserPersonas(content, basicInfo.brand_name);\n            console.log(\"✅ 用户画像生成完成\");\n            console.log(\"用户画像:\", personas);\n            // 步骤5：组合所有数据\n            const brandAsset = this.assembleBrandAsset(basicInfo, positioning, expression, personas);\n            console.log(\"品牌资产:\", brandAsset);\n            // 步骤6：验证和补全缺失字段\n            const validatedData = await this.validateAndFixMissingFields(brandAsset, content);\n            console.log(\"✅ 品牌资产验证和补全完成\");\n            console.log(\"验证后的品牌资产:\", validatedData);\n            return validatedData;\n        } catch (error) {\n            console.error(\"生成品牌资产失败:\", error);\n            throw new Error(`生成品牌资产失败: ${error instanceof Error ? error.message : \"未知错误\"}`);\n        }\n    }\n    // 可选：对外暴露装配与校验（暂不用于路由）\n    assembleAsset(basicInfo, positioning, expression, personas) {\n        return this.assembleBrandAsset(basicInfo, positioning, expression, personas);\n    }\n    async validateAsset(brandAsset, originalContent) {\n        return await this.validateAndFixMissingFields(brandAsset, originalContent);\n    }\n    /**\n   * 生成基本品牌信息\n   */ async generateBasicBrandInfo(content) {\n        const prompt = `请仔细分析以下品牌内容，并提取基本信息：\n${content}\n请根据上述内容分析并生成JSON格式的基本品牌信息, 包含以下结构:\n重要：请根据品牌内容提取真实具体的信息，不要使用模板化的占位符文字。\n请返回JSON格式:\n{\n  \"brand_name\": \"品牌名称\",\n  \"brand_description\": \"品牌简介\",\n  \"industry\": \"所属行业\",\n  \"main_products\": [\"主要产品1\", \"主要产品2\"]\n}\n\n只返回JSON, 不要其他文字。`;\n        const response = await new _LLM__WEBPACK_IMPORTED_MODULE_0__.LLM({\n            temperature: 0.5,\n            system_prompt: \"你是品牌分析专家，请提取品牌基本信息。\"\n        }).json(prompt);\n        return this.extractJsonFromResponse(response);\n    }\n    /**\n   * 生成品牌定位\n   */ async generateBrandPositioning(content, brandName) {\n        const prompt = `请仔细分析以下${brandName}的品牌内容，并基于内容生成具体的品牌定位信息：\n\n${content}\n请根据上述内容分析并生成JSON格式的品牌定位, 包含以下结构:\n- title: 固定为\"品牌定位\"\n- description: 根据品牌内容总结的具体定位描述\n- we_believe: 包含title\"我们相信\"和3个具体信念点的数组\n- we_oppose: 包含title\"我们反对\"和3个具体反对点的数组  \n- brand_mission: 包含title\"品牌使命\"和具体使命描述\n- why_choose_us: 包含title\"为什么选择我们\"、具体选择理由、价值主张和补充信息\n\n重要：请根据品牌内容生成真实具体的内容，不要使用模板化的占位符文字。\n\n请返回JSON格式参考:\n{\n  \"title\": \"品牌定位\",\n  \"description\": \"品牌定位描述\",\n  \"we_believe\": {\n    \"title\": \"我们相信\",\n    \"points\": [\"信念点1\", \"信念点2\", \"信念点3\"]\n  },\n  \"we_oppose\": {\n    \"title\": \"我们反对\",\n    \"points\": [\"反对点1\", \"反对点2\", \"反对点3\"]\n  },\n  \"brand_mission\": {\n    \"title\": \"品牌使命\",\n    \"description\": \"品牌使命描述\"\n  },\n  \"why_choose_us\": {\n    \"title\": \"为什么选择我们\",\n    \"reason\": \"选择理由\",\n    \"statement\": \"价值主张\",\n    \"additional_info\": \"补充信息\"\n  }\n}\n\n只返回JSON，不要其他文字。`;\n        const response = await new _LLM__WEBPACK_IMPORTED_MODULE_0__.LLM({\n            system_prompt: \"你是品牌定位专家，请生成品牌定位信息。\"\n        }).json(prompt);\n        return this.extractJsonFromResponse(response);\n    }\n    /**\n   * 生成品牌表达\n   */ async generateBrandExpression(content, brandName) {\n        const prompt = `请仔细分析以下${brandName}的品牌内容，并基于内容生成具体的品牌表达信息：\n\n${content}\n请根据上述内容分析并生成JSON格式的品牌表达，包含以下结构：\n- title: 固定为\"品牌表达\"\n- description: 根据品牌内容总结的具体表达描述\n- language_style: 包含title\"语言风格\"和3个具体语言风格选项的数组\n- brand_slogan: 包含title\"品牌口号\"和根据品牌特色创作的具体口号\n- color_style: 包含title\"色彩风格\"、具体描述和调色板数组，调色板包含主色调名称和具体的十六进制颜色值\n- tone: 包含title\"品牌调性\"和具体的调性描述\n- icon: 包含合适的图标占位符描述\n- font_layout: 包含合适的字体布局占位符描述\n- web_link: 包含品牌相关的网站链接（如果内容中有提及）\n\n重要：\n1. 请根据品牌内容生成真实具体的内容，不要使用模板化的占位符文字\n2. 颜色值请使用标准十六进制格式（如#FF5733）\n3. 语言风格要体现品牌特色\n4. 品牌口号要朗朗上口且符合品牌定位\n\n请返回JSON格式：\n{\n  \"title\": \"品牌表达\",\n  \"description\": \"品牌表达描述\",\n  \"language_style\": {\n    \"title\": \"语言风格\",\n    \"options\": [\"风格1\", \"风格2\", \"风格3\"]\n  },\n  \"brand_slogan\": {\n    \"title\": \"品牌口号\",\n    \"slogan\": \"品牌口号内容\"\n  },\n  \"color_style\": {\n    \"title\": \"色彩风格\",\n    \"description\": \"色彩风格描述\",\n    \"palettes\": [\n      {\n        \"name\": \"主色调\",\n        \"primary_color\": \"#主色值\",\n        \"secondary_color\": \"#辅助色值\",\n        \"background_color\": \"#背景色值\",\n        \"secondary_background_color\": \"#次背景色值\"\n      }\n    ]\n  },\n  \"tone\": {\n    \"title\": \"品牌调性\",\n    \"description\": \"品牌调性描述\"\n  },\n  \"icon\": {\n    \"placeholder\": \"图标占位符\"\n  },\n  \"font_layout\": {\n    \"placeholder\": \"字体布局占位符\"\n  },\n  \"web_link\": {\n    \"url\": \"网站链接\"\n  }\n}\n\n颜色值请使用标准十六进制格式。只返回JSON，不要其他文字。`;\n        const response = await new _LLM__WEBPACK_IMPORTED_MODULE_0__.LLM({\n            system_prompt: \"你是品牌表达专家，请生成品牌视觉和语言表达信息。\"\n        }).json(prompt);\n        return this.extractJsonFromResponse(response);\n    }\n    /**\n   * 生成用户画像\n   */ async generateUserPersonas(content, brandName) {\n        const prompt = `请仔细分析以下${brandName}的品牌内容，并基于内容生成具体的用户画像信息：\n\n${content}\n请根据上述内容分析并生成JSON格式的用户画像，包含以下结构：\n- title: 固定为\"用户画像\"\n- description: 根据品牌内容总结的具体用户画像描述\n- personas: 包含1-3个不同用户画像的数组，每个画像包含：\n  - id: 唯一标识符（如persona_1, persona_2等）\n  - title: 具体的用户画像标题（如\"年轻职场白领\"、\"资深技术专家\"等）\n  - avatar: 头像描述\n  - name: 具体的用户名称\n  - age_gender: 具体的年龄和性别信息（如\"25-35岁女性\"）\n  - percentage_in_group: 在目标用户群体中的占比（如\"35%\"）\n  - description: 详细的用户描述\n  - pain_points: 3个具体的用户痛点\n  - user_characteristics: 用户特征数组，包含关键词和百分比\n  - user_scenarios: 2-3个具体的使用场景\n\n重要：\n1. 请根据品牌内容生成真实具体的用户画像，不要使用模板化的占位符文字\n2. 用户画像要符合品牌的目标客户群体\n3. 痛点和使用场景要贴合实际情况\n4. 特征关键词要准确反映用户属性\n\n请返回JSON格式：\n{\n  \"title\": \"用户画像\",\n  \"description\": \"用户画像描述\",\n  \"personas\": [\n    {\n      \"id\": \"persona_1\",\n      \"title\": \"用户画像1\",\n      \"avatar\": \"头像占位符\",\n      \"name\": \"用户名称\",\n      \"age_gender\": \"年龄性别\",\n      \"percentage_in_group\": \"占比\",\n      \"description\": \"用户描述\",\n      \"pain_points\": [\"痛点1\", \"痛点2\", \"痛点3\"],\n      \"user_characteristics\": [\n        {\n          \"keyword\": \"特征关键词\",\n          \"percentage\": 80\n        }\n      ],\n      \"user_scenarios\": [\"使用场景1\", \"使用场景2\"]\n    }\n  ]\n}\n\n请生成1-3个不同的用户画像。只返回JSON，不要其他文字。`;\n        const response = await new _LLM__WEBPACK_IMPORTED_MODULE_0__.LLM({\n            system_prompt: \"你是用户研究专家，请生成详细的用户画像。\"\n        }).json(prompt);\n        return this.extractJsonFromResponse(response);\n    }\n    /**\n   * 组合所有品牌资产数据\n   */ assembleBrandAsset(basicInfo, positioning, expression, personas) {\n        return {\n            brand_name: basicInfo.brand_name || \"未命名品牌\",\n            brand_assets: {\n                title: \"品牌资产\",\n                description: basicInfo.brand_description || \"品牌资产描述\",\n                brand_image: {\n                    title: \"品牌形象\",\n                    description: \"品牌形象描述\",\n                    brand_positioning: positioning,\n                    brand_expression: expression\n                },\n                user_personas: personas\n            }\n        };\n    }\n    /**\n   * 验证并修复缺失字段\n   */ async validateAndFixMissingFields(brandAsset, originalContent) {\n        const missingFields = this.findMissingFields(brandAsset);\n        if (missingFields.length > 0) {\n            console.log(`发现${missingFields.length}个缺失字段，正在补全...`);\n            for (const field of missingFields){\n                try {\n                    const fixedValue = await this.generateMissingField(field, originalContent, brandAsset.brand_name);\n                    this.setNestedField(brandAsset, field, fixedValue);\n                } catch (error) {\n                    console.warn(`补全字段${field}失败，使用默认值:`, error);\n                    this.setNestedField(brandAsset, field, this.getDefaultValueForField(field));\n                }\n            }\n        }\n        return brandAsset;\n    }\n    /**\n   * 查找缺失的字段\n   */ findMissingFields(data) {\n        const requiredPaths = [\n            \"brand_name\",\n            \"brand_assets.title\",\n            \"brand_assets.description\",\n            \"brand_assets.brand_image.title\",\n            \"brand_assets.brand_image.description\",\n            \"brand_assets.brand_image.brand_positioning.title\",\n            \"brand_assets.brand_image.brand_positioning.we_believe.points\",\n            \"brand_assets.brand_image.brand_positioning.we_oppose.points\",\n            \"brand_assets.brand_image.brand_positioning.brand_mission.description\",\n            \"brand_assets.brand_image.brand_expression.language_style.options\",\n            \"brand_assets.brand_image.brand_expression.brand_slogan.slogan\",\n            \"brand_assets.brand_image.brand_expression.color_style.palettes\",\n            \"brand_assets.user_personas.personas\"\n        ];\n        const missing = [];\n        for (const path of requiredPaths){\n            if (!this.getNestedField(data, path)) {\n                missing.push(path);\n            }\n        }\n        return missing;\n    }\n    /**\n   * 生成缺失字段的值\n   */ async generateMissingField(fieldPath, content, brandName) {\n        const prompt = `请为品牌\"${brandName}\"生成缺失的字段\"${fieldPath}\"的值。\n\n品牌内容：${content}\n\n请根据字段路径返回合适的值，格式为JSON。只返回该字段的值，不要包装在其他结构中。`;\n        const response = await new _LLM__WEBPACK_IMPORTED_MODULE_0__.LLM({\n            system_prompt: \"你是品牌数据补全专家，请生成缺失字段的合理值。\"\n        }).json(prompt);\n        return this.extractJsonFromResponse(response);\n    }\n    /**\n   * 从LLM响应中提取JSON\n   */ extractJsonFromResponse(response) {\n        if (response.error) {\n            throw new Error(`LLM调用失败: ${response.error}`);\n        }\n        // 如果响应包含raw_content，尝试从中提取JSON\n        if (response.raw_content) {\n            return this.extractBrandDataFromText(response.raw_content);\n        }\n        return response;\n    }\n    /**\n   * 从文本中提取品牌数据\n   */ extractBrandDataFromText(text) {\n        try {\n            // 尝试提取JSON\n            const jsonMatch = text.match(/\\{[\\s\\S]*\\}/);\n            if (jsonMatch) {\n                return JSON.parse(jsonMatch[0]);\n            }\n            throw new Error(\"无法从响应中提取有效的JSON\");\n        } catch (error) {\n            throw new Error(`JSON解析失败: ${error instanceof Error ? error.message : \"未知错误\"}`);\n        }\n    }\n    /**\n   * 获取嵌套字段的值\n   */ getNestedField(obj, path) {\n        const keys = path.split(\".\");\n        let current = obj;\n        for (const key of keys){\n            if (!current || current[key] === undefined || current[key] === null) {\n                return null;\n            }\n            current = current[key];\n        }\n        // 检查数组是否为空\n        if (Array.isArray(current) && current.length === 0) {\n            return null;\n        }\n        return current;\n    }\n    /**\n   * 设置嵌套字段的值\n   */ setNestedField(obj, path, value) {\n        const keys = path.split(\".\");\n        let current = obj;\n        for(let i = 0; i < keys.length - 1; i++){\n            const key = keys[i];\n            if (!current[key] || typeof current[key] !== \"object\") {\n                current[key] = {};\n            }\n            current = current[key];\n        }\n        current[keys[keys.length - 1]] = value;\n    }\n    /**\n   * 获取字段的默认值\n   */ getDefaultValueForField(fieldPath) {\n        const defaults = {\n            brand_name: \"未命名品牌\",\n            \"brand_assets.title\": \"品牌资产\",\n            \"brand_assets.description\": \"品牌资产描述\",\n            \"brand_assets.brand_image.title\": \"品牌形象\",\n            \"brand_assets.brand_image.description\": \"品牌形象描述\",\n            \"brand_assets.brand_image.brand_positioning.title\": \"品牌定位\",\n            \"brand_assets.brand_image.brand_positioning.we_believe.points\": [\n                \"创新驱动价值\",\n                \"用户体验至上\"\n            ],\n            \"brand_assets.brand_image.brand_positioning.we_oppose.points\": [\n                \"低质量产品\",\n                \"虚假宣传\"\n            ],\n            \"brand_assets.brand_image.brand_positioning.brand_mission.description\": \"为用户创造价值\",\n            \"brand_assets.brand_image.brand_expression.language_style.options\": [\n                \"专业\",\n                \"友好\"\n            ],\n            \"brand_assets.brand_image.brand_expression.brand_slogan.slogan\": \"创新引领未来\",\n            \"brand_assets.brand_image.brand_expression.color_style.palettes\": [\n                {\n                    name: \"主色调\",\n                    primary_color: \"#2563eb\",\n                    secondary_color: \"#64748b\",\n                    background_color: \"#ffffff\",\n                    secondary_background_color: \"#f8fafc\"\n                }\n            ],\n            \"brand_assets.user_personas.personas\": [\n                this.getDefaultPersona()\n            ]\n        };\n        return defaults[fieldPath] || \"默认值\";\n    }\n    /**\n   * 获取默认用户画像\n   */ getDefaultPersona() {\n        return {\n            id: \"persona_1\",\n            title: \"目标用户\",\n            avatar: \"用户头像占位符\",\n            name: \"典型用户\",\n            age_gender: \"25-35岁，男女不限\",\n            percentage_in_group: \"60%\",\n            description: \"对品质有要求的消费者\",\n            pain_points: [\n                \"产品质量不稳定\",\n                \"服务响应慢\",\n                \"价格不透明\"\n            ],\n            user_characteristics: [\n                {\n                    keyword: \"品质导向\",\n                    percentage: 85\n                },\n                {\n                    keyword: \"价格敏感\",\n                    percentage: 70\n                }\n            ],\n            user_scenarios: [\n                \"日常使用\",\n                \"特殊需求\"\n            ]\n        };\n    }\n}\n/**\n * 便捷函数：从长文本生成品牌资产\n * @param content 包含品牌信息的长文本\n * @returns 结构化的品牌资产数据\n */ async function generateBrandAsset(content) {\n    const generator = new BrandAssetGenerator();\n    return await generator.generateBrandAsset(content);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvc2VydmljZXMvY29yZS9CcmFuZEFzc2V0R2VuZXJhdG9yLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE0QjtBQUc1Qjs7O0NBR0MsR0FDTSxNQUFNQztJQUNYOzs7O0dBSUMsR0FDRCxNQUFNQyxtQkFBbUJDLE9BQWUsRUFBMkI7UUFDakUsSUFBSTtZQUNGQyxRQUFRQyxHQUFHLENBQUM7WUFFWixlQUFlO1lBQ2YsTUFBTUMsWUFBWSxNQUFNLElBQUksQ0FBQ0Msc0JBQXNCLENBQUNKO1lBQ3BEQyxRQUFRQyxHQUFHLENBQUM7WUFDWkQsUUFBUUMsR0FBRyxDQUFDLFdBQVdDO1lBRXZCLGFBQWE7WUFDYixNQUFNRSxjQUFjLE1BQU0sSUFBSSxDQUFDQyx3QkFBd0IsQ0FDckROLFNBQ0FHLFVBQVVJLFVBQVU7WUFFdEJOLFFBQVFDLEdBQUcsQ0FBQztZQUNaRCxRQUFRQyxHQUFHLENBQUMsU0FBU0c7WUFFckIsYUFBYTtZQUNiLE1BQU1HLGFBQWEsTUFBTSxJQUFJLENBQUNDLHVCQUF1QixDQUNuRFQsU0FDQUcsVUFBVUksVUFBVTtZQUV0Qk4sUUFBUUMsR0FBRyxDQUFDO1lBQ1pELFFBQVFDLEdBQUcsQ0FBQyxTQUFTTTtZQUVyQixhQUFhO1lBQ2IsTUFBTUUsV0FBVyxNQUFNLElBQUksQ0FBQ0Msb0JBQW9CLENBQzlDWCxTQUNBRyxVQUFVSSxVQUFVO1lBRXRCTixRQUFRQyxHQUFHLENBQUM7WUFDWkQsUUFBUUMsR0FBRyxDQUFDLFNBQVNRO1lBRXJCLGFBQWE7WUFDYixNQUFNRSxhQUFhLElBQUksQ0FBQ0Msa0JBQWtCLENBQ3hDVixXQUNBRSxhQUNBRyxZQUNBRTtZQUVGVCxRQUFRQyxHQUFHLENBQUMsU0FBU1U7WUFFckIsZ0JBQWdCO1lBQ2hCLE1BQU1FLGdCQUFnQixNQUFNLElBQUksQ0FBQ0MsMkJBQTJCLENBQzFESCxZQUNBWjtZQUVGQyxRQUFRQyxHQUFHLENBQUM7WUFDWkQsUUFBUUMsR0FBRyxDQUFDLGFBQWFZO1lBRXpCLE9B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LFVBQVUsSUFBSTtJQUNoQztJQUVBOztHQUVDLEdBQ0Qsb0JBQWdDO1FBQzlCLE9BQU87WUFDTHlCLElBQUk7WUFDSi9DLE9BQU87WUFDUGdELFFBQVE7WUFDUlAsTUFBTTtZQUNOUSxZQUFZO1lBQ1pDLHFCQUFxQjtZQUNyQmpELGFBQWE7WUFDYmtELGFBQWE7Z0JBQUM7Z0JBQVc7Z0JBQVM7YUFBUTtZQUMxQ0Msc0JBQXNCO2dCQUNwQjtvQkFDRUMsU0FBUztvQkFDVEMsWUFBWTtnQkFDZDtnQkFDQTtvQkFDRUQsU0FBUztvQkFDVEMsWUFBWTtnQkFDZDthQUNEO1lBQ0RDLGdCQUFnQjtnQkFBQztnQkFBUTthQUFPO1FBQ2xDO0lBQ0Y7QUFDRjtBQUVBOzs7O0NBSUMsR0FDTSxlQUFldEYsbUJBQ3BCQyxPQUFlO0lBRWYsTUFBTXNGLFlBQVksSUFBSXhGO0lBQ3RCLE9BQU8sTUFBTXdGLFVBQVV2RixrQkFBa0IsQ0FBQ0M7QUFDNUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy93YW5nZW5pdXMvRG9jdW1lbnRzL3R3aW5rbGUvdHlwZXNjcmlwdC1icmFuZHZhbHVlL2FwcC9zZXJ2aWNlcy9jb3JlL0JyYW5kQXNzZXRHZW5lcmF0b3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTExNIH0gZnJvbSBcIi4vTExNXCI7XG5pbXBvcnQgeyBCcmFuZElucHV0RGF0YSB9IGZyb20gXCIuLi90eXBlcy9CcmFuZEFzc2V0XCI7XG5cbi8qKlxuICog5ZOB54mM6LWE5Lqn55Sf5oiQ5ZmoXG4gKiDkvb/nlKjlpKfmqKHlnovku47plb/mlofmnKzlhoXlrrnnlJ/miJDnu5PmnoTljJbnmoTlk4HniYzotYTkuqfmlbDmja5cbiAqL1xuZXhwb3J0IGNsYXNzIEJyYW5kQXNzZXRHZW5lcmF0b3Ige1xuICAvKipcbiAgICog5LuO6ZW/5paH5pys5YaF5a6555Sf5oiQ5ZOB54mM6LWE5LqnXG4gICAqIEBwYXJhbSBjb250ZW50IOWMheWQq+WTgeeJjOS/oeaBr+eahOmVv+aWh+acrFxuICAgKiBAcmV0dXJucyDnu5PmnoTljJbnmoTlk4HniYzotYTkuqfmlbDmja5cbiAgICovXG4gIGFzeW5jIGdlbmVyYXRlQnJhbmRBc3NldChjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPEJyYW5kSW5wdXREYXRhPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKFwi5byA5aeL5YiG5q2l55Sf5oiQ5ZOB54mM6LWE5LqnLi4uXCIpO1xuXG4gICAgICAvLyDmraXpqqQx77ya55Sf5oiQ5Z+65pys5ZOB54mM5L+h5oGvXG4gICAgICBjb25zdCBiYXNpY0luZm8gPSBhd2FpdCB0aGlzLmdlbmVyYXRlQmFzaWNCcmFuZEluZm8oY29udGVudCk7XG4gICAgICBjb25zb2xlLmxvZyhcIuKchSDln7rmnKzlk4HniYzkv6Hmga/nlJ/miJDlrozmiJBcIik7XG4gICAgICBjb25zb2xlLmxvZyhcIuWfuuacrOWTgeeJjOS/oeaBrzpcIiwgYmFzaWNJbmZvKTtcblxuICAgICAgLy8g5q2l6aqkMu+8mueUn+aIkOWTgeeJjOWumuS9jVxuICAgICAgY29uc3QgcG9zaXRpb25pbmcgPSBhd2FpdCB0aGlzLmdlbmVyYXRlQnJhbmRQb3NpdGlvbmluZyhcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgYmFzaWNJbmZvLmJyYW5kX25hbWVcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhcIuKchSDlk4HniYzlrprkvY3nlJ/miJDlrozmiJBcIik7XG4gICAgICBjb25zb2xlLmxvZyhcIuWTgeeJjOWumuS9jTpcIiwgcG9zaXRpb25pbmcpO1xuXG4gICAgICAvLyDmraXpqqQz77ya55Sf5oiQ5ZOB54mM6KGo6L6+XG4gICAgICBjb25zdCBleHByZXNzaW9uID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUJyYW5kRXhwcmVzc2lvbihcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgYmFzaWNJbmZvLmJyYW5kX25hbWVcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhcIuKchSDlk4HniYzooajovr7nlJ/miJDlrozmiJBcIik7XG4gICAgICBjb25zb2xlLmxvZyhcIuWTgeeJjOihqOi+vjpcIiwgZXhwcmVzc2lvbik7XG5cbiAgICAgIC8vIOatpemqpDTvvJrnlJ/miJDnlKjmiLfnlLvlg49cbiAgICAgIGNvbnN0IHBlcnNvbmFzID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVVzZXJQZXJzb25hcyhcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgYmFzaWNJbmZvLmJyYW5kX25hbWVcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhcIuKchSDnlKjmiLfnlLvlg4/nlJ/miJDlrozmiJBcIik7XG4gICAgICBjb25zb2xlLmxvZyhcIueUqOaIt+eUu+WDjzpcIiwgcGVyc29uYXMpO1xuXG4gICAgICAvLyDmraXpqqQ177ya57uE5ZCI5omA5pyJ5pWw5o2uXG4gICAgICBjb25zdCBicmFuZEFzc2V0ID0gdGhpcy5hc3NlbWJsZUJyYW5kQXNzZXQoXG4gICAgICAgIGJhc2ljSW5mbyxcbiAgICAgICAgcG9zaXRpb25pbmcsXG4gICAgICAgIGV4cHJlc3Npb24sXG4gICAgICAgIHBlcnNvbmFzXG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2coXCLlk4HniYzotYTkuqc6XCIsIGJyYW5kQXNzZXQpO1xuXG4gICAgICAvLyDmraXpqqQ277ya6aqM6K+B5ZKM6KGl5YWo57y65aSx5a2X5q61XG4gICAgICBjb25zdCB2YWxpZGF0ZWREYXRhID0gYXdhaXQgdGhpcy52YWxpZGF0ZUFuZEZpeE1pc3NpbmdGaWVsZHMoXG4gICAgICAgIGJyYW5kQXNzZXQsXG4gICAgICAgIGNvbnRlbnRcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhcIuKchSDlk4HniYzotYTkuqfpqozor4HlkozooaXlhajlrozmiJBcIik7XG4gICAgICBjb25zb2xlLmxvZyhcIumqjOivgeWQjueahOWTgeeJjOi1hOS6pzpcIiwgdmFsaWRhdGVkRGF0YSk7XG5cbiAgICAgIHJldHVybiB2YWxpZGF0ZWREYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwi55Sf5oiQ5ZOB54mM6LWE5Lqn5aSx6LSlOlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGDnlJ/miJDlk4HniYzotYTkuqflpLHotKU6ICR7XG4gICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIuacquefpemUmeivr1wiXG4gICAgICAgIH1gXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8vIOWPr+mAie+8muWvueWkluaatOmcsuijhemFjeS4juagoemqjO+8iOaaguS4jeeUqOS6jui3r+eUse+8iVxuICBwdWJsaWMgYXNzZW1ibGVBc3NldChcbiAgICBiYXNpY0luZm86IGFueSxcbiAgICBwb3NpdGlvbmluZzogYW55LFxuICAgIGV4cHJlc3Npb246IGFueSxcbiAgICBwZXJzb25hczogYW55XG4gICk6IGFueSB7XG4gICAgcmV0dXJuIHRoaXMuYXNzZW1ibGVCcmFuZEFzc2V0KGJhc2ljSW5mbywgcG9zaXRpb25pbmcsIGV4cHJlc3Npb24sIHBlcnNvbmFzKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB2YWxpZGF0ZUFzc2V0KGJyYW5kQXNzZXQ6IGFueSwgb3JpZ2luYWxDb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPEJyYW5kSW5wdXREYXRhPiB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudmFsaWRhdGVBbmRGaXhNaXNzaW5nRmllbGRzKGJyYW5kQXNzZXQsIG9yaWdpbmFsQ29udGVudCk7XG4gIH1cblxuICAvKipcbiAgICog55Sf5oiQ5Z+65pys5ZOB54mM5L+h5oGvXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2VuZXJhdGVCYXNpY0JyYW5kSW5mbyhjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHByb21wdCA9IGDor7fku5Tnu4bliIbmnpDku6XkuIvlk4HniYzlhoXlrrnvvIzlubbmj5Dlj5bln7rmnKzkv6Hmga/vvJpcbiR7Y29udGVudH1cbuivt+agueaNruS4iui/sOWGheWuueWIhuaekOW5tueUn+aIkEpTT07moLzlvI/nmoTln7rmnKzlk4HniYzkv6Hmga8sIOWMheWQq+S7peS4i+e7k+aehDpcbumHjeimge+8muivt+agueaNruWTgeeJjOWGheWuueaPkOWPluecn+WunuWFt+S9k+eahOS/oeaBr++8jOS4jeimgeS9v+eUqOaooeadv+WMlueahOWNoOS9jeespuaWh+Wtl+OAglxu6K+36L+U5ZueSlNPTuagvOW8jzpcbntcbiAgXCJicmFuZF9uYW1lXCI6IFwi5ZOB54mM5ZCN56ewXCIsXG4gIFwiYnJhbmRfZGVzY3JpcHRpb25cIjogXCLlk4HniYznroDku4tcIixcbiAgXCJpbmR1c3RyeVwiOiBcIuaJgOWxnuihjOS4mlwiLFxuICBcIm1haW5fcHJvZHVjdHNcIjogW1wi5Li76KaB5Lqn5ZOBMVwiLCBcIuS4u+imgeS6p+WTgTJcIl1cbn1cblxu5Y+q6L+U5ZueSlNPTiwg5LiN6KaB5YW25LuW5paH5a2X44CCYDtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbmV3IExMTSh7XG4gICAgICB0ZW1wZXJhdHVyZTogMC41LFxuICAgICAgc3lzdGVtX3Byb21wdDogXCLkvaDmmK/lk4HniYzliIbmnpDkuJPlrrbvvIzor7fmj5Dlj5blk4HniYzln7rmnKzkv6Hmga/jgIJcIixcbiAgICB9KS5qc29uKHByb21wdCk7XG5cbiAgICByZXR1cm4gdGhpcy5leHRyYWN0SnNvbkZyb21SZXNwb25zZShyZXNwb25zZSk7XG4gIH1cblxuICAvKipcbiAgICog55Sf5oiQ5ZOB54mM5a6a5L2NXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2VuZXJhdGVCcmFuZFBvc2l0aW9uaW5nKFxuICAgIGNvbnRlbnQ6IHN0cmluZyxcbiAgICBicmFuZE5hbWU6IHN0cmluZ1xuICApOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHByb21wdCA9IGDor7fku5Tnu4bliIbmnpDku6XkuIske2JyYW5kTmFtZX3nmoTlk4HniYzlhoXlrrnvvIzlubbln7rkuo7lhoXlrrnnlJ/miJDlhbfkvZPnmoTlk4HniYzlrprkvY3kv6Hmga/vvJpcblxuJHtjb250ZW50fVxu6K+35qC55o2u5LiK6L+w5YaF5a655YiG5p6Q5bm255Sf5oiQSlNPTuagvOW8j+eahOWTgeeJjOWumuS9jSwg5YyF5ZCr5Lul5LiL57uT5p6EOlxuLSB0aXRsZTog5Zu65a6a5Li6XCLlk4HniYzlrprkvY1cIlxuLSBkZXNjcmlwdGlvbjog5qC55o2u5ZOB54mM5YaF5a655oC757uT55qE5YW35L2T5a6a5L2N5o+P6L+wXG4tIHdlX2JlbGlldmU6IOWMheWQq3RpdGxlXCLmiJHku6znm7jkv6FcIuWSjDPkuKrlhbfkvZPkv6Hlv7XngrnnmoTmlbDnu4Rcbi0gd2Vfb3Bwb3NlOiDljIXlkKt0aXRsZVwi5oiR5Lus5Y+N5a+5XCLlkowz5Liq5YW35L2T5Y+N5a+554K555qE5pWw57uEICBcbi0gYnJhbmRfbWlzc2lvbjog5YyF5ZCrdGl0bGVcIuWTgeeJjOS9v+WRvVwi5ZKM5YW35L2T5L2/5ZG95o+P6L+wXG4tIHdoeV9jaG9vc2VfdXM6IOWMheWQq3RpdGxlXCLkuLrku4DkuYjpgInmi6nmiJHku6xcIuOAgeWFt+S9k+mAieaLqeeQhueUseOAgeS7t+WAvOS4u+W8oOWSjOihpeWFheS/oeaBr1xuXG7ph43opoHvvJror7fmoLnmja7lk4HniYzlhoXlrrnnlJ/miJDnnJ/lrp7lhbfkvZPnmoTlhoXlrrnvvIzkuI3opoHkvb/nlKjmqKHmnb/ljJbnmoTljaDkvY3nrKbmloflrZfjgIJcblxu6K+36L+U5ZueSlNPTuagvOW8j+WPguiAgzpcbntcbiAgXCJ0aXRsZVwiOiBcIuWTgeeJjOWumuS9jVwiLFxuICBcImRlc2NyaXB0aW9uXCI6IFwi5ZOB54mM5a6a5L2N5o+P6L+wXCIsXG4gIFwid2VfYmVsaWV2ZVwiOiB7XG4gICAgXCJ0aXRsZVwiOiBcIuaIkeS7rOebuOS/oVwiLFxuICAgIFwicG9pbnRzXCI6IFtcIuS/oeW/teeCuTFcIiwgXCLkv6Hlv7XngrkyXCIsIFwi5L+h5b+154K5M1wiXVxuICB9LFxuICBcIndlX29wcG9zZVwiOiB7XG4gICAgXCJ0aXRsZVwiOiBcIuaIkeS7rOWPjeWvuVwiLFxuICAgIFwicG9pbnRzXCI6IFtcIuWPjeWvueeCuTFcIiwgXCLlj43lr7nngrkyXCIsIFwi5Y+N5a+554K5M1wiXVxuICB9LFxuICBcImJyYW5kX21pc3Npb25cIjoge1xuICAgIFwidGl0bGVcIjogXCLlk4HniYzkvb/lkb1cIixcbiAgICBcImRlc2NyaXB0aW9uXCI6IFwi5ZOB54mM5L2/5ZG95o+P6L+wXCJcbiAgfSxcbiAgXCJ3aHlfY2hvb3NlX3VzXCI6IHtcbiAgICBcInRpdGxlXCI6IFwi5Li65LuA5LmI6YCJ5oup5oiR5LusXCIsXG4gICAgXCJyZWFzb25cIjogXCLpgInmi6nnkIbnlLFcIixcbiAgICBcInN0YXRlbWVudFwiOiBcIuS7t+WAvOS4u+W8oFwiLFxuICAgIFwiYWRkaXRpb25hbF9pbmZvXCI6IFwi6KGl5YWF5L+h5oGvXCJcbiAgfVxufVxuXG7lj6rov5Tlm55KU09O77yM5LiN6KaB5YW25LuW5paH5a2X44CCYDtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbmV3IExMTSh7XG4gICAgICBzeXN0ZW1fcHJvbXB0OiBcIuS9oOaYr+WTgeeJjOWumuS9jeS4k+Wutu+8jOivt+eUn+aIkOWTgeeJjOWumuS9jeS/oeaBr+OAglwiLFxuICAgIH0pLmpzb24ocHJvbXB0KTtcblxuICAgIHJldHVybiB0aGlzLmV4dHJhY3RKc29uRnJvbVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnlJ/miJDlk4HniYzooajovr5cbiAgICovXG4gIHB1YmxpYyBhc3luYyBnZW5lcmF0ZUJyYW5kRXhwcmVzc2lvbihcbiAgICBjb250ZW50OiBzdHJpbmcsXG4gICAgYnJhbmROYW1lOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCBwcm9tcHQgPSBg6K+35LuU57uG5YiG5p6Q5Lul5LiLJHticmFuZE5hbWV955qE5ZOB54mM5YaF5a6577yM5bm25Z+65LqO5YaF5a6555Sf5oiQ5YW35L2T55qE5ZOB54mM6KGo6L6+5L+h5oGv77yaXG5cbiR7Y29udGVudH1cbuivt+agueaNruS4iui/sOWGheWuueWIhuaekOW5tueUn+aIkEpTT07moLzlvI/nmoTlk4HniYzooajovr7vvIzljIXlkKvku6XkuIvnu5PmnoTvvJpcbi0gdGl0bGU6IOWbuuWumuS4ulwi5ZOB54mM6KGo6L6+XCJcbi0gZGVzY3JpcHRpb246IOagueaNruWTgeeJjOWGheWuueaAu+e7k+eahOWFt+S9k+ihqOi+vuaPj+i/sFxuLSBsYW5ndWFnZV9zdHlsZTog5YyF5ZCrdGl0bGVcIuivreiogOmjjuagvFwi5ZKMM+S4quWFt+S9k+ivreiogOmjjuagvOmAiemhueeahOaVsOe7hFxuLSBicmFuZF9zbG9nYW46IOWMheWQq3RpdGxlXCLlk4HniYzlj6Plj7dcIuWSjOagueaNruWTgeeJjOeJueiJsuWIm+S9nOeahOWFt+S9k+WPo+WPt1xuLSBjb2xvcl9zdHlsZTog5YyF5ZCrdGl0bGVcIuiJsuW9qemjjuagvFwi44CB5YW35L2T5o+P6L+w5ZKM6LCD6Imy5p2/5pWw57uE77yM6LCD6Imy5p2/5YyF5ZCr5Li76Imy6LCD5ZCN56ew5ZKM5YW35L2T55qE5Y2B5YWt6L+b5Yi26aKc6Imy5YC8XG4tIHRvbmU6IOWMheWQq3RpdGxlXCLlk4HniYzosIPmgKdcIuWSjOWFt+S9k+eahOiwg+aAp+aPj+i/sFxuLSBpY29uOiDljIXlkKvlkIjpgILnmoTlm77moIfljaDkvY3nrKbmj4/ov7Bcbi0gZm9udF9sYXlvdXQ6IOWMheWQq+WQiOmAgueahOWtl+S9k+W4g+WxgOWNoOS9jeespuaPj+i/sFxuLSB3ZWJfbGluazog5YyF5ZCr5ZOB54mM55u45YWz55qE572R56uZ6ZO+5o6l77yI5aaC5p6c5YaF5a655Lit5pyJ5o+Q5Y+K77yJXG5cbumHjeimge+8mlxuMS4g6K+35qC55o2u5ZOB54mM5YaF5a6555Sf5oiQ55yf5a6e5YW35L2T55qE5YaF5a6577yM5LiN6KaB5L2/55So5qih5p2/5YyW55qE5Y2g5L2N56ym5paH5a2XXG4yLiDpopzoibLlgLzor7fkvb/nlKjmoIflh4bljYHlha3ov5vliLbmoLzlvI/vvIjlpoIjRkY1NzMz77yJXG4zLiDor63oqIDpo47moLzopoHkvZPnjrDlk4HniYznibnoibJcbjQuIOWTgeeJjOWPo+WPt+imgeacl+acl+S4iuWPo+S4lOespuWQiOWTgeeJjOWumuS9jVxuXG7or7fov5Tlm55KU09O5qC85byP77yaXG57XG4gIFwidGl0bGVcIjogXCLlk4HniYzooajovr5cIixcbiAgXCJkZXNjcmlwdGlvblwiOiBcIuWTgeeJjOihqOi+vuaPj+i/sFwiLFxuICBcImxhbmd1YWdlX3N0eWxlXCI6IHtcbiAgICBcInRpdGxlXCI6IFwi6K+t6KiA6aOO5qC8XCIsXG4gICAgXCJvcHRpb25zXCI6IFtcIumjjuagvDFcIiwgXCLpo47moLwyXCIsIFwi6aOO5qC8M1wiXVxuICB9LFxuICBcImJyYW5kX3Nsb2dhblwiOiB7XG4gICAgXCJ0aXRsZVwiOiBcIuWTgeeJjOWPo+WPt1wiLFxuICAgIFwic2xvZ2FuXCI6IFwi5ZOB54mM5Y+j5Y+35YaF5a65XCJcbiAgfSxcbiAgXCJjb2xvcl9zdHlsZVwiOiB7XG4gICAgXCJ0aXRsZVwiOiBcIuiJsuW9qemjjuagvFwiLFxuICAgIFwiZGVzY3JpcHRpb25cIjogXCLoibLlvanpo47moLzmj4/ov7BcIixcbiAgICBcInBhbGV0dGVzXCI6IFtcbiAgICAgIHtcbiAgICAgICAgXCJuYW1lXCI6IFwi5Li76Imy6LCDXCIsXG4gICAgICAgIFwicHJpbWFyeV9jb2xvclwiOiBcIiPkuLvoibLlgLxcIixcbiAgICAgICAgXCJzZWNvbmRhcnlfY29sb3JcIjogXCIj6L6F5Yqp6Imy5YC8XCIsXG4gICAgICAgIFwiYmFja2dyb3VuZF9jb2xvclwiOiBcIiPog4zmma/oibLlgLxcIixcbiAgICAgICAgXCJzZWNvbmRhcnlfYmFja2dyb3VuZF9jb2xvclwiOiBcIiPmrKHog4zmma/oibLlgLxcIlxuICAgICAgfVxuICAgIF1cbiAgfSxcbiAgXCJ0b25lXCI6IHtcbiAgICBcInRpdGxlXCI6IFwi5ZOB54mM6LCD5oCnXCIsXG4gICAgXCJkZXNjcmlwdGlvblwiOiBcIuWTgeeJjOiwg+aAp+aPj+i/sFwiXG4gIH0sXG4gIFwiaWNvblwiOiB7XG4gICAgXCJwbGFjZWhvbGRlclwiOiBcIuWbvuagh+WNoOS9jeesplwiXG4gIH0sXG4gIFwiZm9udF9sYXlvdXRcIjoge1xuICAgIFwicGxhY2Vob2xkZXJcIjogXCLlrZfkvZPluIPlsYDljaDkvY3nrKZcIlxuICB9LFxuICBcIndlYl9saW5rXCI6IHtcbiAgICBcInVybFwiOiBcIue9keermemTvuaOpVwiXG4gIH1cbn1cblxu6aKc6Imy5YC86K+35L2/55So5qCH5YeG5Y2B5YWt6L+b5Yi25qC85byP44CC5Y+q6L+U5ZueSlNPTu+8jOS4jeimgeWFtuS7luaWh+Wtl+OAgmA7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG5ldyBMTE0oe1xuICAgICAgc3lzdGVtX3Byb21wdDogXCLkvaDmmK/lk4HniYzooajovr7kuJPlrrbvvIzor7fnlJ/miJDlk4HniYzop4bop4nlkozor63oqIDooajovr7kv6Hmga/jgIJcIixcbiAgICB9KS5qc29uKHByb21wdCk7XG5cbiAgICByZXR1cm4gdGhpcy5leHRyYWN0SnNvbkZyb21SZXNwb25zZShyZXNwb25zZSk7XG4gIH1cblxuICAvKipcbiAgICog55Sf5oiQ55So5oi355S75YOPXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2VuZXJhdGVVc2VyUGVyc29uYXMoXG4gICAgY29udGVudDogc3RyaW5nLFxuICAgIGJyYW5kTmFtZTogc3RyaW5nXG4gICk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgcHJvbXB0ID0gYOivt+S7lOe7huWIhuaekOS7peS4iyR7YnJhbmROYW1lfeeahOWTgeeJjOWGheWuue+8jOW5tuWfuuS6juWGheWuueeUn+aIkOWFt+S9k+eahOeUqOaIt+eUu+WDj+S/oeaBr++8mlxuXG4ke2NvbnRlbnR9XG7or7fmoLnmja7kuIrov7DlhoXlrrnliIbmnpDlubbnlJ/miJBKU09O5qC85byP55qE55So5oi355S75YOP77yM5YyF5ZCr5Lul5LiL57uT5p6E77yaXG4tIHRpdGxlOiDlm7rlrprkuLpcIueUqOaIt+eUu+WDj1wiXG4tIGRlc2NyaXB0aW9uOiDmoLnmja7lk4HniYzlhoXlrrnmgLvnu5PnmoTlhbfkvZPnlKjmiLfnlLvlg4/mj4/ov7Bcbi0gcGVyc29uYXM6IOWMheWQqzEtM+S4quS4jeWQjOeUqOaIt+eUu+WDj+eahOaVsOe7hO+8jOavj+S4queUu+WDj+WMheWQq++8mlxuICAtIGlkOiDllK/kuIDmoIfor4bnrKbvvIjlpoJwZXJzb25hXzEsIHBlcnNvbmFfMuetie+8iVxuICAtIHRpdGxlOiDlhbfkvZPnmoTnlKjmiLfnlLvlg4/moIfpopjvvIjlpoJcIuW5tOi9u+iBjOWcuueZvemihlwi44CBXCLotYTmt7HmioDmnK/kuJPlrrZcIuetie+8iVxuICAtIGF2YXRhcjog5aS05YOP5o+P6L+wXG4gIC0gbmFtZTog5YW35L2T55qE55So5oi35ZCN56ewXG4gIC0gYWdlX2dlbmRlcjog5YW35L2T55qE5bm06b6E5ZKM5oCn5Yir5L+h5oGv77yI5aaCXCIyNS0zNeWygeWls+aAp1wi77yJXG4gIC0gcGVyY2VudGFnZV9pbl9ncm91cDog5Zyo55uu5qCH55So5oi3576k5L2T5Lit55qE5Y2g5q+U77yI5aaCXCIzNSVcIu+8iVxuICAtIGRlc2NyaXB0aW9uOiDor6bnu4bnmoTnlKjmiLfmj4/ov7BcbiAgLSBwYWluX3BvaW50czogM+S4quWFt+S9k+eahOeUqOaIt+eXm+eCuVxuICAtIHVzZXJfY2hhcmFjdGVyaXN0aWNzOiDnlKjmiLfnibnlvoHmlbDnu4TvvIzljIXlkKvlhbPplK7or43lkoznmb7liIbmr5RcbiAgLSB1c2VyX3NjZW5hcmlvczogMi0z5Liq5YW35L2T55qE5L2/55So5Zy65pmvXG5cbumHjeimge+8mlxuMS4g6K+35qC55o2u5ZOB54mM5YaF5a6555Sf5oiQ55yf5a6e5YW35L2T55qE55So5oi355S75YOP77yM5LiN6KaB5L2/55So5qih5p2/5YyW55qE5Y2g5L2N56ym5paH5a2XXG4yLiDnlKjmiLfnlLvlg4/opoHnrKblkIjlk4HniYznmoTnm67moIflrqLmiLfnvqTkvZNcbjMuIOeXm+eCueWSjOS9v+eUqOWcuuaZr+imgei0tOWQiOWunumZheaDheWGtVxuNC4g54m55b6B5YWz6ZSu6K+N6KaB5YeG56Gu5Y+N5pig55So5oi35bGe5oCnXG5cbuivt+i/lOWbnkpTT07moLzlvI/vvJpcbntcbiAgXCJ0aXRsZVwiOiBcIueUqOaIt+eUu+WDj1wiLFxuICBcImRlc2NyaXB0aW9uXCI6IFwi55So5oi355S75YOP5o+P6L+wXCIsXG4gIFwicGVyc29uYXNcIjogW1xuICAgIHtcbiAgICAgIFwiaWRcIjogXCJwZXJzb25hXzFcIixcbiAgICAgIFwidGl0bGVcIjogXCLnlKjmiLfnlLvlg48xXCIsXG4gICAgICBcImF2YXRhclwiOiBcIuWktOWDj+WNoOS9jeesplwiLFxuICAgICAgXCJuYW1lXCI6IFwi55So5oi35ZCN56ewXCIsXG4gICAgICBcImFnZV9nZW5kZXJcIjogXCLlubTpvoTmgKfliKtcIixcbiAgICAgIFwicGVyY2VudGFnZV9pbl9ncm91cFwiOiBcIuWNoOavlFwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIueUqOaIt+aPj+i/sFwiLFxuICAgICAgXCJwYWluX3BvaW50c1wiOiBbXCLnl5vngrkxXCIsIFwi55eb54K5MlwiLCBcIueXm+eCuTNcIl0sXG4gICAgICBcInVzZXJfY2hhcmFjdGVyaXN0aWNzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwia2V5d29yZFwiOiBcIueJueW+geWFs+mUruivjVwiLFxuICAgICAgICAgIFwicGVyY2VudGFnZVwiOiA4MFxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgXCJ1c2VyX3NjZW5hcmlvc1wiOiBbXCLkvb/nlKjlnLrmma8xXCIsIFwi5L2/55So5Zy65pmvMlwiXVxuICAgIH1cbiAgXVxufVxuXG7or7fnlJ/miJAxLTPkuKrkuI3lkIznmoTnlKjmiLfnlLvlg4/jgILlj6rov5Tlm55KU09O77yM5LiN6KaB5YW25LuW5paH5a2X44CCYDtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbmV3IExMTSh7XG4gICAgICBzeXN0ZW1fcHJvbXB0OiBcIuS9oOaYr+eUqOaIt+eglOeptuS4k+Wutu+8jOivt+eUn+aIkOivpue7hueahOeUqOaIt+eUu+WDj+OAglwiLFxuICAgIH0pLmpzb24ocHJvbXB0KTtcblxuICAgIHJldHVybiB0aGlzLmV4dHJhY3RKc29uRnJvbVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnu4TlkIjmiYDmnInlk4HniYzotYTkuqfmlbDmja5cbiAgICovXG4gIHB1YmxpYyBhc3NlbWJsZUJyYW5kQXNzZXQoXG4gICAgYmFzaWNJbmZvOiBhbnksXG4gICAgcG9zaXRpb25pbmc6IGFueSxcbiAgICBleHByZXNzaW9uOiBhbnksXG4gICAgcGVyc29uYXM6IGFueVxuICApOiBhbnkge1xuICAgIHJldHVybiB7XG4gICAgICBicmFuZF9uYW1lOiBiYXNpY0luZm8uYnJhbmRfbmFtZSB8fCBcIuacquWRveWQjeWTgeeJjFwiLFxuICAgICAgYnJhbmRfYXNzZXRzOiB7XG4gICAgICAgIHRpdGxlOiBcIuWTgeeJjOi1hOS6p1wiLFxuICAgICAgICBkZXNjcmlwdGlvbjogYmFzaWNJbmZvLmJyYW5kX2Rlc2NyaXB0aW9uIHx8IFwi5ZOB54mM6LWE5Lqn5o+P6L+wXCIsXG4gICAgICAgIGJyYW5kX2ltYWdlOiB7XG4gICAgICAgICAgdGl0bGU6IFwi5ZOB54mM5b2i6LGhXCIsXG4gICAgICAgICAgZGVzY3JpcHRpb246IFwi5ZOB54mM5b2i6LGh5o+P6L+wXCIsXG4gICAgICAgICAgYnJhbmRfcG9zaXRpb25pbmc6IHBvc2l0aW9uaW5nLFxuICAgICAgICAgIGJyYW5kX2V4cHJlc3Npb246IGV4cHJlc3Npb24sXG4gICAgICAgIH0sXG4gICAgICAgIHVzZXJfcGVyc29uYXM6IHBlcnNvbmFzLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIOmqjOivgeW5tuS/ruWkjee8uuWkseWtl+autVxuICAgKi9cbiAgcHVibGljIGFzeW5jIHZhbGlkYXRlQW5kRml4TWlzc2luZ0ZpZWxkcyhcbiAgICBicmFuZEFzc2V0OiBhbnksXG4gICAgb3JpZ2luYWxDb250ZW50OiBzdHJpbmdcbiAgKTogUHJvbWlzZTxCcmFuZElucHV0RGF0YT4ge1xuICAgIGNvbnN0IG1pc3NpbmdGaWVsZHMgPSB0aGlzLmZpbmRNaXNzaW5nRmllbGRzKGJyYW5kQXNzZXQpO1xuXG4gICAgaWYgKG1pc3NpbmdGaWVsZHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5sb2coYOWPkeeOsCR7bWlzc2luZ0ZpZWxkcy5sZW5ndGh95Liq57y65aSx5a2X5q6177yM5q2j5Zyo6KGl5YWoLi4uYCk7XG5cbiAgICAgIGZvciAoY29uc3QgZmllbGQgb2YgbWlzc2luZ0ZpZWxkcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGZpeGVkVmFsdWUgPSBhd2FpdCB0aGlzLmdlbmVyYXRlTWlzc2luZ0ZpZWxkKFxuICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICBvcmlnaW5hbENvbnRlbnQsXG4gICAgICAgICAgICBicmFuZEFzc2V0LmJyYW5kX25hbWVcbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMuc2V0TmVzdGVkRmllbGQoYnJhbmRBc3NldCwgZmllbGQsIGZpeGVkVmFsdWUpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUud2Fybihg6KGl5YWo5a2X5q61JHtmaWVsZH3lpLHotKXvvIzkvb/nlKjpu5jorqTlgLw6YCwgZXJyb3IpO1xuICAgICAgICAgIHRoaXMuc2V0TmVzdGVkRmllbGQoXG4gICAgICAgICAgICBicmFuZEFzc2V0LFxuICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICB0aGlzLmdldERlZmF1bHRWYWx1ZUZvckZpZWxkKGZpZWxkKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYnJhbmRBc3NldCBhcyBCcmFuZElucHV0RGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmn6Xmib7nvLrlpLHnmoTlrZfmrrVcbiAgICovXG4gIHB1YmxpYyBmaW5kTWlzc2luZ0ZpZWxkcyhkYXRhOiBhbnkpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgcmVxdWlyZWRQYXRocyA9IFtcbiAgICAgIFwiYnJhbmRfbmFtZVwiLFxuICAgICAgXCJicmFuZF9hc3NldHMudGl0bGVcIixcbiAgICAgIFwiYnJhbmRfYXNzZXRzLmRlc2NyaXB0aW9uXCIsXG4gICAgICBcImJyYW5kX2Fzc2V0cy5icmFuZF9pbWFnZS50aXRsZVwiLFxuICAgICAgXCJicmFuZF9hc3NldHMuYnJhbmRfaW1hZ2UuZGVzY3JpcHRpb25cIixcbiAgICAgIFwiYnJhbmRfYXNzZXRzLmJyYW5kX2ltYWdlLmJyYW5kX3Bvc2l0aW9uaW5nLnRpdGxlXCIsXG4gICAgICBcImJyYW5kX2Fzc2V0cy5icmFuZF9pbWFnZS5icmFuZF9wb3NpdGlvbmluZy53ZV9iZWxpZXZlLnBvaW50c1wiLFxuICAgICAgXCJicmFuZF9hc3NldHMuYnJhbmRfaW1hZ2UuYnJhbmRfcG9zaXRpb25pbmcud2Vfb3Bwb3NlLnBvaW50c1wiLFxuICAgICAgXCJicmFuZF9hc3NldHMuYnJhbmRfaW1hZ2UuYnJhbmRfcG9zaXRpb25pbmcuYnJhbmRfbWlzc2lvbi5kZXNjcmlwdGlvblwiLFxuICAgICAgXCJicmFuZF9hc3NldHMuYnJhbmRfaW1hZ2UuYnJhbmRfZXhwcmVzc2lvbi5sYW5ndWFnZV9zdHlsZS5vcHRpb25zXCIsXG4gICAgICBcImJyYW5kX2Fzc2V0cy5icmFuZF9pbWFnZS5icmFuZF9leHByZXNzaW9uLmJyYW5kX3Nsb2dhbi5zbG9nYW5cIixcbiAgICAgIFwiYnJhbmRfYXNzZXRzLmJyYW5kX2ltYWdlLmJyYW5kX2V4cHJlc3Npb24uY29sb3Jfc3R5bGUucGFsZXR0ZXNcIixcbiAgICAgIFwiYnJhbmRfYXNzZXRzLnVzZXJfcGVyc29uYXMucGVyc29uYXNcIixcbiAgICBdO1xuXG4gICAgY29uc3QgbWlzc2luZzogc3RyaW5nW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgcGF0aCBvZiByZXF1aXJlZFBhdGhzKSB7XG4gICAgICBpZiAoIXRoaXMuZ2V0TmVzdGVkRmllbGQoZGF0YSwgcGF0aCkpIHtcbiAgICAgICAgbWlzc2luZy5wdXNoKHBhdGgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtaXNzaW5nO1xuICB9XG5cbiAgLyoqXG4gICAqIOeUn+aIkOe8uuWkseWtl+auteeahOWAvFxuICAgKi9cbiAgcHVibGljIGFzeW5jIGdlbmVyYXRlTWlzc2luZ0ZpZWxkKFxuICAgIGZpZWxkUGF0aDogc3RyaW5nLFxuICAgIGNvbnRlbnQ6IHN0cmluZyxcbiAgICBicmFuZE5hbWU6IHN0cmluZ1xuICApOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHByb21wdCA9IGDor7fkuLrlk4HniYxcIiR7YnJhbmROYW1lfVwi55Sf5oiQ57y65aSx55qE5a2X5q61XCIke2ZpZWxkUGF0aH1cIueahOWAvOOAglxuXG7lk4HniYzlhoXlrrnvvJoke2NvbnRlbnR9XG5cbuivt+agueaNruWtl+autei3r+W+hOi/lOWbnuWQiOmAgueahOWAvO+8jOagvOW8j+S4ukpTT07jgILlj6rov5Tlm57or6XlrZfmrrXnmoTlgLzvvIzkuI3opoHljIXoo4XlnKjlhbbku5bnu5PmnoTkuK3jgIJgO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBuZXcgTExNKHtcbiAgICAgIHN5c3RlbV9wcm9tcHQ6IFwi5L2g5piv5ZOB54mM5pWw5o2u6KGl5YWo5LiT5a6277yM6K+355Sf5oiQ57y65aSx5a2X5q6155qE5ZCI55CG5YC844CCXCIsXG4gICAgfSkuanNvbihwcm9tcHQpO1xuXG4gICAgcmV0dXJuIHRoaXMuZXh0cmFjdEpzb25Gcm9tUmVzcG9uc2UocmVzcG9uc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIOS7jkxMTeWTjeW6lOS4reaPkOWPlkpTT05cbiAgICovXG4gIHB1YmxpYyBleHRyYWN0SnNvbkZyb21SZXNwb25zZShyZXNwb25zZTogYW55KTogYW55IHtcbiAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTExN6LCD55So5aSx6LSlOiAke3Jlc3BvbnNlLmVycm9yfWApO1xuICAgIH1cblxuICAgIC8vIOWmguaenOWTjeW6lOWMheWQq3Jhd19jb250ZW5077yM5bCd6K+V5LuO5Lit5o+Q5Y+WSlNPTlxuICAgIGlmIChyZXNwb25zZS5yYXdfY29udGVudCkge1xuICAgICAgcmV0dXJuIHRoaXMuZXh0cmFjdEJyYW5kRGF0YUZyb21UZXh0KHJlc3BvbnNlLnJhd19jb250ZW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cblxuICAvKipcbiAgICog5LuO5paH5pys5Lit5o+Q5Y+W5ZOB54mM5pWw5o2uXG4gICAqL1xuICBwdWJsaWMgZXh0cmFjdEJyYW5kRGF0YUZyb21UZXh0KHRleHQ6IHN0cmluZyk6IGFueSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOWwneivleaPkOWPlkpTT05cbiAgICAgIGNvbnN0IGpzb25NYXRjaCA9IHRleHQubWF0Y2goL1xce1tcXHNcXFNdKlxcfS8pO1xuICAgICAgaWYgKGpzb25NYXRjaCkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uTWF0Y2hbMF0pO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwi5peg5rOV5LuO5ZON5bqU5Lit5o+Q5Y+W5pyJ5pWI55qESlNPTlwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSlNPTuino+aekOWksei0pTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwi5pyq55+l6ZSZ6K+vXCJ9YFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5bWM5aWX5a2X5q6155qE5YC8XG4gICAqL1xuICBwdWJsaWMgZ2V0TmVzdGVkRmllbGQob2JqOiBhbnksIHBhdGg6IHN0cmluZyk6IGFueSB7XG4gICAgY29uc3Qga2V5cyA9IHBhdGguc3BsaXQoXCIuXCIpO1xuICAgIGxldCBjdXJyZW50ID0gb2JqO1xuXG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgaWYgKCFjdXJyZW50IHx8IGN1cnJlbnRba2V5XSA9PT0gdW5kZWZpbmVkIHx8IGN1cnJlbnRba2V5XSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGN1cnJlbnQgPSBjdXJyZW50W2tleV07XG4gICAgfVxuXG4gICAgLy8g5qOA5p+l5pWw57uE5piv5ZCm5Li656m6XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY3VycmVudCkgJiYgY3VycmVudC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBjdXJyZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIOiuvue9ruW1jOWll+Wtl+auteeahOWAvFxuICAgKi9cbiAgcHVibGljIHNldE5lc3RlZEZpZWxkKG9iajogYW55LCBwYXRoOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBrZXlzID0gcGF0aC5zcGxpdChcIi5cIik7XG4gICAgbGV0IGN1cnJlbnQgPSBvYmo7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBjb25zdCBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYgKCFjdXJyZW50W2tleV0gfHwgdHlwZW9mIGN1cnJlbnRba2V5XSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICBjdXJyZW50W2tleV0gPSB7fTtcbiAgICAgIH1cbiAgICAgIGN1cnJlbnQgPSBjdXJyZW50W2tleV07XG4gICAgfVxuXG4gICAgY3VycmVudFtrZXlzW2tleXMubGVuZ3RoIC0gMV1dID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5a2X5q6155qE6buY6K6k5YC8XG4gICAqL1xuICBwdWJsaWMgZ2V0RGVmYXVsdFZhbHVlRm9yRmllbGQoZmllbGRQYXRoOiBzdHJpbmcpOiBhbnkge1xuICAgIGNvbnN0IGRlZmF1bHRzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge1xuICAgICAgYnJhbmRfbmFtZTogXCLmnKrlkb3lkI3lk4HniYxcIixcbiAgICAgIFwiYnJhbmRfYXNzZXRzLnRpdGxlXCI6IFwi5ZOB54mM6LWE5LqnXCIsXG4gICAgICBcImJyYW5kX2Fzc2V0cy5kZXNjcmlwdGlvblwiOiBcIuWTgeeJjOi1hOS6p+aPj+i/sFwiLFxuICAgICAgXCJicmFuZF9hc3NldHMuYnJhbmRfaW1hZ2UudGl0bGVcIjogXCLlk4HniYzlvaLosaFcIixcbiAgICAgIFwiYnJhbmRfYXNzZXRzLmJyYW5kX2ltYWdlLmRlc2NyaXB0aW9uXCI6IFwi5ZOB54mM5b2i6LGh5o+P6L+wXCIsXG4gICAgICBcImJyYW5kX2Fzc2V0cy5icmFuZF9pbWFnZS5icmFuZF9wb3NpdGlvbmluZy50aXRsZVwiOiBcIuWTgeeJjOWumuS9jVwiLFxuICAgICAgXCJicmFuZF9hc3NldHMuYnJhbmRfaW1hZ2UuYnJhbmRfcG9zaXRpb25pbmcud2VfYmVsaWV2ZS5wb2ludHNcIjogW1xuICAgICAgICBcIuWIm+aWsOmpseWKqOS7t+WAvFwiLFxuICAgICAgICBcIueUqOaIt+S9k+mqjOiHs+S4ilwiLFxuICAgICAgXSxcbiAgICAgIFwiYnJhbmRfYXNzZXRzLmJyYW5kX2ltYWdlLmJyYW5kX3Bvc2l0aW9uaW5nLndlX29wcG9zZS5wb2ludHNcIjogW1xuICAgICAgICBcIuS9jui0qOmHj+S6p+WTgVwiLFxuICAgICAgICBcIuiZmuWBh+Wuo+S8oFwiLFxuICAgICAgXSxcbiAgICAgIFwiYnJhbmRfYXNzZXRzLmJyYW5kX2ltYWdlLmJyYW5kX3Bvc2l0aW9uaW5nLmJyYW5kX21pc3Npb24uZGVzY3JpcHRpb25cIjpcbiAgICAgICAgXCLkuLrnlKjmiLfliJvpgKDku7flgLxcIixcbiAgICAgIFwiYnJhbmRfYXNzZXRzLmJyYW5kX2ltYWdlLmJyYW5kX2V4cHJlc3Npb24ubGFuZ3VhZ2Vfc3R5bGUub3B0aW9uc1wiOiBbXG4gICAgICAgIFwi5LiT5LiaXCIsXG4gICAgICAgIFwi5Y+L5aW9XCIsXG4gICAgICBdLFxuICAgICAgXCJicmFuZF9hc3NldHMuYnJhbmRfaW1hZ2UuYnJhbmRfZXhwcmVzc2lvbi5icmFuZF9zbG9nYW4uc2xvZ2FuXCI6XG4gICAgICAgIFwi5Yib5paw5byV6aKG5pyq5p2lXCIsXG4gICAgICBcImJyYW5kX2Fzc2V0cy5icmFuZF9pbWFnZS5icmFuZF9leHByZXNzaW9uLmNvbG9yX3N0eWxlLnBhbGV0dGVzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6IFwi5Li76Imy6LCDXCIsXG4gICAgICAgICAgcHJpbWFyeV9jb2xvcjogXCIjMjU2M2ViXCIsXG4gICAgICAgICAgc2Vjb25kYXJ5X2NvbG9yOiBcIiM2NDc0OGJcIixcbiAgICAgICAgICBiYWNrZ3JvdW5kX2NvbG9yOiBcIiNmZmZmZmZcIixcbiAgICAgICAgICBzZWNvbmRhcnlfYmFja2dyb3VuZF9jb2xvcjogXCIjZjhmYWZjXCIsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgXCJicmFuZF9hc3NldHMudXNlcl9wZXJzb25hcy5wZXJzb25hc1wiOiBbdGhpcy5nZXREZWZhdWx0UGVyc29uYSgpXSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRlZmF1bHRzW2ZpZWxkUGF0aF0gfHwgXCLpu5jorqTlgLxcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bpu5jorqTnlKjmiLfnlLvlg49cbiAgICovXG4gIHB1YmxpYyBnZXREZWZhdWx0UGVyc29uYSgpOiBhbnkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogXCJwZXJzb25hXzFcIixcbiAgICAgIHRpdGxlOiBcIuebruagh+eUqOaIt1wiLFxuICAgICAgYXZhdGFyOiBcIueUqOaIt+WktOWDj+WNoOS9jeesplwiLFxuICAgICAgbmFtZTogXCLlhbjlnovnlKjmiLdcIixcbiAgICAgIGFnZV9nZW5kZXI6IFwiMjUtMzXlsoHvvIznlLflpbPkuI3pmZBcIixcbiAgICAgIHBlcmNlbnRhZ2VfaW5fZ3JvdXA6IFwiNjAlXCIsXG4gICAgICBkZXNjcmlwdGlvbjogXCLlr7nlk4HotKjmnInopoHmsYLnmoTmtojotLnogIVcIixcbiAgICAgIHBhaW5fcG9pbnRzOiBbXCLkuqflk4HotKjph4/kuI3nqLPlrppcIiwgXCLmnI3liqHlk43lupTmhaJcIiwgXCLku7fmoLzkuI3pgI/mmI5cIl0sXG4gICAgICB1c2VyX2NoYXJhY3RlcmlzdGljczogW1xuICAgICAgICB7XG4gICAgICAgICAga2V5d29yZDogXCLlk4HotKjlr7zlkJFcIixcbiAgICAgICAgICBwZXJjZW50YWdlOiA4NSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGtleXdvcmQ6IFwi5Lu35qC85pWP5oSfXCIsXG4gICAgICAgICAgcGVyY2VudGFnZTogNzAsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgdXNlcl9zY2VuYXJpb3M6IFtcIuaXpeW4uOS9v+eUqFwiLCBcIueJueauiumcgOaxglwiXSxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICog5L6/5o235Ye95pWw77ya5LuO6ZW/5paH5pys55Sf5oiQ5ZOB54mM6LWE5LqnXG4gKiBAcGFyYW0gY29udGVudCDljIXlkKvlk4HniYzkv6Hmga/nmoTplb/mlofmnKxcbiAqIEByZXR1cm5zIOe7k+aehOWMlueahOWTgeeJjOi1hOS6p+aVsOaNrlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVCcmFuZEFzc2V0KFxuICBjb250ZW50OiBzdHJpbmdcbik6IFByb21pc2U8QnJhbmRJbnB1dERhdGE+IHtcbiAgY29uc3QgZ2VuZXJhdG9yID0gbmV3IEJyYW5kQXNzZXRHZW5lcmF0b3IoKTtcbiAgcmV0dXJuIGF3YWl0IGdlbmVyYXRvci5nZW5lcmF0ZUJyYW5kQXNzZXQoY29udGVudCk7XG59XG4iXSwibmFtZXMiOlsiTExNIiwiQnJhbmRBc3NldEdlbmVyYXRvciIsImdlbmVyYXRlQnJhbmRBc3NldCIsImNvbnRlbnQiLCJjb25zb2xlIiwibG9nIiwiYmFzaWNJbmZvIiwiZ2VuZXJhdGVCYXNpY0JyYW5kSW5mbyIsInBvc2l0aW9uaW5nIiwiZ2VuZXJhdGVCcmFuZFBvc2l0aW9uaW5nIiwiYnJhbmRfbmFtZSIsImV4cHJlc3Npb24iLCJnZW5lcmF0ZUJyYW5kRXhwcmVzc2lvbiIsInBlcnNvbmFzIiwiZ2VuZXJhdGVVc2VyUGVyc29uYXMiLCJicmFuZEFzc2V0IiwiYXNzZW1ibGVCcmFuZEFzc2V0IiwidmFsaWRhdGVkRGF0YSIsInZhbGlkYXRlQW5kRml4TWlzc2luZ0ZpZWxkcyIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwiYXNzZW1ibGVBc3NldCIsInZhbGlkYXRlQXNzZXQiLCJvcmlnaW5hbENvbnRlbnQiLCJwcm9tcHQiLCJyZXNwb25zZSIsInRlbXBlcmF0dXJlIiwic3lzdGVtX3Byb21wdCIsImpzb24iLCJleHRyYWN0SnNvbkZyb21SZXNwb25zZSIsImJyYW5kTmFtZSIsImJyYW5kX2Fzc2V0cyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJicmFuZF9kZXNjcmlwdGlvbiIsImJyYW5kX2ltYWdlIiwiYnJhbmRfcG9zaXRpb25pbmciLCJicmFuZF9leHByZXNzaW9uIiwidXNlcl9wZXJzb25hcyIsIm1pc3NpbmdGaWVsZHMiLCJmaW5kTWlzc2luZ0ZpZWxkcyIsImxlbmd0aCIsImZpZWxkIiwiZml4ZWRWYWx1ZSIsImdlbmVyYXRlTWlzc2luZ0ZpZWxkIiwic2V0TmVzdGVkRmllbGQiLCJ3YXJuIiwiZ2V0RGVmYXVsdFZhbHVlRm9yRmllbGQiLCJkYXRhIiwicmVxdWlyZWRQYXRocyIsIm1pc3NpbmciLCJwYXRoIiwiZ2V0TmVzdGVkRmllbGQiLCJwdXNoIiwiZmllbGRQYXRoIiwicmF3X2NvbnRlbnQiLCJleHRyYWN0QnJhbmREYXRhRnJvbVRleHQiLCJ0ZXh0IiwianNvbk1hdGNoIiwibWF0Y2giLCJKU09OIiwicGFyc2UiLCJvYmoiLCJrZXlzIiwic3BsaXQiLCJjdXJyZW50Iiwia2V5IiwidW5kZWZpbmVkIiwiQXJyYXkiLCJpc0FycmF5IiwidmFsdWUiLCJpIiwiZGVmYXVsdHMiLCJuYW1lIiwicHJpbWFyeV9jb2xvciIsInNlY29uZGFyeV9jb2xvciIsImJhY2tncm91bmRfY29sb3IiLCJzZWNvbmRhcnlfYmFja2dyb3VuZF9jb2xvciIsImdldERlZmF1bHRQZXJzb25hIiwiaWQiLCJhdmF0YXIiLCJhZ2VfZ2VuZGVyIiwicGVyY2VudGFnZV9pbl9ncm91cCIsInBhaW5fcG9pbnRzIiwidXNlcl9jaGFyYWN0ZXJpc3RpY3MiLCJrZXl3b3JkIiwicGVyY2VudGFnZSIsInVzZXJfc2NlbmFyaW9zIiwiZ2VuZXJhdG9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/services/core/BrandAssetGenerator.ts\n");

/***/ }),

/***/ "(rsc)/./app/services/core/BrandZCalculator.ts":
/*!***********************************************!*\
  !*** ./app/services/core/BrandZCalculator.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BRANDZ_COMPONENT_WEIGHTS: () => (/* binding */ BRANDZ_COMPONENT_WEIGHTS),\n/* harmony export */   BRANDZ_CONTRIBUTION_COMPONENT_WEIGHTS: () => (/* binding */ BRANDZ_CONTRIBUTION_COMPONENT_WEIGHTS),\n/* harmony export */   BRANDZ_WEIGHTS: () => (/* binding */ BRANDZ_WEIGHTS),\n/* harmony export */   BrandZCalculator: () => (/* binding */ BrandZCalculator)\n/* harmony export */ });\n/* harmony import */ var _ConsistencyEvaluator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConsistencyEvaluator */ \"(rsc)/./app/services/core/ConsistencyEvaluator.ts\");\n/* harmony import */ var _ConsistencyAnalyzer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConsistencyAnalyzer */ \"(rsc)/./app/services/core/ConsistencyAnalyzer.ts\");\n/**\n * BrandZ计算器\n * 基于凯度BrandZ模型的品牌价值计算\n */ \n\nconst BRANDZ_WEIGHTS = {\n    FINANCIAL_VALUE: 0.4,\n    BRAND_CONTRIBUTION: 0.6\n};\nconst BRANDZ_COMPONENT_WEIGHTS = {\n    REVENUE_PERFORMANCE: 0.5,\n    ASSET_EFFICIENCY: 0.3,\n    BRAND_MULTIPLE: 0.2\n};\nconst BRANDZ_CONTRIBUTION_COMPONENT_WEIGHTS = {\n    MEANINGFUL: 0.25,\n    DIFFERENT: 0.25,\n    SALIENT: 0.25,\n    CONSISTENCY: 0.25\n};\nclass BrandZCalculator {\n    /**\n   * 综合品牌评估\n   */ async evaluateBrandZ(brandData) {\n        // 1. 品牌一致性评估\n        const consistencyResult = await this.evaluateConsistency(brandData);\n        // 2. BrandZ价值评估\n        const brandzResult = await this.evaluateBrandZValue(brandData, consistencyResult.total_score);\n        // 3. 生成综合报告\n        return this.generateComprehensiveReport(brandData, consistencyResult, brandzResult);\n    }\n    /**\n   * 公共方法：品牌一致性评估\n   */ async evaluateConsistencyPublic(brandData) {\n        return this.evaluateConsistency(brandData);\n    }\n    /**\n   * 公共方法：财务价值评估\n   */ evaluateFinancialValuePublic(brandData) {\n        return this.evaluateFinancialValue(brandData);\n    }\n    /**\n   * 公共方法：MDS分数评估\n   */ evaluateMDSScoresPublic(brandData) {\n        return this.evaluateMDSScores(brandData);\n    }\n    /**\n   * 评估品牌一致性（使用新的分析器和评估器）\n   */ async evaluateConsistency(brandData) {\n        const contentAnalyzer = new _ConsistencyAnalyzer__WEBPACK_IMPORTED_MODULE_1__.BrandContentAnalyzer();\n        const consistencyEvaluator = new _ConsistencyEvaluator__WEBPACK_IMPORTED_MODULE_0__.BrandConsistencyEvaluator();\n        // 1. 分析品牌内容\n        const analysisResult = await contentAnalyzer.analyzeBrandConsistency(brandData);\n        // 2. 评估一致性\n        const consistencyResult = await consistencyEvaluator.evaluateBrandHouse(analysisResult.metrics, analysisResult.report);\n        return consistencyResult;\n    }\n    /**\n   * 评估BrandZ价值\n   */ async evaluateBrandZValue(brandData, consistencyScore) {\n        const result = {\n            financial_value_score: 0,\n            revenue_performance: 0,\n            asset_efficiency: 0,\n            brand_multiple: 1.0,\n            brand_contribution_score: 0,\n            meaningful_score: 0,\n            different_score: 0,\n            salient_score: 0,\n            consistency_score: 0,\n            brandz_value: 0,\n            brand_grade: \"\"\n        };\n        // 1. 评估财务价值\n        const financialScores = this.evaluateFinancialValue(brandData);\n        result.revenue_performance = financialScores.revenue_performance;\n        result.asset_efficiency = financialScores.asset_efficiency;\n        result.brand_multiple = financialScores.brand_multiple;\n        result.financial_value_score = result.revenue_performance * BRANDZ_COMPONENT_WEIGHTS.REVENUE_PERFORMANCE + result.asset_efficiency * BRANDZ_COMPONENT_WEIGHTS.ASSET_EFFICIENCY + Math.min(result.brand_multiple * 20, 100) * BRANDZ_COMPONENT_WEIGHTS.BRAND_MULTIPLE;\n        // 2. 评估品牌贡献\n        const mdsScores = this.evaluateMDSScores(brandData);\n        result.meaningful_score = mdsScores.meaningful;\n        result.different_score = mdsScores.different;\n        result.salient_score = mdsScores.salient;\n        result.consistency_score = consistencyScore;\n        result.brand_contribution_score = result.meaningful_score * BRANDZ_CONTRIBUTION_COMPONENT_WEIGHTS.MEANINGFUL + result.different_score * BRANDZ_CONTRIBUTION_COMPONENT_WEIGHTS.DIFFERENT + result.salient_score * BRANDZ_CONTRIBUTION_COMPONENT_WEIGHTS.SALIENT + result.consistency_score * BRANDZ_CONTRIBUTION_COMPONENT_WEIGHTS.CONSISTENCY;\n        // 3. 计算BrandZ价值\n        const baseScore = result.financial_value_score * BRANDZ_WEIGHTS.FINANCIAL_VALUE + result.brand_contribution_score * BRANDZ_WEIGHTS.BRAND_CONTRIBUTION;\n        const multiplierFactor = result.brand_multiple / 2.5;\n        result.brandz_value = baseScore * multiplierFactor;\n        // 4. 确定品牌等级\n        result.brand_grade = this.getBrandGrade(result.brandz_value);\n        // 5. 生成评估详情\n        result.evaluation_details = this.generateEvaluationDetails(result, financialScores, mdsScores);\n        result.improvement_suggestions = this.generateImprovementSuggestions(brandData, result);\n        return result;\n    }\n    /**\n   * 评估财务价值\n   */ evaluateFinancialValue(brandData) {\n        // 简化的财务评估，基于品牌资产信息\n        const positioning = brandData.brand_assets.brand_image.brand_positioning;\n        const mission = positioning.brand_mission.description;\n        const value = positioning.description;\n        let revenuePerformance = 70;\n        let assetEfficiency = 70;\n        let brandMultiple = 2.0;\n        // 基于定位评估收益表现\n        if (positioning.description.includes(\"领导\") || positioning.description.includes(\"领先\")) {\n            revenuePerformance += 20;\n        }\n        // 基于使命评估资产效率\n        if (mission.includes(\"专业\") || mission.includes(\"品质\")) {\n            assetEfficiency += 20;\n        }\n        // 基于价值主张评估品牌倍数\n        if (value.includes(\"独特\") || value.includes(\"创新\")) {\n            brandMultiple += 0.5;\n        }\n        return {\n            revenue_performance: Math.min(100, revenuePerformance),\n            asset_efficiency: Math.min(100, assetEfficiency),\n            brand_multiple: Math.min(5.0, Math.max(1.0, brandMultiple))\n        };\n    }\n    /**\n   * 评估MDS分数\n   */ evaluateMDSScores(brandData) {\n        const positioning = brandData.brand_assets.brand_image.brand_positioning;\n        const expression = brandData.brand_assets.brand_image.brand_expression;\n        let meaningful = 70;\n        let different = 70;\n        let salient = 70;\n        // 评估有意义度\n        if (positioning.brand_mission.description.includes(\"价值\") || positioning.brand_mission.description.includes(\"意义\")) {\n            meaningful += 20;\n        }\n        // 评估差异化度\n        if (positioning.description.includes(\"独特\") || positioning.description.includes(\"创新\")) {\n            different += 20;\n        }\n        // 评估显著度\n        if (expression.brand_slogan.slogan || expression.tone.description) {\n            salient += 20;\n        }\n        return {\n            meaningful: Math.min(100, meaningful),\n            different: Math.min(100, different),\n            salient: Math.min(100, salient)\n        };\n    }\n    /**\n   * 生成综合报告\n   */ generateComprehensiveReport(brandData, consistencyResult, brandzResult) {\n        const now = new Date();\n        return {\n            brand_name: brandData.brand_name,\n            evaluation_date: now.toISOString(),\n            methodology: \"Kantar BrandZ Model + Brand Consistency Analysis (TypeScript v1.0)\",\n            consistency_evaluation: consistencyResult,\n            brandz_evaluation: brandzResult,\n            analysis_reports: {\n                consistency_report: consistencyResult.analysis_report,\n                financial_report: this.generateFinancialReport(brandData, brandzResult),\n                mds_report: this.generateMDSReport(brandData, brandzResult)\n            },\n            evaluation_summary: {\n                consistency_grade: consistencyResult.grade,\n                brandz_grade: brandzResult.brand_grade,\n                overall_performance_summary: this.generateOverallSummary(brandData, consistencyResult, brandzResult)\n            }\n        };\n    }\n    /**\n   * 生成财务报告\n   */ generateFinancialReport(brandData, result) {\n        return `\n财务价值分析报告\n\n品牌名称: ${brandData.brand_name}\n\n1. 收益表现: ${result.revenue_performance}/100\n   - 评估: ${result.revenue_performance > 80 ? \"优秀\" : result.revenue_performance > 60 ? \"良好\" : \"需要改进\"}\n   - 建议: 提升市场竞争力，扩大市场份额\n\n2. 资产效率: ${result.asset_efficiency}/100\n   - 评估: ${result.asset_efficiency > 80 ? \"优秀\" : result.asset_efficiency > 60 ? \"良好\" : \"需要改进\"}\n   - 建议: 优化资源配置，提高运营效率\n\n3. 品牌倍数: ${result.brand_multiple}\n   - 评估: ${result.brand_multiple > 3.0 ? \"优秀\" : result.brand_multiple > 2.0 ? \"良好\" : \"需要改进\"}\n   - 建议: 增强品牌影响力，提升品牌溢价能力\n\n财务价值总分: ${result.financial_value_score}/100\n`;\n    }\n    /**\n   * 生成MDS报告\n   */ generateMDSReport(brandData, result) {\n        return `\n品牌贡献分析报告 (MDS模型)\n\n品牌名称: ${brandData.brand_name}\n\n1. 有意义度 (Meaningful): ${result.meaningful_score}/100\n   - 评估: ${result.meaningful_score > 80 ? \"优秀\" : result.meaningful_score > 60 ? \"良好\" : \"需要改进\"}\n   - 建议: 强化品牌价值主张，提升品牌意义\n\n2. 差异化度 (Different): ${result.different_score}/100\n   - 评估: ${result.different_score > 80 ? \"优秀\" : result.different_score > 60 ? \"良好\" : \"需要改进\"}\n   - 建议: 突出品牌独特性，建立差异化优势\n\n3. 显著度 (Salient): ${result.salient_score}/100\n   - 评估: ${result.salient_score > 80 ? \"优秀\" : result.salient_score > 60 ? \"良好\" : \"需要改进\"}\n   - 建议: 提升品牌知名度，增强品牌记忆点\n\n4. 一致性 (Consistency): ${result.consistency_score}/100\n   - 评估: ${result.consistency_score > 80 ? \"优秀\" : result.consistency_score > 60 ? \"良好\" : \"需要改进\"}\n   - 建议: 保持品牌表达一致性，强化品牌识别\n\n品牌贡献总分: ${result.brand_contribution_score}/100\n`;\n    }\n    /**\n   * 生成总体总结\n   */ generateOverallSummary(brandData, consistencyResult, brandzResult) {\n        const overallScore = (consistencyResult.total_score + brandzResult.brandz_value) / 2;\n        const overallGrade = this.getBrandGrade(overallScore);\n        return `\n品牌综合评估总结\n\n品牌名称: ${brandData.brand_name}\n\n总体评分: ${overallScore.toFixed(1)}/100\n品牌等级: ${overallGrade}\n\n优势分析:\n- 品牌一致性: ${consistencyResult.total_score > 70 ? \"良好\" : \"需要改进\"}\n- 品牌价值: ${brandzResult.brandz_value > 70 ? \"良好\" : \"需要改进\"}\n\n改进建议:\n1. 持续优化品牌定位与表达的一致性\n2. 提升品牌在目标用户中的认知度和美誉度\n3. 加强品牌差异化建设，突出核心竞争优势\n4. 完善品牌传播体系，提升品牌影响力\n\n发展前景: ${overallScore > 70 ? \"良好\" : overallScore > 50 ? \"需要重点关注\" : \"需要重点关注\"}\n`;\n    }\n    /**\n   * 生成评估详情\n   */ generateEvaluationDetails(result, financialScores, mdsScores) {\n        return {\n            financial_breakdown: financialScores,\n            mds_breakdown: mdsScores,\n            brandz_calculation: {\n                financial_weight: BRANDZ_WEIGHTS.FINANCIAL_VALUE,\n                brand_contribution_weight: BRANDZ_WEIGHTS.BRAND_CONTRIBUTION,\n                final_score: result.brandz_value\n            }\n        };\n    }\n    /**\n   * 生成改进建议\n   */ generateImprovementSuggestions(brandData, result) {\n        const suggestions = [];\n        if (result.financial_value_score < 70) {\n            suggestions.push(\"提升财务表现，优化资源配置\");\n        }\n        if (result.brand_contribution_score < 70) {\n            suggestions.push(\"加强品牌建设，提升品牌影响力\");\n        }\n        if (result.consistency_score < 70) {\n            suggestions.push(\"保持品牌表达一致性，强化品牌识别\");\n        }\n        return suggestions.length > 0 ? suggestions.join(\"；\") : \"建议继续优化品牌建设\";\n    }\n    /**\n   * 获取等级\n   */ getGrade(score) {\n        if (score >= 90) return \"A+\";\n        if (score >= 85) return \"A\";\n        if (score >= 80) return \"A-\";\n        if (score >= 75) return \"B+\";\n        if (score >= 70) return \"B\";\n        if (score >= 65) return \"B-\";\n        if (score >= 60) return \"C+\";\n        if (score >= 55) return \"C\";\n        if (score >= 50) return \"C-\";\n        return \"D级\";\n    }\n    /**\n   * 获取品牌等级\n   */ getBrandGrade(brandzValue) {\n        if (brandzValue >= 90) return \"A级\";\n        if (brandzValue >= 80) return \"B级\";\n        if (brandzValue >= 70) return \"C级\";\n        if (brandzValue >= 60) return \"D级\";\n        return \"E级\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvc2VydmljZXMvY29yZS9CcmFuZFpDYWxjdWxhdG9yLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOzs7Q0FHQyxHQVFrRTtBQUNOO0FBRXRELE1BQU1FLGlCQUFpQjtJQUM1QkMsaUJBQWlCO0lBQ2pCQyxvQkFBb0I7QUFDdEIsRUFBRTtBQUNLLE1BQU1DLDJCQUEyQjtJQUN0Q0MscUJBQXFCO0lBQ3JCQyxrQkFBa0I7SUFDbEJDLGdCQUFnQjtBQUNsQixFQUFFO0FBRUssTUFBTUMsd0NBQXdDO0lBQ25EQyxZQUFZO0lBQ1pDLFdBQVc7SUFDWEMsU0FBUztJQUNUQyxhQUFhO0FBQ2YsRUFBRTtBQUVLLE1BQU1DO0lBQ1g7O0dBRUMsR0FDRCxNQUFNQyxlQUNKQyxTQUF5QixFQUNLO1FBQzlCLGFBQWE7UUFDYixNQUFNQyxvQkFBb0IsTUFBTSxJQUFJLENBQUNDLG1CQUFtQixDQUFDRjtRQUV6RCxnQkFBZ0I7UUFDaEIsTUFBTUcsZUFBZSxNQUFNLElBQUksQ0FBQ0MsbUJBQW1CLENBQ2pESixXQUNBQyxrQkFBa0JJLFdBQVc7UUFHL0IsWUFBWTtRQUNaLE9BQU8sSUFBSSxDQUFDQywyQkFBMkIsQ0FDckNOLFdBQ0FDLG1CQUNBRTtJQUVKO0lBRUE7O0dBRUMsR0FDRCxNQUFNSSwwQkFDSlAsU0FBeUIsRUFDRztRQUM1QixPQUFPLElBQUksQ0FBQ0UsbUJBQW1CLENBQUNGO0lBQ2xDO0lBRUE7O0dBRUMsR0FDRFEsNkJBQTZCUixTQUF5QixFQUlwRDtRQUNBLE9BQU8sSUFBSSxDQUFDUyxzQkFBc0IsQ0FBQ1Q7SUFDckM7SUFFQTs7R0FFQyxHQUNEVSx3QkFBd0JWLFNBQXlCLEVBSS9DO1FBQ0EsT0FBTyxJQUFJLENBQUNXLGlCQUFpQixDQUFDWDtJQUNoQztJQUVBOztHQUVDLEdBQ0QsTUFBYUUsb0JBQ1hGLFNBQXlCLEVBQ0c7UUFDNUIsTUFBTVksa0JBQWtCLElBQUkzQixzRUFBb0JBO1FBQ2hELE1BQU00Qix1QkFBdUIsSUFBSTdC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TztRQUN4QixJQUFJQSxTQUFTLElBQUksT0FBTztRQUN4QixJQUFJQSxTQUFTLElBQUksT0FBTztRQUN4QixJQUFJQSxTQUFTLElBQUksT0FBTztRQUN4QixJQUFJQSxTQUFTLElBQUksT0FBTztRQUN4QixJQUFJQSxTQUFTLElBQUksT0FBTztRQUN4QixJQUFJQSxTQUFTLElBQUksT0FBTztRQUN4QixPQUFPO0lBQ1Q7SUFFQTs7R0FFQyxHQUNELGNBQXFCQyxXQUFtQixFQUFVO1FBQ2hELElBQUlBLGVBQWUsSUFBSSxPQUFPO1FBQzlCLElBQUlBLGVBQWUsSUFBSSxPQUFPO1FBQzlCLElBQUlBLGVBQWUsSUFBSSxPQUFPO1FBQzlCLElBQUlBLGVBQWUsSUFBSSxPQUFPO1FBQzlCLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvd2FuZ2VuaXVzL0RvY3VtZW50cy90d2lua2xlL3R5cGVzY3JpcHQtYnJhbmR2YWx1ZS9hcHAvc2VydmljZXMvY29yZS9CcmFuZFpDYWxjdWxhdG9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQnJhbmRa6K6h566X5ZmoXG4gKiDln7rkuo7lh6/luqZCcmFuZFrmqKHlnovnmoTlk4HniYzku7flgLzorqHnrpdcbiAqL1xuXG5pbXBvcnQgeyBCcmFuZElucHV0RGF0YSB9IGZyb20gXCIuLi90eXBlcy9CcmFuZEFzc2V0XCI7XG5pbXBvcnQge1xuICBCcmFuZFpFdmFsdWF0aW9uUmVzdWx0LFxuICBDb25zaXN0ZW5jeVJlc3VsdCxcbiAgQ29tcHJlaGVuc2l2ZVJlcG9ydCxcbn0gZnJvbSBcIi4uL3R5cGVzL0V2YWx1YXRpb25SZXN1bHRcIjtcbmltcG9ydCB7IEJyYW5kQ29uc2lzdGVuY3lFdmFsdWF0b3IgfSBmcm9tIFwiLi9Db25zaXN0ZW5jeUV2YWx1YXRvclwiO1xuaW1wb3J0IHsgQnJhbmRDb250ZW50QW5hbHl6ZXIgfSBmcm9tIFwiLi9Db25zaXN0ZW5jeUFuYWx5emVyXCI7XG5cbmV4cG9ydCBjb25zdCBCUkFORFpfV0VJR0hUUyA9IHtcbiAgRklOQU5DSUFMX1ZBTFVFOiAwLjQsXG4gIEJSQU5EX0NPTlRSSUJVVElPTjogMC42LFxufTtcbmV4cG9ydCBjb25zdCBCUkFORFpfQ09NUE9ORU5UX1dFSUdIVFMgPSB7XG4gIFJFVkVOVUVfUEVSRk9STUFOQ0U6IDAuNSxcbiAgQVNTRVRfRUZGSUNJRU5DWTogMC4zLFxuICBCUkFORF9NVUxUSVBMRTogMC4yLFxufTtcblxuZXhwb3J0IGNvbnN0IEJSQU5EWl9DT05UUklCVVRJT05fQ09NUE9ORU5UX1dFSUdIVFMgPSB7XG4gIE1FQU5JTkdGVUw6IDAuMjUsXG4gIERJRkZFUkVOVDogMC4yNSxcbiAgU0FMSUVOVDogMC4yNSxcbiAgQ09OU0lTVEVOQ1k6IDAuMjUsXG59O1xuXG5leHBvcnQgY2xhc3MgQnJhbmRaQ2FsY3VsYXRvciB7XG4gIC8qKlxuICAgKiDnu7zlkIjlk4HniYzor4TkvLBcbiAgICovXG4gIGFzeW5jIGV2YWx1YXRlQnJhbmRaKFxuICAgIGJyYW5kRGF0YTogQnJhbmRJbnB1dERhdGFcbiAgKTogUHJvbWlzZTxDb21wcmVoZW5zaXZlUmVwb3J0PiB7XG4gICAgLy8gMS4g5ZOB54mM5LiA6Ie05oCn6K+E5LywXG4gICAgY29uc3QgY29uc2lzdGVuY3lSZXN1bHQgPSBhd2FpdCB0aGlzLmV2YWx1YXRlQ29uc2lzdGVuY3koYnJhbmREYXRhKTtcblxuICAgIC8vIDIuIEJyYW5kWuS7t+WAvOivhOS8sFxuICAgIGNvbnN0IGJyYW5kelJlc3VsdCA9IGF3YWl0IHRoaXMuZXZhbHVhdGVCcmFuZFpWYWx1ZShcbiAgICAgIGJyYW5kRGF0YSxcbiAgICAgIGNvbnNpc3RlbmN5UmVzdWx0LnRvdGFsX3Njb3JlXG4gICAgKTtcblxuICAgIC8vIDMuIOeUn+aIkOe7vOWQiOaKpeWRilxuICAgIHJldHVybiB0aGlzLmdlbmVyYXRlQ29tcHJlaGVuc2l2ZVJlcG9ydChcbiAgICAgIGJyYW5kRGF0YSxcbiAgICAgIGNvbnNpc3RlbmN5UmVzdWx0LFxuICAgICAgYnJhbmR6UmVzdWx0XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlhazlhbHmlrnms5XvvJrlk4HniYzkuIDoh7TmgKfor4TkvLBcbiAgICovXG4gIGFzeW5jIGV2YWx1YXRlQ29uc2lzdGVuY3lQdWJsaWMoXG4gICAgYnJhbmREYXRhOiBCcmFuZElucHV0RGF0YVxuICApOiBQcm9taXNlPENvbnNpc3RlbmN5UmVzdWx0PiB7XG4gICAgcmV0dXJuIHRoaXMuZXZhbHVhdGVDb25zaXN0ZW5jeShicmFuZERhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWFrOWFseaWueazle+8mui0ouWKoeS7t+WAvOivhOS8sFxuICAgKi9cbiAgZXZhbHVhdGVGaW5hbmNpYWxWYWx1ZVB1YmxpYyhicmFuZERhdGE6IEJyYW5kSW5wdXREYXRhKToge1xuICAgIHJldmVudWVfcGVyZm9ybWFuY2U6IG51bWJlcjtcbiAgICBhc3NldF9lZmZpY2llbmN5OiBudW1iZXI7XG4gICAgYnJhbmRfbXVsdGlwbGU6IG51bWJlcjtcbiAgfSB7XG4gICAgcmV0dXJuIHRoaXMuZXZhbHVhdGVGaW5hbmNpYWxWYWx1ZShicmFuZERhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWFrOWFseaWueazle+8mk1EU+WIhuaVsOivhOS8sFxuICAgKi9cbiAgZXZhbHVhdGVNRFNTY29yZXNQdWJsaWMoYnJhbmREYXRhOiBCcmFuZElucHV0RGF0YSk6IHtcbiAgICBtZWFuaW5nZnVsOiBudW1iZXI7XG4gICAgZGlmZmVyZW50OiBudW1iZXI7XG4gICAgc2FsaWVudDogbnVtYmVyO1xuICB9IHtcbiAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZU1EU1Njb3JlcyhicmFuZERhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIOivhOS8sOWTgeeJjOS4gOiHtOaAp++8iOS9v+eUqOaWsOeahOWIhuaekOWZqOWSjOivhOS8sOWZqO+8iVxuICAgKi9cbiAgcHVibGljIGFzeW5jIGV2YWx1YXRlQ29uc2lzdGVuY3koXG4gICAgYnJhbmREYXRhOiBCcmFuZElucHV0RGF0YVxuICApOiBQcm9taXNlPENvbnNpc3RlbmN5UmVzdWx0PiB7XG4gICAgY29uc3QgY29udGVudEFuYWx5emVyID0gbmV3IEJyYW5kQ29udGVudEFuYWx5emVyKCk7XG4gICAgY29uc3QgY29uc2lzdGVuY3lFdmFsdWF0b3IgPSBuZXcgQnJhbmRDb25zaXN0ZW5jeUV2YWx1YXRvcigpO1xuXG4gICAgLy8gMS4g5YiG5p6Q5ZOB54mM5YaF5a65XG4gICAgY29uc3QgYW5hbHlzaXNSZXN1bHQgPSBhd2FpdCBjb250ZW50QW5hbHl6ZXIuYW5hbHl6ZUJyYW5kQ29uc2lzdGVuY3koXG4gICAgICBicmFuZERhdGFcbiAgICApO1xuXG4gICAgLy8gMi4g6K+E5Lyw5LiA6Ie05oCnXG4gICAgY29uc3QgY29uc2lzdGVuY3lSZXN1bHQgPSBhd2FpdCBjb25zaXN0ZW5jeUV2YWx1YXRvci5ldmFsdWF0ZUJyYW5kSG91c2UoXG4gICAgICBhbmFseXNpc1Jlc3VsdC5tZXRyaWNzLFxuICAgICAgYW5hbHlzaXNSZXN1bHQucmVwb3J0XG4gICAgKTtcblxuICAgIHJldHVybiBjb25zaXN0ZW5jeVJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiDor4TkvLBCcmFuZFrku7flgLxcbiAgICovXG4gIHB1YmxpYyBhc3luYyBldmFsdWF0ZUJyYW5kWlZhbHVlKFxuICAgIGJyYW5kRGF0YTogQnJhbmRJbnB1dERhdGEsXG4gICAgY29uc2lzdGVuY3lTY29yZTogbnVtYmVyXG4gICk6IFByb21pc2U8QnJhbmRaRXZhbHVhdGlvblJlc3VsdD4ge1xuICAgIGNvbnN0IHJlc3VsdDogQnJhbmRaRXZhbHVhdGlvblJlc3VsdCA9IHtcbiAgICAgIGZpbmFuY2lhbF92YWx1ZV9zY29yZTogMCxcbiAgICAgIHJldmVudWVfcGVyZm9ybWFuY2U6IDAsXG4gICAgICBhc3NldF9lZmZpY2llbmN5OiAwLFxuICAgICAgYnJhbmRfbXVsdGlwbGU6IDEuMCxcbiAgICAgIGJyYW5kX2NvbnRyaWJ1dGlvbl9zY29yZTogMCxcbiAgICAgIG1lYW5pbmdmdWxfc2NvcmU6IDAsXG4gICAgICBkaWZmZXJlbnRfc2NvcmU6IDAsXG4gICAgICBzYWxpZW50X3Njb3JlOiAwLFxuICAgICAgY29uc2lzdGVuY3lfc2NvcmU6IDAsXG4gICAgICBicmFuZHpfdmFsdWU6IDAsXG4gICAgICBicmFuZF9ncmFkZTogXCJcIixcbiAgICB9O1xuXG4gICAgLy8gMS4g6K+E5Lyw6LSi5Yqh5Lu35YC8XG4gICAgY29uc3QgZmluYW5jaWFsU2NvcmVzID0gdGhpcy5ldmFsdWF0ZUZpbmFuY2lhbFZhbHVlKGJyYW5kRGF0YSk7XG4gICAgcmVzdWx0LnJldmVudWVfcGVyZm9ybWFuY2UgPSBmaW5hbmNpYWxTY29yZXMucmV2ZW51ZV9wZXJmb3JtYW5jZTtcbiAgICByZXN1bHQuYXNzZXRfZWZmaWNpZW5jeSA9IGZpbmFuY2lhbFNjb3Jlcy5hc3NldF9lZmZpY2llbmN5O1xuICAgIHJlc3VsdC5icmFuZF9tdWx0aXBsZSA9IGZpbmFuY2lhbFNjb3Jlcy5icmFuZF9tdWx0aXBsZTtcblxuICAgIHJlc3VsdC5maW5hbmNpYWxfdmFsdWVfc2NvcmUgPVxuICAgICAgcmVzdWx0LnJldmVudWVfcGVyZm9ybWFuY2UgKiBCUkFORFpfQ09NUE9ORU5UX1dFSUdIVFMuUkVWRU5VRV9QRVJGT1JNQU5DRSArXG4gICAgICByZXN1bHQuYXNzZXRfZWZmaWNpZW5jeSAqIEJSQU5EWl9DT01QT05FTlRfV0VJR0hUUy5BU1NFVF9FRkZJQ0lFTkNZICtcbiAgICAgIE1hdGgubWluKHJlc3VsdC5icmFuZF9tdWx0aXBsZSAqIDIwLCAxMDApICpcbiAgICAgICAgQlJBTkRaX0NPTVBPTkVOVF9XRUlHSFRTLkJSQU5EX01VTFRJUExFO1xuXG4gICAgLy8gMi4g6K+E5Lyw5ZOB54mM6LSh54yuXG4gICAgY29uc3QgbWRzU2NvcmVzID0gdGhpcy5ldmFsdWF0ZU1EU1Njb3JlcyhicmFuZERhdGEpO1xuICAgIHJlc3VsdC5tZWFuaW5nZnVsX3Njb3JlID0gbWRzU2NvcmVzLm1lYW5pbmdmdWw7XG4gICAgcmVzdWx0LmRpZmZlcmVudF9zY29yZSA9IG1kc1Njb3Jlcy5kaWZmZXJlbnQ7XG4gICAgcmVzdWx0LnNhbGllbnRfc2NvcmUgPSBtZHNTY29yZXMuc2FsaWVudDtcbiAgICByZXN1bHQuY29uc2lzdGVuY3lfc2NvcmUgPSBjb25zaXN0ZW5jeVNjb3JlO1xuXG4gICAgcmVzdWx0LmJyYW5kX2NvbnRyaWJ1dGlvbl9zY29yZSA9XG4gICAgICByZXN1bHQubWVhbmluZ2Z1bF9zY29yZSAqIEJSQU5EWl9DT05UUklCVVRJT05fQ09NUE9ORU5UX1dFSUdIVFMuTUVBTklOR0ZVTCArXG4gICAgICByZXN1bHQuZGlmZmVyZW50X3Njb3JlICogQlJBTkRaX0NPTlRSSUJVVElPTl9DT01QT05FTlRfV0VJR0hUUy5ESUZGRVJFTlQgK1xuICAgICAgcmVzdWx0LnNhbGllbnRfc2NvcmUgKiBCUkFORFpfQ09OVFJJQlVUSU9OX0NPTVBPTkVOVF9XRUlHSFRTLlNBTElFTlQgK1xuICAgICAgcmVzdWx0LmNvbnNpc3RlbmN5X3Njb3JlICogQlJBTkRaX0NPTlRSSUJVVElPTl9DT01QT05FTlRfV0VJR0hUUy5DT05TSVNURU5DWTtcblxuICAgIC8vIDMuIOiuoeeul0JyYW5kWuS7t+WAvFxuICAgIGNvbnN0IGJhc2VTY29yZSA9XG4gICAgICByZXN1bHQuZmluYW5jaWFsX3ZhbHVlX3Njb3JlICogQlJBTkRaX1dFSUdIVFMuRklOQU5DSUFMX1ZBTFVFICtcbiAgICAgIHJlc3VsdC5icmFuZF9jb250cmlidXRpb25fc2NvcmUgKiBCUkFORFpfV0VJR0hUUy5CUkFORF9DT05UUklCVVRJT047XG5cbiAgICBjb25zdCBtdWx0aXBsaWVyRmFjdG9yID0gcmVzdWx0LmJyYW5kX211bHRpcGxlIC8gMi41O1xuICAgIHJlc3VsdC5icmFuZHpfdmFsdWUgPSBiYXNlU2NvcmUgKiBtdWx0aXBsaWVyRmFjdG9yO1xuXG4gICAgLy8gNC4g56Gu5a6a5ZOB54mM562J57qnXG4gICAgcmVzdWx0LmJyYW5kX2dyYWRlID0gdGhpcy5nZXRCcmFuZEdyYWRlKHJlc3VsdC5icmFuZHpfdmFsdWUpO1xuXG4gICAgLy8gNS4g55Sf5oiQ6K+E5Lyw6K+m5oOFXG4gICAgcmVzdWx0LmV2YWx1YXRpb25fZGV0YWlscyA9IHRoaXMuZ2VuZXJhdGVFdmFsdWF0aW9uRGV0YWlscyhcbiAgICAgIHJlc3VsdCxcbiAgICAgIGZpbmFuY2lhbFNjb3JlcyxcbiAgICAgIG1kc1Njb3Jlc1xuICAgICk7XG4gICAgcmVzdWx0LmltcHJvdmVtZW50X3N1Z2dlc3Rpb25zID0gdGhpcy5nZW5lcmF0ZUltcHJvdmVtZW50U3VnZ2VzdGlvbnMoXG4gICAgICBicmFuZERhdGEsXG4gICAgICByZXN1bHRcbiAgICApO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiDor4TkvLDotKLliqHku7flgLxcbiAgICovXG4gIHB1YmxpYyBldmFsdWF0ZUZpbmFuY2lhbFZhbHVlKGJyYW5kRGF0YTogQnJhbmRJbnB1dERhdGEpOiB7XG4gICAgcmV2ZW51ZV9wZXJmb3JtYW5jZTogbnVtYmVyO1xuICAgIGFzc2V0X2VmZmljaWVuY3k6IG51bWJlcjtcbiAgICBicmFuZF9tdWx0aXBsZTogbnVtYmVyO1xuICB9IHtcbiAgICAvLyDnroDljJbnmoTotKLliqHor4TkvLDvvIzln7rkuo7lk4HniYzotYTkuqfkv6Hmga9cbiAgICBjb25zdCBwb3NpdGlvbmluZyA9IGJyYW5kRGF0YS5icmFuZF9hc3NldHMuYnJhbmRfaW1hZ2UuYnJhbmRfcG9zaXRpb25pbmc7XG4gICAgY29uc3QgbWlzc2lvbiA9IHBvc2l0aW9uaW5nLmJyYW5kX21pc3Npb24uZGVzY3JpcHRpb247XG4gICAgY29uc3QgdmFsdWUgPSBwb3NpdGlvbmluZy5kZXNjcmlwdGlvbjtcblxuICAgIGxldCByZXZlbnVlUGVyZm9ybWFuY2UgPSA3MDtcbiAgICBsZXQgYXNzZXRFZmZpY2llbmN5ID0gNzA7XG4gICAgbGV0IGJyYW5kTXVsdGlwbGUgPSAyLjA7XG5cbiAgICAvLyDln7rkuo7lrprkvY3or4TkvLDmlLbnm4rooajnjrBcbiAgICBpZiAoXG4gICAgICBwb3NpdGlvbmluZy5kZXNjcmlwdGlvbi5pbmNsdWRlcyhcIumihuWvvFwiKSB8fFxuICAgICAgcG9zaXRpb25pbmcuZGVzY3JpcHRpb24uaW5jbHVkZXMoXCLpooblhYhcIilcbiAgICApIHtcbiAgICAgIHJldmVudWVQZXJmb3JtYW5jZSArPSAyMDtcbiAgICB9XG5cbiAgICAvLyDln7rkuo7kvb/lkb3or4TkvLDotYTkuqfmlYjnjodcbiAgICBpZiAobWlzc2lvbi5pbmNsdWRlcyhcIuS4k+S4mlwiKSB8fCBtaXNzaW9uLmluY2x1ZGVzKFwi5ZOB6LSoXCIpKSB7XG4gICAgICBhc3NldEVmZmljaWVuY3kgKz0gMjA7XG4gICAgfVxuXG4gICAgLy8g5Z+65LqO5Lu35YC85Li75byg6K+E5Lyw5ZOB54mM5YCN5pWwXG4gICAgaWYgKHZhbHVlLmluY2x1ZGVzKFwi54us54m5XCIpIHx8IHZhbHVlLmluY2x1ZGVzKFwi5Yib5pawXCIpKSB7XG4gICAgICBicmFuZE11bHRpcGxlICs9IDAuNTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmV2ZW51ZV9wZXJmb3JtYW5jZTogTWF0aC5taW4oMTAwLCByZXZlbnVlUGVyZm9ybWFuY2UpLFxuICAgICAgYXNzZXRfZWZmaWNpZW5jeTogTWF0aC5taW4oMTAwLCBhc3NldEVmZmljaWVuY3kpLFxuICAgICAgYnJhbmRfbXVsdGlwbGU6IE1hdGgubWluKDUuMCwgTWF0aC5tYXgoMS4wLCBicmFuZE11bHRpcGxlKSksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiDor4TkvLBNRFPliIbmlbBcbiAgICovXG4gIHB1YmxpYyBldmFsdWF0ZU1EU1Njb3JlcyhicmFuZERhdGE6IEJyYW5kSW5wdXREYXRhKToge1xuICAgIG1lYW5pbmdmdWw6IG51bWJlcjtcbiAgICBkaWZmZXJlbnQ6IG51bWJlcjtcbiAgICBzYWxpZW50OiBudW1iZXI7XG4gIH0ge1xuICAgIGNvbnN0IHBvc2l0aW9uaW5nID0gYnJhbmREYXRhLmJyYW5kX2Fzc2V0cy5icmFuZF9pbWFnZS5icmFuZF9wb3NpdGlvbmluZztcbiAgICBjb25zdCBleHByZXNzaW9uID0gYnJhbmREYXRhLmJyYW5kX2Fzc2V0cy5icmFuZF9pbWFnZS5icmFuZF9leHByZXNzaW9uO1xuXG4gICAgbGV0IG1lYW5pbmdmdWwgPSA3MDtcbiAgICBsZXQgZGlmZmVyZW50ID0gNzA7XG4gICAgbGV0IHNhbGllbnQgPSA3MDtcblxuICAgIC8vIOivhOS8sOacieaEj+S5ieW6plxuICAgIGlmIChcbiAgICAgIHBvc2l0aW9uaW5nLmJyYW5kX21pc3Npb24uZGVzY3JpcHRpb24uaW5jbHVkZXMoXCLku7flgLxcIikgfHxcbiAgICAgIHBvc2l0aW9uaW5nLmJyYW5kX21pc3Npb24uZGVzY3JpcHRpb24uaW5jbHVkZXMoXCLmhI/kuYlcIilcbiAgICApIHtcbiAgICAgIG1lYW5pbmdmdWwgKz0gMjA7XG4gICAgfVxuXG4gICAgLy8g6K+E5Lyw5beu5byC5YyW5bqmXG4gICAgaWYgKFxuICAgICAgcG9zaXRpb25pbmcuZGVzY3JpcHRpb24uaW5jbHVkZXMoXCLni6zniblcIikgfHxcbiAgICAgIHBvc2l0aW9uaW5nLmRlc2NyaXB0aW9uLmluY2x1ZGVzKFwi5Yib5pawXCIpXG4gICAgKSB7XG4gICAgICBkaWZmZXJlbnQgKz0gMjA7XG4gICAgfVxuXG4gICAgLy8g6K+E5Lyw5pi+6JGX5bqmXG4gICAgaWYgKGV4cHJlc3Npb24uYnJhbmRfc2xvZ2FuLnNsb2dhbiB8fCBleHByZXNzaW9uLnRvbmUuZGVzY3JpcHRpb24pIHtcbiAgICAgIHNhbGllbnQgKz0gMjA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIG1lYW5pbmdmdWw6IE1hdGgubWluKDEwMCwgbWVhbmluZ2Z1bCksXG4gICAgICBkaWZmZXJlbnQ6IE1hdGgubWluKDEwMCwgZGlmZmVyZW50KSxcbiAgICAgIHNhbGllbnQ6IE1hdGgubWluKDEwMCwgc2FsaWVudCksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnlJ/miJDnu7zlkIjmiqXlkYpcbiAgICovXG4gIHB1YmxpYyBnZW5lcmF0ZUNvbXByZWhlbnNpdmVSZXBvcnQoXG4gICAgYnJhbmREYXRhOiBCcmFuZElucHV0RGF0YSxcbiAgICBjb25zaXN0ZW5jeVJlc3VsdDogQ29uc2lzdGVuY3lSZXN1bHQsXG4gICAgYnJhbmR6UmVzdWx0OiBCcmFuZFpFdmFsdWF0aW9uUmVzdWx0XG4gICk6IENvbXByZWhlbnNpdmVSZXBvcnQge1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYnJhbmRfbmFtZTogYnJhbmREYXRhLmJyYW5kX25hbWUsXG4gICAgICBldmFsdWF0aW9uX2RhdGU6IG5vdy50b0lTT1N0cmluZygpLFxuICAgICAgbWV0aG9kb2xvZ3k6XG4gICAgICAgIFwiS2FudGFyIEJyYW5kWiBNb2RlbCArIEJyYW5kIENvbnNpc3RlbmN5IEFuYWx5c2lzIChUeXBlU2NyaXB0IHYxLjApXCIsXG4gICAgICBjb25zaXN0ZW5jeV9ldmFsdWF0aW9uOiBjb25zaXN0ZW5jeVJlc3VsdCxcbiAgICAgIGJyYW5kel9ldmFsdWF0aW9uOiBicmFuZHpSZXN1bHQsXG4gICAgICBhbmFseXNpc19yZXBvcnRzOiB7XG4gICAgICAgIGNvbnNpc3RlbmN5X3JlcG9ydDogY29uc2lzdGVuY3lSZXN1bHQuYW5hbHlzaXNfcmVwb3J0LFxuICAgICAgICBmaW5hbmNpYWxfcmVwb3J0OiB0aGlzLmdlbmVyYXRlRmluYW5jaWFsUmVwb3J0KGJyYW5kRGF0YSwgYnJhbmR6UmVzdWx0KSxcbiAgICAgICAgbWRzX3JlcG9ydDogdGhpcy5nZW5lcmF0ZU1EU1JlcG9ydChicmFuZERhdGEsIGJyYW5kelJlc3VsdCksXG4gICAgICB9LFxuICAgICAgZXZhbHVhdGlvbl9zdW1tYXJ5OiB7XG4gICAgICAgIGNvbnNpc3RlbmN5X2dyYWRlOiBjb25zaXN0ZW5jeVJlc3VsdC5ncmFkZSxcbiAgICAgICAgYnJhbmR6X2dyYWRlOiBicmFuZHpSZXN1bHQuYnJhbmRfZ3JhZGUsXG4gICAgICAgIG92ZXJhbGxfcGVyZm9ybWFuY2Vfc3VtbWFyeTogdGhpcy5nZW5lcmF0ZU92ZXJhbGxTdW1tYXJ5KFxuICAgICAgICAgIGJyYW5kRGF0YSxcbiAgICAgICAgICBjb25zaXN0ZW5jeVJlc3VsdCxcbiAgICAgICAgICBicmFuZHpSZXN1bHRcbiAgICAgICAgKSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnlJ/miJDotKLliqHmiqXlkYpcbiAgICovXG4gIHB1YmxpYyBnZW5lcmF0ZUZpbmFuY2lhbFJlcG9ydChcbiAgICBicmFuZERhdGE6IEJyYW5kSW5wdXREYXRhLFxuICAgIHJlc3VsdDogQnJhbmRaRXZhbHVhdGlvblJlc3VsdFxuICApOiBzdHJpbmcge1xuICAgIHJldHVybiBgXG7otKLliqHku7flgLzliIbmnpDmiqXlkYpcblxu5ZOB54mM5ZCN56ewOiAke2JyYW5kRGF0YS5icmFuZF9uYW1lfVxuXG4xLiDmlLbnm4rooajnjrA6ICR7cmVzdWx0LnJldmVudWVfcGVyZm9ybWFuY2V9LzEwMFxuICAgLSDor4TkvLA6ICR7XG4gICAgIHJlc3VsdC5yZXZlbnVlX3BlcmZvcm1hbmNlID4gODBcbiAgICAgICA/IFwi5LyY56eAXCJcbiAgICAgICA6IHJlc3VsdC5yZXZlbnVlX3BlcmZvcm1hbmNlID4gNjBcbiAgICAgICA/IFwi6Imv5aW9XCJcbiAgICAgICA6IFwi6ZyA6KaB5pS56L+bXCJcbiAgIH1cbiAgIC0g5bu66K6uOiDmj5DljYfluILlnLrnq57kuonlipvvvIzmianlpKfluILlnLrku73pop1cblxuMi4g6LWE5Lqn5pWI546HOiAke3Jlc3VsdC5hc3NldF9lZmZpY2llbmN5fS8xMDBcbiAgIC0g6K+E5LywOiAke1xuICAgICByZXN1bHQuYXNzZXRfZWZmaWNpZW5jeSA+IDgwXG4gICAgICAgPyBcIuS8mOengFwiXG4gICAgICAgOiByZXN1bHQuYXNzZXRfZWZmaWNpZW5jeSA+IDYwXG4gICAgICAgPyBcIuiJr+WlvVwiXG4gICAgICAgOiBcIumcgOimgeaUuei/m1wiXG4gICB9XG4gICAtIOW7uuiurjog5LyY5YyW6LWE5rqQ6YWN572u77yM5o+Q6auY6L+Q6JCl5pWI546HXG5cbjMuIOWTgeeJjOWAjeaVsDogJHtyZXN1bHQuYnJhbmRfbXVsdGlwbGV9XG4gICAtIOivhOS8sDogJHtcbiAgICAgcmVzdWx0LmJyYW5kX211bHRpcGxlID4gMy4wXG4gICAgICAgPyBcIuS8mOengFwiXG4gICAgICAgOiByZXN1bHQuYnJhbmRfbXVsdGlwbGUgPiAyLjBcbiAgICAgICA/IFwi6Imv5aW9XCJcbiAgICAgICA6IFwi6ZyA6KaB5pS56L+bXCJcbiAgIH1cbiAgIC0g5bu66K6uOiDlop7lvLrlk4HniYzlvbHlk43lipvvvIzmj5DljYflk4HniYzmuqLku7fog73liptcblxu6LSi5Yqh5Lu35YC85oC75YiGOiAke3Jlc3VsdC5maW5hbmNpYWxfdmFsdWVfc2NvcmV9LzEwMFxuYDtcbiAgfVxuXG4gIC8qKlxuICAgKiDnlJ/miJBNRFPmiqXlkYpcbiAgICovXG4gIHB1YmxpYyBnZW5lcmF0ZU1EU1JlcG9ydChcbiAgICBicmFuZERhdGE6IEJyYW5kSW5wdXREYXRhLFxuICAgIHJlc3VsdDogQnJhbmRaRXZhbHVhdGlvblJlc3VsdFxuICApOiBzdHJpbmcge1xuICAgIHJldHVybiBgXG7lk4HniYzotKHnjK7liIbmnpDmiqXlkYogKE1EU+aooeWeiylcblxu5ZOB54mM5ZCN56ewOiAke2JyYW5kRGF0YS5icmFuZF9uYW1lfVxuXG4xLiDmnInmhI/kuYnluqYgKE1lYW5pbmdmdWwpOiAke3Jlc3VsdC5tZWFuaW5nZnVsX3Njb3JlfS8xMDBcbiAgIC0g6K+E5LywOiAke1xuICAgICByZXN1bHQubWVhbmluZ2Z1bF9zY29yZSA+IDgwXG4gICAgICAgPyBcIuS8mOengFwiXG4gICAgICAgOiByZXN1bHQubWVhbmluZ2Z1bF9zY29yZSA+IDYwXG4gICAgICAgPyBcIuiJr+WlvVwiXG4gICAgICAgOiBcIumcgOimgeaUuei/m1wiXG4gICB9XG4gICAtIOW7uuiurjog5by65YyW5ZOB54mM5Lu35YC85Li75byg77yM5o+Q5Y2H5ZOB54mM5oSP5LmJXG5cbjIuIOW3ruW8guWMluW6piAoRGlmZmVyZW50KTogJHtyZXN1bHQuZGlmZmVyZW50X3Njb3JlfS8xMDBcbiAgIC0g6K+E5LywOiAke1xuICAgICByZXN1bHQuZGlmZmVyZW50X3Njb3JlID4gODBcbiAgICAgICA/IFwi5LyY56eAXCJcbiAgICAgICA6IHJlc3VsdC5kaWZmZXJlbnRfc2NvcmUgPiA2MFxuICAgICAgID8gXCLoia/lpb1cIlxuICAgICAgIDogXCLpnIDopoHmlLnov5tcIlxuICAgfVxuICAgLSDlu7rorq46IOeqgeWHuuWTgeeJjOeLrOeJueaAp++8jOW7uueri+W3ruW8guWMluS8mOWKv1xuXG4zLiDmmL7okZfluqYgKFNhbGllbnQpOiAke3Jlc3VsdC5zYWxpZW50X3Njb3JlfS8xMDBcbiAgIC0g6K+E5LywOiAke1xuICAgICByZXN1bHQuc2FsaWVudF9zY29yZSA+IDgwXG4gICAgICAgPyBcIuS8mOengFwiXG4gICAgICAgOiByZXN1bHQuc2FsaWVudF9zY29yZSA+IDYwXG4gICAgICAgPyBcIuiJr+WlvVwiXG4gICAgICAgOiBcIumcgOimgeaUuei/m1wiXG4gICB9XG4gICAtIOW7uuiurjog5o+Q5Y2H5ZOB54mM55+l5ZCN5bqm77yM5aKe5by65ZOB54mM6K6w5b+G54K5XG5cbjQuIOS4gOiHtOaApyAoQ29uc2lzdGVuY3kpOiAke3Jlc3VsdC5jb25zaXN0ZW5jeV9zY29yZX0vMTAwXG4gICAtIOivhOS8sDogJHtcbiAgICAgcmVzdWx0LmNvbnNpc3RlbmN5X3Njb3JlID4gODBcbiAgICAgICA/IFwi5LyY56eAXCJcbiAgICAgICA6IHJlc3VsdC5jb25zaXN0ZW5jeV9zY29yZSA+IDYwXG4gICAgICAgPyBcIuiJr+WlvVwiXG4gICAgICAgOiBcIumcgOimgeaUuei/m1wiXG4gICB9XG4gICAtIOW7uuiurjog5L+d5oyB5ZOB54mM6KGo6L6+5LiA6Ie05oCn77yM5by65YyW5ZOB54mM6K+G5YirXG5cbuWTgeeJjOi0oeeMruaAu+WIhjogJHtyZXN1bHQuYnJhbmRfY29udHJpYnV0aW9uX3Njb3JlfS8xMDBcbmA7XG4gIH1cblxuICAvKipcbiAgICog55Sf5oiQ5oC75L2T5oC757uTXG4gICAqL1xuICBwdWJsaWMgZ2VuZXJhdGVPdmVyYWxsU3VtbWFyeShcbiAgICBicmFuZERhdGE6IEJyYW5kSW5wdXREYXRhLFxuICAgIGNvbnNpc3RlbmN5UmVzdWx0OiBDb25zaXN0ZW5jeVJlc3VsdCxcbiAgICBicmFuZHpSZXN1bHQ6IEJyYW5kWkV2YWx1YXRpb25SZXN1bHRcbiAgKTogc3RyaW5nIHtcbiAgICBjb25zdCBvdmVyYWxsU2NvcmUgPVxuICAgICAgKGNvbnNpc3RlbmN5UmVzdWx0LnRvdGFsX3Njb3JlICsgYnJhbmR6UmVzdWx0LmJyYW5kel92YWx1ZSkgLyAyO1xuICAgIGNvbnN0IG92ZXJhbGxHcmFkZSA9IHRoaXMuZ2V0QnJhbmRHcmFkZShvdmVyYWxsU2NvcmUpO1xuXG4gICAgcmV0dXJuIGBcbuWTgeeJjOe7vOWQiOivhOS8sOaAu+e7k1xuXG7lk4HniYzlkI3np7A6ICR7YnJhbmREYXRhLmJyYW5kX25hbWV9XG5cbuaAu+S9k+ivhOWIhjogJHtvdmVyYWxsU2NvcmUudG9GaXhlZCgxKX0vMTAwXG7lk4HniYznrYnnuqc6ICR7b3ZlcmFsbEdyYWRlfVxuXG7kvJjlir/liIbmnpA6XG4tIOWTgeeJjOS4gOiHtOaApzogJHtjb25zaXN0ZW5jeVJlc3VsdC50b3RhbF9zY29yZSA+IDcwID8gXCLoia/lpb1cIiA6IFwi6ZyA6KaB5pS56L+bXCJ9XG4tIOWTgeeJjOS7t+WAvDogJHticmFuZHpSZXN1bHQuYnJhbmR6X3ZhbHVlID4gNzAgPyBcIuiJr+WlvVwiIDogXCLpnIDopoHmlLnov5tcIn1cblxu5pS56L+b5bu66K6uOlxuMS4g5oyB57ut5LyY5YyW5ZOB54mM5a6a5L2N5LiO6KGo6L6+55qE5LiA6Ie05oCnXG4yLiDmj5DljYflk4HniYzlnKjnm67moIfnlKjmiLfkuK3nmoTorqTnn6Xluqblkoznvo7oqonluqZcbjMuIOWKoOW8uuWTgeeJjOW3ruW8guWMluW7uuiuvu+8jOeqgeWHuuaguOW/g+ernuS6ieS8mOWKv1xuNC4g5a6M5ZaE5ZOB54mM5Lyg5pKt5L2T57O777yM5o+Q5Y2H5ZOB54mM5b2x5ZON5YqbXG5cbuWPkeWxleWJjeaZrzogJHtcbiAgICAgIG92ZXJhbGxTY29yZSA+IDcwXG4gICAgICAgID8gXCLoia/lpb1cIlxuICAgICAgICA6IG92ZXJhbGxTY29yZSA+IDUwXG4gICAgICAgID8gXCLpnIDopoHph43ngrnlhbPms6hcIlxuICAgICAgICA6IFwi6ZyA6KaB6YeN54K55YWz5rOoXCJcbiAgICB9XG5gO1xuICB9XG5cbiAgLyoqXG4gICAqIOeUn+aIkOivhOS8sOivpuaDhVxuICAgKi9cbiAgcHVibGljIGdlbmVyYXRlRXZhbHVhdGlvbkRldGFpbHMoXG4gICAgcmVzdWx0OiBCcmFuZFpFdmFsdWF0aW9uUmVzdWx0LFxuICAgIGZpbmFuY2lhbFNjb3Jlczoge1xuICAgICAgcmV2ZW51ZV9wZXJmb3JtYW5jZTogbnVtYmVyO1xuICAgICAgYXNzZXRfZWZmaWNpZW5jeTogbnVtYmVyO1xuICAgICAgYnJhbmRfbXVsdGlwbGU6IG51bWJlcjtcbiAgICB9LFxuICAgIG1kc1Njb3JlczogeyBtZWFuaW5nZnVsOiBudW1iZXI7IGRpZmZlcmVudDogbnVtYmVyOyBzYWxpZW50OiBudW1iZXIgfVxuICApOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgICByZXR1cm4ge1xuICAgICAgZmluYW5jaWFsX2JyZWFrZG93bjogZmluYW5jaWFsU2NvcmVzLFxuICAgICAgbWRzX2JyZWFrZG93bjogbWRzU2NvcmVzLFxuICAgICAgYnJhbmR6X2NhbGN1bGF0aW9uOiB7XG4gICAgICAgIGZpbmFuY2lhbF93ZWlnaHQ6IEJSQU5EWl9XRUlHSFRTLkZJTkFOQ0lBTF9WQUxVRSxcbiAgICAgICAgYnJhbmRfY29udHJpYnV0aW9uX3dlaWdodDogQlJBTkRaX1dFSUdIVFMuQlJBTkRfQ09OVFJJQlVUSU9OLFxuICAgICAgICBmaW5hbF9zY29yZTogcmVzdWx0LmJyYW5kel92YWx1ZSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnlJ/miJDmlLnov5vlu7rorq5cbiAgICovXG4gIHB1YmxpYyBnZW5lcmF0ZUltcHJvdmVtZW50U3VnZ2VzdGlvbnMoXG4gICAgYnJhbmREYXRhOiBCcmFuZElucHV0RGF0YSxcbiAgICByZXN1bHQ6IEJyYW5kWkV2YWx1YXRpb25SZXN1bHRcbiAgKTogc3RyaW5nIHtcbiAgICBjb25zdCBzdWdnZXN0aW9ucyA9IFtdO1xuXG4gICAgaWYgKHJlc3VsdC5maW5hbmNpYWxfdmFsdWVfc2NvcmUgPCA3MCkge1xuICAgICAgc3VnZ2VzdGlvbnMucHVzaChcIuaPkOWNh+i0ouWKoeihqOeOsO+8jOS8mOWMlui1hOa6kOmFjee9rlwiKTtcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0LmJyYW5kX2NvbnRyaWJ1dGlvbl9zY29yZSA8IDcwKSB7XG4gICAgICBzdWdnZXN0aW9ucy5wdXNoKFwi5Yqg5by65ZOB54mM5bu66K6+77yM5o+Q5Y2H5ZOB54mM5b2x5ZON5YqbXCIpO1xuICAgIH1cblxuICAgIGlmIChyZXN1bHQuY29uc2lzdGVuY3lfc2NvcmUgPCA3MCkge1xuICAgICAgc3VnZ2VzdGlvbnMucHVzaChcIuS/neaMgeWTgeeJjOihqOi+vuS4gOiHtOaAp++8jOW8uuWMluWTgeeJjOivhuWIq1wiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3VnZ2VzdGlvbnMubGVuZ3RoID4gMFxuICAgICAgPyBzdWdnZXN0aW9ucy5qb2luKFwi77ybXCIpXG4gICAgICA6IFwi5bu66K6u57un57ut5LyY5YyW5ZOB54mM5bu66K6+XCI7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W562J57qnXG4gICAqL1xuICBwdWJsaWMgZ2V0R3JhZGUoc2NvcmU6IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKHNjb3JlID49IDkwKSByZXR1cm4gXCJBK1wiO1xuICAgIGlmIChzY29yZSA+PSA4NSkgcmV0dXJuIFwiQVwiO1xuICAgIGlmIChzY29yZSA+PSA4MCkgcmV0dXJuIFwiQS1cIjtcbiAgICBpZiAoc2NvcmUgPj0gNzUpIHJldHVybiBcIkIrXCI7XG4gICAgaWYgKHNjb3JlID49IDcwKSByZXR1cm4gXCJCXCI7XG4gICAgaWYgKHNjb3JlID49IDY1KSByZXR1cm4gXCJCLVwiO1xuICAgIGlmIChzY29yZSA+PSA2MCkgcmV0dXJuIFwiQytcIjtcbiAgICBpZiAoc2NvcmUgPj0gNTUpIHJldHVybiBcIkNcIjtcbiAgICBpZiAoc2NvcmUgPj0gNTApIHJldHVybiBcIkMtXCI7XG4gICAgcmV0dXJuIFwiROe6p1wiO1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluWTgeeJjOetiee6p1xuICAgKi9cbiAgcHVibGljIGdldEJyYW5kR3JhZGUoYnJhbmR6VmFsdWU6IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKGJyYW5kelZhbHVlID49IDkwKSByZXR1cm4gXCJB57qnXCI7XG4gICAgaWYgKGJyYW5kelZhbHVlID49IDgwKSByZXR1cm4gXCJC57qnXCI7XG4gICAgaWYgKGJyYW5kelZhbHVlID49IDcwKSByZXR1cm4gXCJD57qnXCI7XG4gICAgaWYgKGJyYW5kelZhbHVlID49IDYwKSByZXR1cm4gXCJE57qnXCI7XG4gICAgcmV0dXJuIFwiRee6p1wiO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQnJhbmRDb25zaXN0ZW5jeUV2YWx1YXRvciIsIkJyYW5kQ29udGVudEFuYWx5emVyIiwiQlJBTkRaX1dFSUdIVFMiLCJGSU5BTkNJQUxfVkFMVUUiLCJCUkFORF9DT05UUklCVVRJT04iLCJCUkFORFpfQ09NUE9ORU5UX1dFSUdIVFMiLCJSRVZFTlVFX1BFUkZPUk1BTkNFIiwiQVNTRVRfRUZGSUNJRU5DWSIsIkJSQU5EX01VTFRJUExFIiwiQlJBTkRaX0NPTlRSSUJVVElPTl9DT01QT05FTlRfV0VJR0hUUyIsIk1FQU5JTkdGVUwiLCJESUZGRVJFTlQiLCJTQUxJRU5UIiwiQ09OU0lTVEVOQ1kiLCJCcmFuZFpDYWxjdWxhdG9yIiwiZXZhbHVhdGVCcmFuZFoiLCJicmFuZERhdGEiLCJjb25zaXN0ZW5jeVJlc3VsdCIsImV2YWx1YXRlQ29uc2lzdGVuY3kiLCJicmFuZHpSZXN1bHQiLCJldmFsdWF0ZUJyYW5kWlZhbHVlIiwidG90YWxfc2NvcmUiLCJnZW5lcmF0ZUNvbXByZWhlbnNpdmVSZXBvcnQiLCJldmFsdWF0ZUNvbnNpc3RlbmN5UHVibGljIiwiZXZhbHVhdGVGaW5hbmNpYWxWYWx1ZVB1YmxpYyIsImV2YWx1YXRlRmluYW5jaWFsVmFsdWUiLCJldmFsdWF0ZU1EU1Njb3Jlc1B1YmxpYyIsImV2YWx1YXRlTURTU2NvcmVzIiwiY29udGVudEFuYWx5emVyIiwiY29uc2lzdGVuY3lFdmFsdWF0b3IiLCJhbmFseXNpc1Jlc3VsdCIsImFuYWx5emVCcmFuZENvbnNpc3RlbmN5IiwiZXZhbHVhdGVCcmFuZEhvdXNlIiwibWV0cmljcyIsInJlcG9ydCIsImNvbnNpc3RlbmN5U2NvcmUiLCJyZXN1bHQiLCJmaW5hbmNpYWxfdmFsdWVfc2NvcmUiLCJyZXZlbnVlX3BlcmZvcm1hbmNlIiwiYXNzZXRfZWZmaWNpZW5jeSIsImJyYW5kX211bHRpcGxlIiwiYnJhbmRfY29udHJpYnV0aW9uX3Njb3JlIiwibWVhbmluZ2Z1bF9zY29yZSIsImRpZmZlcmVudF9zY29yZSIsInNhbGllbnRfc2NvcmUiLCJjb25zaXN0ZW5jeV9zY29yZSIsImJyYW5kel92YWx1ZSIsImJyYW5kX2dyYWRlIiwiZmluYW5jaWFsU2NvcmVzIiwiTWF0aCIsIm1pbiIsIm1kc1Njb3JlcyIsIm1lYW5pbmdmdWwiLCJkaWZmZXJlbnQiLCJzYWxpZW50IiwiYmFzZVNjb3JlIiwibXVsdGlwbGllckZhY3RvciIsImdldEJyYW5kR3JhZGUiLCJldmFsdWF0aW9uX2RldGFpbHMiLCJnZW5lcmF0ZUV2YWx1YXRpb25EZXRhaWxzIiwiaW1wcm92ZW1lbnRfc3VnZ2VzdGlvbnMiLCJnZW5lcmF0ZUltcHJvdmVtZW50U3VnZ2VzdGlvbnMiLCJwb3NpdGlvbmluZyIsImJyYW5kX2Fzc2V0cyIsImJyYW5kX2ltYWdlIiwiYnJhbmRfcG9zaXRpb25pbmciLCJtaXNzaW9uIiwiYnJhbmRfbWlzc2lvbiIsImRlc2NyaXB0aW9uIiwidmFsdWUiLCJyZXZlbnVlUGVyZm9ybWFuY2UiLCJhc3NldEVmZmljaWVuY3kiLCJicmFuZE11bHRpcGxlIiwiaW5jbHVkZXMiLCJtYXgiLCJleHByZXNzaW9uIiwiYnJhbmRfZXhwcmVzc2lvbiIsImJyYW5kX3Nsb2dhbiIsInNsb2dhbiIsInRvbmUiLCJub3ciLCJEYXRlIiwiYnJhbmRfbmFtZSIsImV2YWx1YXRpb25fZGF0ZSIsInRvSVNPU3RyaW5nIiwibWV0aG9kb2xvZ3kiLCJjb25zaXN0ZW5jeV9ldmFsdWF0aW9uIiwiYnJhbmR6X2V2YWx1YXRpb24iLCJhbmFseXNpc19yZXBvcnRzIiwiY29uc2lzdGVuY3lfcmVwb3J0IiwiYW5hbHlzaXNfcmVwb3J0IiwiZmluYW5jaWFsX3JlcG9ydCIsImdlbmVyYXRlRmluYW5jaWFsUmVwb3J0IiwibWRzX3JlcG9ydCIsImdlbmVyYXRlTURTUmVwb3J0IiwiZXZhbHVhdGlvbl9zdW1tYXJ5IiwiY29uc2lzdGVuY3lfZ3JhZGUiLCJncmFkZSIsImJyYW5kel9ncmFkZSIsIm92ZXJhbGxfcGVyZm9ybWFuY2Vfc3VtbWFyeSIsImdlbmVyYXRlT3ZlcmFsbFN1bW1hcnkiLCJvdmVyYWxsU2NvcmUiLCJvdmVyYWxsR3JhZGUiLCJ0b0ZpeGVkIiwiZmluYW5jaWFsX2JyZWFrZG93biIsIm1kc19icmVha2Rvd24iLCJicmFuZHpfY2FsY3VsYXRpb24iLCJmaW5hbmNpYWxfd2VpZ2h0IiwiYnJhbmRfY29udHJpYnV0aW9uX3dlaWdodCIsImZpbmFsX3Njb3JlIiwic3VnZ2VzdGlvbnMiLCJwdXNoIiwibGVuZ3RoIiwiam9pbiIsImdldEdyYWRlIiwic2NvcmUiLCJicmFuZHpWYWx1ZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/services/core/BrandZCalculator.ts\n");

/***/ }),

/***/ "(rsc)/./app/services/core/ConsistencyAnalyzer.ts":
/*!**************************************************!*\
  !*** ./app/services/core/ConsistencyAnalyzer.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BrandContentAnalyzer: () => (/* binding */ BrandContentAnalyzer)\n/* harmony export */ });\n/* harmony import */ var _LLM__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./LLM */ \"(rsc)/./app/services/core/LLM.ts\");\n/**\n * 品牌内容智能分析器 - TypeScript版本\n * 基于LLM的品牌内容分析, 自动生成品牌一致性评分\n */ \nclass BrandContentAnalyzer {\n    constructor(){\n        this.llm = new _LLM__WEBPACK_IMPORTED_MODULE_0__.LLM();\n    }\n    /**\n   * 分析品牌内容，生成一致性分析报告和评分\n   */ async analyzeBrandConsistency(brandData) {\n        // 1. 生成完整的文本分析报告\n        const analysisReport = await this.generateConsistencyAnalysisReport(brandData);\n        // 2. 从报告中提取结构化评分\n        const consistencyMetrics = await this.extractConsistencyScoresFromReport(analysisReport);\n        return {\n            report: analysisReport,\n            metrics: consistencyMetrics\n        };\n    }\n    /**\n   * 基于品牌所有数据，生成一份详细的文本分析报告\n   */ async generateConsistencyAnalysisReport(brandData) {\n        // 将BrandInputData转换为JSON字符串，以便在提示中轻松使用\n        const brandDataJson = JSON.stringify(brandData, null, 2);\n        const prompt = `\n作为一名资深的品牌战略专家，请对品牌\"${brandData.brand_name}\"进行一次全面、深入、系统性的品牌一致性分析。请严格基于以下提供的品牌数据，撰写一份详细的分析报告。\n\n### 品牌核心数据:\n\\`\\`\\`json\n${brandDataJson}\n\\`\\`\\`\n\n### 分析报告撰写要求:\n请围绕\"品牌一致性\"这一核心，从以下七个维度展开详细论述。请确保你的分析逻辑严谨，论据充分，并直接引用上述JSON数据中的关键信息来支撑你的观点。\n\n1.  **品牌理念层一致性 (Brand Philosophy Consistency)**:\n    *   **使命 (Mission)**、**愿景 (Vision)** 和 **价值观 (Values)** 是否清晰、独特且鼓舞人心？\n    *   这三者之间是否存在内在的逻辑统一和互相支撑？\n    *   品牌定位 (Positioning) 是否与品牌理念保持一致？\n\n2.  **品牌表达层一致性 (Brand Expression Consistency)**:\n    *   品牌口号 (Slogan)、语言风格 (Language Style)、调性 (Tone) 是否统一？\n    *   核心信息 (Key Messages) 在不同传播渠道中是否保持一致？\n    *   品牌表达是否准确反映了品牌理念和定位？\n\n3.  **视觉识别系统一致性 (Visual Identity Consistency)**:\n    *   色彩 (Color)、字体 (Typography)、布局 (Layout)、符号 (Symbol) 等视觉元素的使用是否遵循了统一的规范？\n    *   视觉风格是否独特，并能在众多品牌中被快速识别？\n    *   视觉系统是否有效地传达了品牌个性和理念？\n\n4.  **语言风格系统一致性 (Language Style Consistency)**:\n    *   品牌的口号、广告文案、社交媒体内容、客服沟通语言是否展现出统一的风格和调性？\n    *   语言风格是否与目标受众的沟通习惯相匹配？\n    *   信息传递是否清晰、准确、易于理解？\n\n5.  **品牌承诺与RTB一致性 (Brand Promise & RTB Consistency)**:\n    *   品牌承诺 (Promise) 是否清晰明确，并对消费者有吸引力？\n    *   RTB (Reason to Believe) 是否能强有力地支撑品牌承诺，使其显得真实可信？\n    *   品牌的产品/服务体验 (Experience) 是否兑现了其承诺？\n\n6.  **目标受众契合度 (Target Audience Alignment)**:\n    *   品牌的所有表现（理念、视觉、语言、承诺）是否能与目标受众 (Target Audience) 的价值观、审美和需求产生共鸣？\n    *   从客户反馈 (Customer Feedback) 和市场研究 (Market Research) 数据来看，品牌在目标用户心中的认知 (Perception) 是否与品牌方期望的一致？\n\n7.  **品牌架构层级间协同性 (Hierarchy Alignment)**:\n    *   这是一个综合性评估。请分析以上 **理念、表达、视觉、语言、承诺** 等不同层级之间是否相互协同、无缝整合，共同塑造了一个立体、统一的品牌形象？\n    *   例如，视觉设计是否强化了品牌口号？语言调性是否体现了品牌价值观？\n\n请将你的分析整合成一份流畅、专业的报告。\n`;\n        try {\n            const report = await this.llm.text(prompt);\n            return report;\n        } catch (error) {\n            console.error(\"生成一致性分析报告失败:\", error);\n            return `生成报告失败: ${error instanceof Error ? error.message : '未知错误'}`;\n        }\n    }\n    /**\n   * 基于分析报告，提取所有BrandConsistencyMetrics的评分\n   */ async extractConsistencyScoresFromReport(reportText) {\n        // 获取BrandConsistencyMetrics所有字段的描述\n        const allMetricNames = [\n            'mission_clarity',\n            'mission_consistency',\n            'vision_clarity',\n            'vision_appeal',\n            'values_clarity',\n            'values_authenticity',\n            'style_consistency',\n            'tone_appropriateness',\n            'keyword_recognition',\n            'scenario_adaptation',\n            'color_consistency',\n            'typography_consistency',\n            'layout_consistency',\n            'symbol_recognition',\n            'visual_appeal',\n            'language_consistency',\n            'language_appropriateness',\n            'slogan_memorability',\n            'message_clarity',\n            'promise_clarity',\n            'promise_credibility',\n            'benefit_clarity',\n            'experience_coherence',\n            'rtb_clarity',\n            'rtb_uniqueness',\n            'rtb_credibility',\n            'philosophy_ta_alignment',\n            'values_ta_resonance',\n            'vision_ta_appeal',\n            'philosophy_expression_alignment',\n            'values_tone_consistency',\n            'mission_keyword_alignment',\n            'philosophy_visual_alignment',\n            'values_color_symbolism',\n            'vision_design_harmony',\n            'philosophy_language_alignment',\n            'values_slogan_consistency',\n            'mission_message_clarity',\n            'expression_visual_harmony',\n            'tone_visual_consistency',\n            'style_symbol_alignment',\n            'expression_language_coherence',\n            'tone_language_matching',\n            'style_message_consistency',\n            'visual_language_integration',\n            'color_language_emotion',\n            'symbol_slogan_synergy',\n            'promise_philosophy_alignment',\n            'promise_expression_consistency',\n            'promise_visual_support',\n            'promise_language_clarity',\n            'rtb_philosophy_foundation',\n            'rtb_expression_reinforcement',\n            'rtb_visual_evidence',\n            'rtb_language_persuasion'\n        ];\n        const prompt = `\n作为一名量化分析专家，请仔细阅读以下品牌一致性分析报告，并基于报告内容，为下列所有指标进行精确评分。\n\n### 品牌一致性分析报告:\n---\n${reportText}\n---\n\n### 评分要求:\n1.  **评分标准**: 请对以下每一个指标给出 **0-10** 分的评分，支持一位小数。**0分代表完全不一致或缺失，10分代表完美一致**。\n2.  **评分依据**: 你的评分必须严格依据上述报告的内容。请仔细寻找报告中与各指标相关的论述，并据此进行判断。\n3.  **完整性**: **必须为清单中的每一个指标都提供评分**。如果报告中没有直接提及某个非常具体的指标，请根据最相关的宏观分析进行推断和评估。\n4.  **输出格式**: 请以一个JSON对象的形式返回所有评分，key为指标名称，value为评分。不要添加任何额外的解释或注释。\n\n### 待评分指标清单:\n\\`\\`\\`json\n${JSON.stringify(allMetricNames, null, 2)}\n\\`\\`\\`\n\n请现在开始评分，并返回完整的JSON对象。\n`;\n        try {\n            const scoresDict = await this.llm.json(prompt);\n            // 验证并填充默认值\n            const finalScores = {};\n            for (const field of allMetricNames){\n                const score = scoresDict[field];\n                if (typeof score === 'number') {\n                    finalScores[field] = Math.max(0.0, Math.min(10.0, score));\n                } else {\n                    console.warn(`警告: 指标 '${field}' 的评分无效或缺失，使用默认值5.0`);\n                    finalScores[field] = 5.0;\n                }\n            }\n            return finalScores;\n        } catch (error) {\n            console.error(\"从报告中提取一致性评分失败:\", error);\n            // 在失败时返回一个所有评分为5.0的默认对象\n            const defaultScores = {};\n            for (const field of allMetricNames){\n                defaultScores[field] = 5.0;\n            }\n            return defaultScores;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvc2VydmljZXMvY29yZS9Db25zaXN0ZW5jeUFuYWx5emVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7OztDQUdDLEdBSTJCO0FBT3JCLE1BQU1DO0lBR1gsYUFBYztRQUNaLElBQUksQ0FBQ0MsR0FBRyxHQUFHLElBQUlGLHFDQUFHQTtJQUNwQjtJQUVBOztHQUVDLEdBQ0QsTUFBTUcsd0JBQXdCQyxTQUF5QixFQUEyQjtRQUNoRixpQkFBaUI7UUFDakIsTUFBTUMsaUJBQWlCLE1BQU0sSUFBSSxDQUFDQyxpQ0FBaUMsQ0FBQ0Y7UUFFcEUsaUJBQWlCO1FBQ2pCLE1BQU1HLHFCQUFxQixNQUFNLElBQUksQ0FBQ0Msa0NBQWtDLENBQUNIO1FBRXpFLE9BQU87WUFDTEksUUFBUUo7WUFDUkssU0FBU0g7UUFDWDtJQUNGO0lBRUE7O0dBRUMsR0FDRCxNQUFjRCxrQ0FBa0NGLFNBQXlCLEVBQW1CO1FBQzFGLHVDQUF1QztRQUN2QyxNQUFNTyxnQkFBZ0JDLEtBQUtDLFNBQVMsQ0FBQ1QsV0FBVyxNQUFNO1FBRXRELE1BQU1VLFNBQVMsQ0FBQzttQkFDRCxFQUFFVixVQUFVVyxVQUFVLENBQUM7Ozs7QUFJMUMsRUFBRUosY0FBYzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXdDaEIsQ0FBQztRQUVHLElBQUk7WUFDRixNQUFNRixTQUFTLE1BQU0sSUFBSSxDQUFDUCxHQUFHLENBQUNjLElBQUksQ0FBQ0Y7WUFDbkMsT0FBT0w7UUFDVCxFQUFFLE9BQU9RLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLGdCQUFnQkE7WUFDOUIsT0FBTyxDQUFDLFFBQVEsRUFBRUEsaUJBQWlCRSxRQUFRRixNQUFNRyxPQUFPLEdBQUcsUUFBUTtRQUNyRTtJQUNGO0lBRUE7O0dBRUMsR0FDRCxNQUFjWixtQ0FBbUNhLFVBQWtCLEVBQW9DO1FBQ3JHLG1DQUFtQztRQUNuQyxNQUFNQyxpQkFBaUI7WUFDckI7WUFBbUI7WUFBdUI7WUFBa0I7WUFDNUQ7WUFBa0I7WUFBdUI7WUFBcUI7WUFDOUQ7WUFBdUI7WUFBdUI7WUFBcUI7WUFDbkU7WUFBc0I7WUFBc0I7WUFBaUI7WUFDN0Q7WUFBNEI7WUFBdUI7WUFBbUI7WUFDdEU7WUFBdUI7WUFBbUI7WUFBd0I7WUFDbEU7WUFBa0I7WUFBbUI7WUFBMkI7WUFDaEU7WUFBb0I7WUFBbUM7WUFDdkQ7WUFBNkI7WUFBK0I7WUFDNUQ7WUFBeUI7WUFBaUM7WUFDMUQ7WUFBMkI7WUFBNkI7WUFDeEQ7WUFBMEI7WUFBaUM7WUFDM0Q7WUFBNkI7WUFBK0I7WUFDNUQ7WUFBeUI7WUFBZ0M7WUFDekQ7WUFBMEI7WUFBNEI7WUFDdEQ7WUFBZ0M7WUFBdUI7U0FDeEQ7UUFFRCxNQUFNUixTQUFTLENBQUM7Ozs7O0FBS3BCLEVBQUVPLFdBQVc7Ozs7Ozs7Ozs7O0FBV2IsRUFBRVQsS0FBS0MsU0FBUyxDQUFDUyxnQkFBZ0IsTUFBTSxHQUFHOzs7O0FBSTFDLENBQUM7UUFFRyxJQUFJO1lBQ0YsTUFBTUMsYUFBYSxNQUFNLElBQUksQ0FBQ3JCLEdBQUcsQ0FBQ3NCLElBQUksQ0FBQ1Y7WUFFdkMsV0FBVztZQUNYLE1BQU1XLGNBQW1CLENBQUM7WUFDMUIsS0FBSyxNQUFNQyxTQUFTSixlQUFnQjtnQkFDbEMsTUFBTUssUUFBUUosVUFBVSxDQUFDRyxNQUFNO2dCQUMvQixJQUFJLE9BQU9DLFVBQVUsVUFBVTtvQkFDN0JGLFdBQVcsQ0FBQ0MsTUFBTSxHQUFHRSxLQUFLQyxHQUFHLENBQUMsS0FBS0QsS0FBS0UsR0FBRyxDQUFDLE1BQU1IO2dCQUNwRCxPQUFPO29CQUNMVCxRQUFRYSxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUVMLE1BQU0sbUJBQW1CLENBQUM7b0JBQ2xERCxXQUFXLENBQUNDLE1BQU0sR0FBRztnQkFDdkI7WUFDRjtZQUVBLE9BQU9EO1FBRVQsRUFBRSxPQUFPUixPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyxrQkFBa0JBO1lBQ2hDLHdCQUF3QjtZQUN4QixNQUFNZSxnQkFBcUIsQ0FBQztZQUM1QixLQUFLLE1BQU1OLFNBQVNKLGVBQWdCO2dCQUNsQ1UsYUFBYSxDQUFDTixNQUFNLEdBQUc7WUFDekI7WUFDQSxPQUFPTTtRQUNUO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3dhbmdlbml1cy9Eb2N1bWVudHMvdHdpbmtsZS90eXBlc2NyaXB0LWJyYW5kdmFsdWUvYXBwL3NlcnZpY2VzL2NvcmUvQ29uc2lzdGVuY3lBbmFseXplci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOWTgeeJjOWGheWuueaZuuiDveWIhuaekOWZqCAtIFR5cGVTY3JpcHTniYjmnKxcbiAqIOWfuuS6jkxMTeeahOWTgeeJjOWGheWuueWIhuaekCwg6Ieq5Yqo55Sf5oiQ5ZOB54mM5LiA6Ie05oCn6K+E5YiGXG4gKi9cblxuaW1wb3J0IHsgQnJhbmRJbnB1dERhdGEgfSBmcm9tICcuLi90eXBlcy9CcmFuZEFzc2V0JztcbmltcG9ydCB7IEJyYW5kQ29uc2lzdGVuY3lNZXRyaWNzIH0gZnJvbSAnLi9Db25zaXN0ZW5jeUV2YWx1YXRvcic7XG5pbXBvcnQgeyBMTE0gfSBmcm9tICcuL0xMTSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW5hbHlzaXNSZXN1bHQge1xuICByZXBvcnQ6IHN0cmluZztcbiAgbWV0cmljczogQnJhbmRDb25zaXN0ZW5jeU1ldHJpY3M7XG59XG5cbmV4cG9ydCBjbGFzcyBCcmFuZENvbnRlbnRBbmFseXplciB7XG4gIHByaXZhdGUgbGxtOiBMTE07XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5sbG0gPSBuZXcgTExNKCk7XG4gIH1cblxuICAvKipcbiAgICog5YiG5p6Q5ZOB54mM5YaF5a6577yM55Sf5oiQ5LiA6Ie05oCn5YiG5p6Q5oql5ZGK5ZKM6K+E5YiGXG4gICAqL1xuICBhc3luYyBhbmFseXplQnJhbmRDb25zaXN0ZW5jeShicmFuZERhdGE6IEJyYW5kSW5wdXREYXRhKTogUHJvbWlzZTxBbmFseXNpc1Jlc3VsdD4ge1xuICAgIC8vIDEuIOeUn+aIkOWujOaVtOeahOaWh+acrOWIhuaekOaKpeWRilxuICAgIGNvbnN0IGFuYWx5c2lzUmVwb3J0ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUNvbnNpc3RlbmN5QW5hbHlzaXNSZXBvcnQoYnJhbmREYXRhKTtcblxuICAgIC8vIDIuIOS7juaKpeWRiuS4reaPkOWPlue7k+aehOWMluivhOWIhlxuICAgIGNvbnN0IGNvbnNpc3RlbmN5TWV0cmljcyA9IGF3YWl0IHRoaXMuZXh0cmFjdENvbnNpc3RlbmN5U2NvcmVzRnJvbVJlcG9ydChhbmFseXNpc1JlcG9ydCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVwb3J0OiBhbmFseXNpc1JlcG9ydCxcbiAgICAgIG1ldHJpY3M6IGNvbnNpc3RlbmN5TWV0cmljc1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICog5Z+65LqO5ZOB54mM5omA5pyJ5pWw5o2u77yM55Sf5oiQ5LiA5Lu96K+m57uG55qE5paH5pys5YiG5p6Q5oql5ZGKXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlQ29uc2lzdGVuY3lBbmFseXNpc1JlcG9ydChicmFuZERhdGE6IEJyYW5kSW5wdXREYXRhKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAvLyDlsIZCcmFuZElucHV0RGF0Yei9rOaNouS4ukpTT07lrZfnrKbkuLLvvIzku6Xkvr/lnKjmj5DnpLrkuK3ovbvmnb7kvb/nlKhcbiAgICBjb25zdCBicmFuZERhdGFKc29uID0gSlNPTi5zdHJpbmdpZnkoYnJhbmREYXRhLCBudWxsLCAyKTtcblxuICAgIGNvbnN0IHByb21wdCA9IGBcbuS9nOS4uuS4gOWQjei1hOa3seeahOWTgeeJjOaImOeVpeS4k+Wutu+8jOivt+WvueWTgeeJjFwiJHticmFuZERhdGEuYnJhbmRfbmFtZX1cIui/m+ihjOS4gOasoeWFqOmdouOAgea3seWFpeOAgeezu+e7n+aAp+eahOWTgeeJjOS4gOiHtOaAp+WIhuaekOOAguivt+S4peagvOWfuuS6juS7peS4i+aPkOS+m+eahOWTgeeJjOaVsOaNru+8jOaSsOWGmeS4gOS7veivpue7hueahOWIhuaekOaKpeWRiuOAglxuXG4jIyMg5ZOB54mM5qC45b+D5pWw5o2uOlxuXFxgXFxgXFxganNvblxuJHticmFuZERhdGFKc29ufVxuXFxgXFxgXFxgXG5cbiMjIyDliIbmnpDmiqXlkYrmkrDlhpnopoHmsYI6XG7or7flm7Tnu5VcIuWTgeeJjOS4gOiHtOaAp1wi6L+Z5LiA5qC45b+D77yM5LuO5Lul5LiL5LiD5Liq57u05bqm5bGV5byA6K+m57uG6K666L+w44CC6K+356Gu5L+d5L2g55qE5YiG5p6Q6YC76L6R5Lil6LCo77yM6K665o2u5YWF5YiG77yM5bm255u05o6l5byV55So5LiK6L+wSlNPTuaVsOaNruS4reeahOWFs+mUruS/oeaBr+adpeaUr+aSkeS9oOeahOingueCueOAglxuXG4xLiAgKirlk4HniYznkIblv7XlsYLkuIDoh7TmgKcgKEJyYW5kIFBoaWxvc29waHkgQ29uc2lzdGVuY3kpKio6XG4gICAgKiAgICoq5L2/5ZG9IChNaXNzaW9uKSoq44CBKirmhL/mma8gKFZpc2lvbikqKiDlkowgKirku7flgLzop4IgKFZhbHVlcykqKiDmmK/lkKbmuIXmmbDjgIHni6znibnkuJTpvJPoiJ7kurrlv4PvvJ9cbiAgICAqICAg6L+Z5LiJ6ICF5LmL6Ze05piv5ZCm5a2Y5Zyo5YaF5Zyo55qE6YC76L6R57uf5LiA5ZKM5LqS55u45pSv5pKR77yfXG4gICAgKiAgIOWTgeeJjOWumuS9jSAoUG9zaXRpb25pbmcpIOaYr+WQpuS4juWTgeeJjOeQhuW/teS/neaMgeS4gOiHtO+8n1xuXG4yLiAgKirlk4HniYzooajovr7lsYLkuIDoh7TmgKcgKEJyYW5kIEV4cHJlc3Npb24gQ29uc2lzdGVuY3kpKio6XG4gICAgKiAgIOWTgeeJjOWPo+WPtyAoU2xvZ2FuKeOAgeivreiogOmjjuagvCAoTGFuZ3VhZ2UgU3R5bGUp44CB6LCD5oCnIChUb25lKSDmmK/lkKbnu5/kuIDvvJ9cbiAgICAqICAg5qC45b+D5L+h5oGvIChLZXkgTWVzc2FnZXMpIOWcqOS4jeWQjOS8oOaSrea4oOmBk+S4reaYr+WQpuS/neaMgeS4gOiHtO+8n1xuICAgICogICDlk4HniYzooajovr7mmK/lkKblh4bnoa7lj43mmKDkuoblk4HniYznkIblv7XlkozlrprkvY3vvJ9cblxuMy4gICoq6KeG6KeJ6K+G5Yir57O757uf5LiA6Ie05oCnIChWaXN1YWwgSWRlbnRpdHkgQ29uc2lzdGVuY3kpKio6XG4gICAgKiAgIOiJsuW9qSAoQ29sb3Ip44CB5a2X5L2TIChUeXBvZ3JhcGh5KeOAgeW4g+WxgCAoTGF5b3V0KeOAgeespuWPtyAoU3ltYm9sKSDnrYnop4bop4nlhYPntKDnmoTkvb/nlKjmmK/lkKbpgbXlvqrkuobnu5/kuIDnmoTop4TojIPvvJ9cbiAgICAqICAg6KeG6KeJ6aOO5qC85piv5ZCm54us54m577yM5bm26IO95Zyo5LyX5aSa5ZOB54mM5Lit6KKr5b+r6YCf6K+G5Yir77yfXG4gICAgKiAgIOinhuinieezu+e7n+aYr+WQpuacieaViOWcsOS8oOi+vuS6huWTgeeJjOS4quaAp+WSjOeQhuW/te+8n1xuXG40LiAgKiror63oqIDpo47moLzns7vnu5/kuIDoh7TmgKcgKExhbmd1YWdlIFN0eWxlIENvbnNpc3RlbmN5KSoqOlxuICAgICogICDlk4HniYznmoTlj6Plj7fjgIHlub/lkYrmlofmoYjjgIHnpL7kuqTlqpLkvZPlhoXlrrnjgIHlrqLmnI3msp/pgJror63oqIDmmK/lkKblsZXnjrDlh7rnu5/kuIDnmoTpo47moLzlkozosIPmgKfvvJ9cbiAgICAqICAg6K+t6KiA6aOO5qC85piv5ZCm5LiO55uu5qCH5Y+X5LyX55qE5rKf6YCa5Lmg5oOv55u45Yy56YWN77yfXG4gICAgKiAgIOS/oeaBr+S8oOmAkuaYr+WQpua4heaZsOOAgeWHhuehruOAgeaYk+S6jueQhuino++8n1xuXG41LiAgKirlk4HniYzmib/or7rkuI5SVELkuIDoh7TmgKcgKEJyYW5kIFByb21pc2UgJiBSVEIgQ29uc2lzdGVuY3kpKio6XG4gICAgKiAgIOWTgeeJjOaJv+ivuiAoUHJvbWlzZSkg5piv5ZCm5riF5pmw5piO56Gu77yM5bm25a+55raI6LS56ICF5pyJ5ZC45byV5Yqb77yfXG4gICAgKiAgIFJUQiAoUmVhc29uIHRvIEJlbGlldmUpIOaYr+WQpuiDveW8uuacieWKm+WcsOaUr+aSkeWTgeeJjOaJv+ivuu+8jOS9v+WFtuaYvuW+l+ecn+WunuWPr+S/oe+8n1xuICAgICogICDlk4HniYznmoTkuqflk4Ev5pyN5Yqh5L2T6aqMIChFeHBlcmllbmNlKSDmmK/lkKblhZHnjrDkuoblhbbmib/or7rvvJ9cblxuNi4gICoq55uu5qCH5Y+X5LyX5aWR5ZCI5bqmIChUYXJnZXQgQXVkaWVuY2UgQWxpZ25tZW50KSoqOlxuICAgICogICDlk4HniYznmoTmiYDmnInooajnjrDvvIjnkIblv7XjgIHop4bop4njgIHor63oqIDjgIHmib/or7rvvInmmK/lkKbog73kuI7nm67moIflj5fkvJcgKFRhcmdldCBBdWRpZW5jZSkg55qE5Lu35YC86KeC44CB5a6h576O5ZKM6ZyA5rGC5Lqn55Sf5YWx6bij77yfXG4gICAgKiAgIOS7juWuouaIt+WPjemmiCAoQ3VzdG9tZXIgRmVlZGJhY2spIOWSjOW4guWcuueglOeptiAoTWFya2V0IFJlc2VhcmNoKSDmlbDmja7mnaXnnIvvvIzlk4HniYzlnKjnm67moIfnlKjmiLflv4PkuK3nmoTorqTnn6UgKFBlcmNlcHRpb24pIOaYr+WQpuS4juWTgeeJjOaWueacn+acm+eahOS4gOiHtO+8n1xuXG43LiAgKirlk4HniYzmnrbmnoTlsYLnuqfpl7TljY/lkIzmgKcgKEhpZXJhcmNoeSBBbGlnbm1lbnQpKio6XG4gICAgKiAgIOi/meaYr+S4gOS4que7vOWQiOaAp+ivhOS8sOOAguivt+WIhuaekOS7peS4iiAqKueQhuW/teOAgeihqOi+vuOAgeinhuinieOAgeivreiogOOAgeaJv+ivuioqIOetieS4jeWQjOWxgue6p+S5i+mXtOaYr+WQpuebuOS6kuWNj+WQjOOAgeaXoOe8neaVtOWQiO+8jOWFseWQjOWhkemAoOS6huS4gOS4queri+S9k+OAgee7n+S4gOeahOWTgeeJjOW9ouixoe+8n1xuICAgICogICDkvovlpoLvvIzop4bop4norr7orqHmmK/lkKblvLrljJbkuoblk4HniYzlj6Plj7fvvJ/or63oqIDosIPmgKfmmK/lkKbkvZPnjrDkuoblk4HniYzku7flgLzop4LvvJ9cblxu6K+35bCG5L2g55qE5YiG5p6Q5pW05ZCI5oiQ5LiA5Lu95rWB55WF44CB5LiT5Lia55qE5oql5ZGK44CCXG5gO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IHRoaXMubGxtLnRleHQocHJvbXB0KTtcbiAgICAgIHJldHVybiByZXBvcnQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLnlJ/miJDkuIDoh7TmgKfliIbmnpDmiqXlkYrlpLHotKU6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBg55Sf5oiQ5oql5ZGK5aSx6LSlOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ+acquefpemUmeivryd9YDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5Z+65LqO5YiG5p6Q5oql5ZGK77yM5o+Q5Y+W5omA5pyJQnJhbmRDb25zaXN0ZW5jeU1ldHJpY3PnmoTor4TliIZcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXh0cmFjdENvbnNpc3RlbmN5U2NvcmVzRnJvbVJlcG9ydChyZXBvcnRUZXh0OiBzdHJpbmcpOiBQcm9taXNlPEJyYW5kQ29uc2lzdGVuY3lNZXRyaWNzPiB7XG4gICAgLy8g6I635Y+WQnJhbmRDb25zaXN0ZW5jeU1ldHJpY3PmiYDmnInlrZfmrrXnmoTmj4/ov7BcbiAgICBjb25zdCBhbGxNZXRyaWNOYW1lcyA9IFtcbiAgICAgICdtaXNzaW9uX2NsYXJpdHknLCAnbWlzc2lvbl9jb25zaXN0ZW5jeScsICd2aXNpb25fY2xhcml0eScsICd2aXNpb25fYXBwZWFsJyxcbiAgICAgICd2YWx1ZXNfY2xhcml0eScsICd2YWx1ZXNfYXV0aGVudGljaXR5JywgJ3N0eWxlX2NvbnNpc3RlbmN5JywgJ3RvbmVfYXBwcm9wcmlhdGVuZXNzJyxcbiAgICAgICdrZXl3b3JkX3JlY29nbml0aW9uJywgJ3NjZW5hcmlvX2FkYXB0YXRpb24nLCAnY29sb3JfY29uc2lzdGVuY3knLCAndHlwb2dyYXBoeV9jb25zaXN0ZW5jeScsXG4gICAgICAnbGF5b3V0X2NvbnNpc3RlbmN5JywgJ3N5bWJvbF9yZWNvZ25pdGlvbicsICd2aXN1YWxfYXBwZWFsJywgJ2xhbmd1YWdlX2NvbnNpc3RlbmN5JyxcbiAgICAgICdsYW5ndWFnZV9hcHByb3ByaWF0ZW5lc3MnLCAnc2xvZ2FuX21lbW9yYWJpbGl0eScsICdtZXNzYWdlX2NsYXJpdHknLCAncHJvbWlzZV9jbGFyaXR5JyxcbiAgICAgICdwcm9taXNlX2NyZWRpYmlsaXR5JywgJ2JlbmVmaXRfY2xhcml0eScsICdleHBlcmllbmNlX2NvaGVyZW5jZScsICdydGJfY2xhcml0eScsXG4gICAgICAncnRiX3VuaXF1ZW5lc3MnLCAncnRiX2NyZWRpYmlsaXR5JywgJ3BoaWxvc29waHlfdGFfYWxpZ25tZW50JywgJ3ZhbHVlc190YV9yZXNvbmFuY2UnLFxuICAgICAgJ3Zpc2lvbl90YV9hcHBlYWwnLCAncGhpbG9zb3BoeV9leHByZXNzaW9uX2FsaWdubWVudCcsICd2YWx1ZXNfdG9uZV9jb25zaXN0ZW5jeScsXG4gICAgICAnbWlzc2lvbl9rZXl3b3JkX2FsaWdubWVudCcsICdwaGlsb3NvcGh5X3Zpc3VhbF9hbGlnbm1lbnQnLCAndmFsdWVzX2NvbG9yX3N5bWJvbGlzbScsXG4gICAgICAndmlzaW9uX2Rlc2lnbl9oYXJtb255JywgJ3BoaWxvc29waHlfbGFuZ3VhZ2VfYWxpZ25tZW50JywgJ3ZhbHVlc19zbG9nYW5fY29uc2lzdGVuY3knLFxuICAgICAgJ21pc3Npb25fbWVzc2FnZV9jbGFyaXR5JywgJ2V4cHJlc3Npb25fdmlzdWFsX2hhcm1vbnknLCAndG9uZV92aXN1YWxfY29uc2lzdGVuY3knLFxuICAgICAgJ3N0eWxlX3N5bWJvbF9hbGlnbm1lbnQnLCAnZXhwcmVzc2lvbl9sYW5ndWFnZV9jb2hlcmVuY2UnLCAndG9uZV9sYW5ndWFnZV9tYXRjaGluZycsXG4gICAgICAnc3R5bGVfbWVzc2FnZV9jb25zaXN0ZW5jeScsICd2aXN1YWxfbGFuZ3VhZ2VfaW50ZWdyYXRpb24nLCAnY29sb3JfbGFuZ3VhZ2VfZW1vdGlvbicsXG4gICAgICAnc3ltYm9sX3Nsb2dhbl9zeW5lcmd5JywgJ3Byb21pc2VfcGhpbG9zb3BoeV9hbGlnbm1lbnQnLCAncHJvbWlzZV9leHByZXNzaW9uX2NvbnNpc3RlbmN5JyxcbiAgICAgICdwcm9taXNlX3Zpc3VhbF9zdXBwb3J0JywgJ3Byb21pc2VfbGFuZ3VhZ2VfY2xhcml0eScsICdydGJfcGhpbG9zb3BoeV9mb3VuZGF0aW9uJyxcbiAgICAgICdydGJfZXhwcmVzc2lvbl9yZWluZm9yY2VtZW50JywgJ3J0Yl92aXN1YWxfZXZpZGVuY2UnLCAncnRiX2xhbmd1YWdlX3BlcnN1YXNpb24nXG4gICAgXTtcblxuICAgIGNvbnN0IHByb21wdCA9IGBcbuS9nOS4uuS4gOWQjemHj+WMluWIhuaekOS4k+Wutu+8jOivt+S7lOe7humYheivu+S7peS4i+WTgeeJjOS4gOiHtOaAp+WIhuaekOaKpeWRiu+8jOW5tuWfuuS6juaKpeWRiuWGheWuue+8jOS4uuS4i+WIl+aJgOacieaMh+agh+i/m+ihjOeyvuehruivhOWIhuOAglxuXG4jIyMg5ZOB54mM5LiA6Ie05oCn5YiG5p6Q5oql5ZGKOlxuLS0tXG4ke3JlcG9ydFRleHR9XG4tLS1cblxuIyMjIOivhOWIhuimgeaxgjpcbjEuICAqKuivhOWIhuagh+WHhioqOiDor7flr7nku6XkuIvmr4/kuIDkuKrmjIfmoIfnu5nlh7ogKiowLTEwKiog5YiG55qE6K+E5YiG77yM5pSv5oyB5LiA5L2N5bCP5pWw44CCKiow5YiG5Luj6KGo5a6M5YWo5LiN5LiA6Ie05oiW57y65aSx77yMMTDliIbku6Pooajlroznvo7kuIDoh7QqKuOAglxuMi4gICoq6K+E5YiG5L6d5o2uKio6IOS9oOeahOivhOWIhuW/hemhu+S4peagvOS+neaNruS4iui/sOaKpeWRiueahOWGheWuueOAguivt+S7lOe7huWvu+aJvuaKpeWRiuS4reS4juWQhOaMh+agh+ebuOWFs+eahOiuuui/sO+8jOW5tuaNruatpOi/m+ihjOWIpOaWreOAglxuMy4gICoq5a6M5pW05oCnKio6ICoq5b+F6aG75Li65riF5Y2V5Lit55qE5q+P5LiA5Liq5oyH5qCH6YO95o+Q5L6b6K+E5YiGKirjgILlpoLmnpzmiqXlkYrkuK3msqHmnInnm7TmjqXmj5Dlj4rmn5DkuKrpnZ7luLjlhbfkvZPnmoTmjIfmoIfvvIzor7fmoLnmja7mnIDnm7jlhbPnmoTlro/op4LliIbmnpDov5vooYzmjqjmlq3lkozor4TkvLDjgIJcbjQuICAqKui+k+WHuuagvOW8jyoqOiDor7fku6XkuIDkuKpKU09O5a+56LGh55qE5b2i5byP6L+U5Zue5omA5pyJ6K+E5YiG77yMa2V55Li65oyH5qCH5ZCN56ew77yMdmFsdWXkuLror4TliIbjgILkuI3opoHmt7vliqDku7vkvZXpop3lpJbnmoTop6Pph4rmiJbms6jph4rjgIJcblxuIyMjIOW+heivhOWIhuaMh+agh+a4heWNlTpcblxcYFxcYFxcYGpzb25cbiR7SlNPTi5zdHJpbmdpZnkoYWxsTWV0cmljTmFtZXMsIG51bGwsIDIpfVxuXFxgXFxgXFxgXG5cbuivt+eOsOWcqOW8gOWni+ivhOWIhu+8jOW5tui/lOWbnuWujOaVtOeahEpTT07lr7nosaHjgIJcbmA7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2NvcmVzRGljdCA9IGF3YWl0IHRoaXMubGxtLmpzb24ocHJvbXB0KTtcblxuICAgICAgLy8g6aqM6K+B5bm25aGr5YWF6buY6K6k5YC8XG4gICAgICBjb25zdCBmaW5hbFNjb3JlczogYW55ID0ge307XG4gICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGFsbE1ldHJpY05hbWVzKSB7XG4gICAgICAgIGNvbnN0IHNjb3JlID0gc2NvcmVzRGljdFtmaWVsZF07XG4gICAgICAgIGlmICh0eXBlb2Ygc2NvcmUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgZmluYWxTY29yZXNbZmllbGRdID0gTWF0aC5tYXgoMC4wLCBNYXRoLm1pbigxMC4wLCBzY29yZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUud2Fybihg6K2m5ZGKOiDmjIfmoIcgJyR7ZmllbGR9JyDnmoTor4TliIbml6DmlYjmiJbnvLrlpLHvvIzkvb/nlKjpu5jorqTlgLw1LjBgKTtcbiAgICAgICAgICBmaW5hbFNjb3Jlc1tmaWVsZF0gPSA1LjA7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZpbmFsU2NvcmVzIGFzIEJyYW5kQ29uc2lzdGVuY3lNZXRyaWNzO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLku47miqXlkYrkuK3mj5Dlj5bkuIDoh7TmgKfor4TliIblpLHotKU6XCIsIGVycm9yKTtcbiAgICAgIC8vIOWcqOWksei0peaXtui/lOWbnuS4gOS4quaJgOacieivhOWIhuS4ujUuMOeahOm7mOiupOWvueixoVxuICAgICAgY29uc3QgZGVmYXVsdFNjb3JlczogYW55ID0ge307XG4gICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGFsbE1ldHJpY05hbWVzKSB7XG4gICAgICAgIGRlZmF1bHRTY29yZXNbZmllbGRdID0gNS4wO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRlZmF1bHRTY29yZXMgYXMgQnJhbmRDb25zaXN0ZW5jeU1ldHJpY3M7XG4gICAgfVxuICB9XG59ICJdLCJuYW1lcyI6WyJMTE0iLCJCcmFuZENvbnRlbnRBbmFseXplciIsImxsbSIsImFuYWx5emVCcmFuZENvbnNpc3RlbmN5IiwiYnJhbmREYXRhIiwiYW5hbHlzaXNSZXBvcnQiLCJnZW5lcmF0ZUNvbnNpc3RlbmN5QW5hbHlzaXNSZXBvcnQiLCJjb25zaXN0ZW5jeU1ldHJpY3MiLCJleHRyYWN0Q29uc2lzdGVuY3lTY29yZXNGcm9tUmVwb3J0IiwicmVwb3J0IiwibWV0cmljcyIsImJyYW5kRGF0YUpzb24iLCJKU09OIiwic3RyaW5naWZ5IiwicHJvbXB0IiwiYnJhbmRfbmFtZSIsInRleHQiLCJlcnJvciIsImNvbnNvbGUiLCJFcnJvciIsIm1lc3NhZ2UiLCJyZXBvcnRUZXh0IiwiYWxsTWV0cmljTmFtZXMiLCJzY29yZXNEaWN0IiwianNvbiIsImZpbmFsU2NvcmVzIiwiZmllbGQiLCJzY29yZSIsIk1hdGgiLCJtYXgiLCJtaW4iLCJ3YXJuIiwiZGVmYXVsdFNjb3JlcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/services/core/ConsistencyAnalyzer.ts\n");

/***/ }),

/***/ "(rsc)/./app/services/core/ConsistencyEvaluator.ts":
/*!***************************************************!*\
  !*** ./app/services/core/ConsistencyEvaluator.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BrandConsistencyEvaluator: () => (/* binding */ BrandConsistencyEvaluator)\n/* harmony export */ });\n/* harmony import */ var _LLM__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./LLM */ \"(rsc)/./app/services/core/LLM.ts\");\n/**\n * 品牌表达的一致性评价模块 - TypeScript版本\n * 评估品牌表达的一致性、风格调性、核心理念等要素\n */ \nclass BrandConsistencyEvaluator {\n    constructor(){\n        this.llm = new _LLM__WEBPACK_IMPORTED_MODULE_0__.LLM();\n        // 统一的权重配置，总和为1.0\n        this.weights = {\n            // 品牌理念 (20%)\n            brand_philosophy: {\n                mission_clarity: 0.03,\n                mission_consistency: 0.03,\n                vision_clarity: 0.03,\n                vision_appeal: 0.03,\n                values_clarity: 0.04,\n                values_authenticity: 0.04\n            },\n            // 品牌表达 (15%)\n            brand_expression: {\n                style_consistency: 0.04,\n                tone_appropriateness: 0.04,\n                keyword_recognition: 0.035,\n                scenario_adaptation: 0.035\n            },\n            // 视觉识别 (15%)\n            visual_identity: {\n                color_consistency: 0.03,\n                typography_consistency: 0.03,\n                layout_consistency: 0.03,\n                symbol_recognition: 0.03,\n                visual_appeal: 0.03\n            },\n            // 语言风格 (10%)\n            language_style: {\n                language_consistency: 0.025,\n                language_appropriateness: 0.025,\n                slogan_memorability: 0.025,\n                message_clarity: 0.025\n            },\n            // 品牌承诺 (10%)\n            brand_promise: {\n                promise_clarity: 0.025,\n                promise_credibility: 0.025,\n                benefit_clarity: 0.025,\n                experience_coherence: 0.025\n            },\n            // RTB (5%)\n            rtb: {\n                rtb_clarity: 0.02,\n                rtb_uniqueness: 0.015,\n                rtb_credibility: 0.015\n            },\n            // 目标受众契合度 (10%)\n            ta_alignment: {\n                philosophy_ta_alignment: 0.04,\n                values_ta_resonance: 0.03,\n                vision_ta_appeal: 0.03\n            },\n            // 层级间契合度 (15%)\n            hierarchy_alignment: {\n                philosophy_expression_alignment: 0.015,\n                philosophy_visual_alignment: 0.015,\n                philosophy_language_alignment: 0.015,\n                expression_visual_harmony: 0.015,\n                expression_language_coherence: 0.015,\n                visual_language_integration: 0.015,\n                promise_philosophy_alignment: 0.01,\n                promise_expression_consistency: 0.01,\n                promise_visual_support: 0.01,\n                rtb_expression_reinforcement: 0.01,\n                rtb_visual_evidence: 0.01,\n                values_tone_consistency: 0.005,\n                values_slogan_consistency: 0.005,\n                tone_language_matching: 0.005,\n                symbol_slogan_synergy: 0.005\n            }\n        };\n    }\n    /**\n   * 评估品牌屋一致性\n   */ async evaluateBrandHouse(metrics, analysisReport) {\n        // 1. 计算总分\n        const totalScore = this.calculateTotalScore(metrics);\n        // 2. 确定等级\n        const grade = this.getBrandHouseGrade(totalScore);\n        // 3. 生成SWOT分析\n        const swotAnalysis = await this.generateSWOTAnalysis(analysisReport);\n        // 4. 生成最终总结\n        const finalSummary = await this.generateFinalSummary(totalScore, grade, swotAnalysis, analysisReport);\n        return {\n            total_score: totalScore,\n            grade,\n            details: {\n                metrics,\n                swot_analysis: swotAnalysis,\n                final_summary: finalSummary\n            },\n            analysis_report: analysisReport,\n            swot_analysis: swotAnalysis,\n            final_summary: finalSummary\n        };\n    }\n    /**\n   * 计算总分\n   */ calculateTotalScore(metrics) {\n        let totalScore = 0;\n        // 遍历所有权重配置\n        for (const [category, categoryWeights] of Object.entries(this.weights)){\n            for (const [metric, weight] of Object.entries(categoryWeights)){\n                const score = metrics[metric] || 0;\n                totalScore += score * weight;\n            }\n        }\n        // 转换为0-100分制\n        return Math.round(totalScore * 10);\n    }\n    /**\n   * 生成SWOT分析\n   */ async generateSWOTAnalysis(analysisReport) {\n        const prompt = `\n基于以下品牌一致性分析报告，请生成SWOT分析：\n\n${analysisReport}\n\n请从以下四个维度进行分析：\n1. 优势 (Strengths): 品牌在一致性方面的强项\n2. 劣势 (Weaknesses): 品牌在一致性方面需要改进的地方\n3. 机会 (Opportunities): 可以进一步提升一致性的机会\n4. 威胁 (Threats): 可能影响品牌一致性的潜在威胁\n\n请以JSON格式返回，包含strengths、weaknesses、opportunities、threats四个数组。\n`;\n        try {\n            const result = await this.llm.json(prompt);\n            return {\n                strengths: result.strengths || [\n                    \"品牌理念清晰\",\n                    \"表达风格统一\"\n                ],\n                weaknesses: result.weaknesses || [\n                    \"需要加强视觉一致性\",\n                    \"语言风格有待统一\"\n                ],\n                opportunities: result.opportunities || [\n                    \"可以进一步优化品牌表达\",\n                    \"有机会提升用户体验\"\n                ],\n                threats: result.threats || [\n                    \"市场竞争激烈\",\n                    \"消费者需求变化快\"\n                ]\n            };\n        } catch (error) {\n            // 返回默认的SWOT分析\n            return {\n                strengths: [\n                    \"品牌理念清晰\",\n                    \"表达风格统一\"\n                ],\n                weaknesses: [\n                    \"需要加强视觉一致性\",\n                    \"语言风格有待统一\"\n                ],\n                opportunities: [\n                    \"可以进一步优化品牌表达\",\n                    \"有机会提升用户体验\"\n                ],\n                threats: [\n                    \"市场竞争激烈\",\n                    \"消费者需求变化快\"\n                ]\n            };\n        }\n    }\n    /**\n   * 生成最终总结\n   */ async generateFinalSummary(totalScore, grade, swotAnalysis, analysisReport) {\n        const prompt = `\n基于以下信息，生成品牌一致性评估的最终总结：\n\n总分: ${totalScore}/100\n等级: ${grade}\nSWOT分析: ${JSON.stringify(swotAnalysis, null, 2)}\n分析报告: ${analysisReport.substring(0, 500)}...\n\n请生成一个简洁、专业的总结，包含：\n1. 总体评价\n2. 主要优势\n3. 需要改进的地方\n4. 建议\n`;\n        try {\n            const summary = await this.llm.text(prompt);\n            return summary;\n        } catch (error) {\n            return `品牌一致性评估总结\n\n总分: ${totalScore}/100\n等级: ${grade}\n\n总体评价: 该品牌在一致性方面表现${totalScore >= 80 ? \"优秀\" : totalScore >= 60 ? \"良好\" : \"需要改进\"}。\n\n主要优势:\n- 品牌理念清晰明确\n- 表达风格相对统一\n- 目标受众契合度良好\n\n需要改进的地方:\n- 视觉识别系统需要进一步统一\n- 语言风格有待加强一致性\n- 层级间协同性需要提升\n\n建议:\n1. 制定统一的品牌视觉规范\n2. 建立完整的品牌语言体系\n3. 加强各层级间的协同配合\n4. 定期进行品牌一致性审查`;\n        }\n    }\n    /**\n   * 获取品牌屋等级\n   */ getBrandHouseGrade(score) {\n        if (score >= 90) return \"A+\";\n        if (score >= 80) return \"A\";\n        if (score >= 70) return \"B+\";\n        if (score >= 60) return \"B\";\n        if (score >= 50) return \"C+\";\n        if (score >= 40) return \"C\";\n        return \"D\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvc2VydmljZXMvY29yZS9Db25zaXN0ZW5jeUV2YWx1YXRvci50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7Q0FHQyxHQUUyQjtBQW1HckIsTUFBTUM7SUFJWCxhQUFjO1FBQ1osSUFBSSxDQUFDQyxHQUFHLEdBQUcsSUFBSUYscUNBQUdBO1FBRWxCLGlCQUFpQjtRQUNqQixJQUFJLENBQUNHLE9BQU8sR0FBRztZQUNiLGFBQWE7WUFDYkMsa0JBQWtCO2dCQUNoQkMsaUJBQWlCO2dCQUNqQkMscUJBQXFCO2dCQUNyQkMsZ0JBQWdCO2dCQUNoQkMsZUFBZTtnQkFDZkMsZ0JBQWdCO2dCQUNoQkMscUJBQXFCO1lBQ3ZCO1lBQ0EsYUFBYTtZQUNiQyxrQkFBa0I7Z0JBQ2hCQyxtQkFBbUI7Z0JBQ25CQyxzQkFBc0I7Z0JBQ3RCQyxxQkFBcUI7Z0JBQ3JCQyxxQkFBcUI7WUFDdkI7WUFDQSxhQUFhO1lBQ2JDLGlCQUFpQjtnQkFDZkMsbUJBQW1CO2dCQUNuQkMsd0JBQXdCO2dCQUN4QkMsb0JBQW9CO2dCQUNwQkMsb0JBQW9CO2dCQUNwQkMsZUFBZTtZQUNqQjtZQUNBLGFBQWE7WUFDYkMsZ0JBQWdCO2dCQUNkQyxzQkFBc0I7Z0JBQ3RCQywwQkFBMEI7Z0JBQzFCQyxxQkFBcUI7Z0JBQ3JCQyxpQkFBaUI7WUFDbkI7WUFDQSxhQUFhO1lBQ2JDLGVBQWU7Z0JBQ2JDLGlCQUFpQjtnQkFDakJDLHFCQUFxQjtnQkFDckJDLGlCQUFpQjtnQkFDakJDLHNCQUFzQjtZQUN4QjtZQUNBLFdBQVc7WUFDWEMsS0FBSztnQkFDSEMsYUFBYTtnQkFDYkMsZ0JBQWdCO2dCQUNoQkMsaUJBQWlCO1lBQ25CO1lBQ0EsZ0JBQWdCO1lBQ2hCQyxjQUFjO2dCQUNaQyx5QkFBeUI7Z0JBQ3pCQyxxQkFBcUI7Z0JBQ3JCQyxrQkFBa0I7WUFDcEI7WUFDQSxlQUFlO1lBQ2ZDLHFCQUFxQjtnQkFDbkJDLGlDQUFpQztnQkFDakNDLDZCQUE2QjtnQkFDN0JDLCtCQUErQjtn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QUNwQyxPQUFPVztRQUNULEVBQUUsT0FBT0osT0FBTztZQUNkLE9BQU8sQ0FBQzs7SUFFVixFQUFFN0IsV0FBVztJQUNiLEVBQUVFLE1BQU07O2lCQUVLLEVBQ1RGLGNBQWMsS0FBSyxPQUFPQSxjQUFjLEtBQUssT0FBTyxPQUNyRDs7Ozs7Ozs7Ozs7Ozs7OztjQWdCTyxDQUFDO1FBQ1g7SUFDRjtJQUVBOztHQUVDLEdBQ0QsbUJBQTJCbUIsS0FBYSxFQUFVO1FBQ2hELElBQUlBLFNBQVMsSUFBSSxPQUFPO1FBQ3hCLElBQUlBLFNBQVMsSUFBSSxPQUFPO1FBQ3hCLElBQUlBLFNBQVMsSUFBSSxPQUFPO1FBQ3hCLElBQUlBLFNBQVMsSUFBSSxPQUFPO1FBQ3hCLElBQUlBLFNBQVMsSUFBSSxPQUFPO1FBQ3hCLElBQUlBLFNBQVMsSUFBSSxPQUFPO1FBQ3hCLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvd2FuZ2VuaXVzL0RvY3VtZW50cy90d2lua2xlL3R5cGVzY3JpcHQtYnJhbmR2YWx1ZS9hcHAvc2VydmljZXMvY29yZS9Db25zaXN0ZW5jeUV2YWx1YXRvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOWTgeeJjOihqOi+vueahOS4gOiHtOaAp+ivhOS7t+aooeWdlyAtIFR5cGVTY3JpcHTniYjmnKxcbiAqIOivhOS8sOWTgeeJjOihqOi+vueahOS4gOiHtOaAp+OAgemjjuagvOiwg+aAp+OAgeaguOW/g+eQhuW/teetieimgee0oFxuICovXG5cbmltcG9ydCB7IExMTSB9IGZyb20gXCIuL0xMTVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJyYW5kQ29uc2lzdGVuY3lNZXRyaWNzIHtcbiAgLy8g5ZOB54mM55CG5b+15bGC6Z2iXG4gIG1pc3Npb25fY2xhcml0eTogbnVtYmVyO1xuICBtaXNzaW9uX2NvbnNpc3RlbmN5OiBudW1iZXI7XG4gIHZpc2lvbl9jbGFyaXR5OiBudW1iZXI7XG4gIHZpc2lvbl9hcHBlYWw6IG51bWJlcjtcbiAgdmFsdWVzX2NsYXJpdHk6IG51bWJlcjtcbiAgdmFsdWVzX2F1dGhlbnRpY2l0eTogbnVtYmVyO1xuXG4gIC8vIOWTgeeJjOihqOi+vuWxgumdolxuICBzdHlsZV9jb25zaXN0ZW5jeTogbnVtYmVyO1xuICB0b25lX2FwcHJvcHJpYXRlbmVzczogbnVtYmVyO1xuICBrZXl3b3JkX3JlY29nbml0aW9uOiBudW1iZXI7XG4gIHNjZW5hcmlvX2FkYXB0YXRpb246IG51bWJlcjtcblxuICAvLyDop4bop4nor4bliKvlsYLpnaJcbiAgY29sb3JfY29uc2lzdGVuY3k6IG51bWJlcjtcbiAgdHlwb2dyYXBoeV9jb25zaXN0ZW5jeTogbnVtYmVyO1xuICBsYXlvdXRfY29uc2lzdGVuY3k6IG51bWJlcjtcbiAgc3ltYm9sX3JlY29nbml0aW9uOiBudW1iZXI7XG4gIHZpc3VhbF9hcHBlYWw6IG51bWJlcjtcblxuICAvLyDor63oqIDpo47moLzlsYLpnaJcbiAgbGFuZ3VhZ2VfY29uc2lzdGVuY3k6IG51bWJlcjtcbiAgbGFuZ3VhZ2VfYXBwcm9wcmlhdGVuZXNzOiBudW1iZXI7XG4gIHNsb2dhbl9tZW1vcmFiaWxpdHk6IG51bWJlcjtcbiAgbWVzc2FnZV9jbGFyaXR5OiBudW1iZXI7XG5cbiAgLy8g5ZOB54mM5om/6K+65bGC6Z2iXG4gIHByb21pc2VfY2xhcml0eTogbnVtYmVyO1xuICBwcm9taXNlX2NyZWRpYmlsaXR5OiBudW1iZXI7XG4gIGJlbmVmaXRfY2xhcml0eTogbnVtYmVyO1xuICBleHBlcmllbmNlX2NvaGVyZW5jZTogbnVtYmVyO1xuXG4gIC8vIFJUQuWxgumdolxuICBydGJfY2xhcml0eTogbnVtYmVyO1xuICBydGJfdW5pcXVlbmVzczogbnVtYmVyO1xuICBydGJfY3JlZGliaWxpdHk6IG51bWJlcjtcblxuICAvLyDnm67moIflj5fkvJflpZHlkIjluqZcbiAgcGhpbG9zb3BoeV90YV9hbGlnbm1lbnQ6IG51bWJlcjtcbiAgdmFsdWVzX3RhX3Jlc29uYW5jZTogbnVtYmVyO1xuICB2aXNpb25fdGFfYXBwZWFsOiBudW1iZXI7XG5cbiAgLy8g5bGC57qn6Ze05aWR5ZCI5bqmXG4gIHBoaWxvc29waHlfZXhwcmVzc2lvbl9hbGlnbm1lbnQ6IG51bWJlcjtcbiAgdmFsdWVzX3RvbmVfY29uc2lzdGVuY3k6IG51bWJlcjtcbiAgbWlzc2lvbl9rZXl3b3JkX2FsaWdubWVudDogbnVtYmVyO1xuICBwaGlsb3NvcGh5X3Zpc3VhbF9hbGlnbm1lbnQ6IG51bWJlcjtcbiAgdmFsdWVzX2NvbG9yX3N5bWJvbGlzbTogbnVtYmVyO1xuICB2aXNpb25fZGVzaWduX2hhcm1vbnk6IG51bWJlcjtcbiAgcGhpbG9zb3BoeV9sYW5ndWFnZV9hbGlnbm1lbnQ6IG51bWJlcjtcbiAgdmFsdWVzX3Nsb2dhbl9jb25zaXN0ZW5jeTogbnVtYmVyO1xuICBtaXNzaW9uX21lc3NhZ2VfY2xhcml0eTogbnVtYmVyO1xuICBleHByZXNzaW9uX3Zpc3VhbF9oYXJtb255OiBudW1iZXI7XG4gIHRvbmVfdmlzdWFsX2NvbnNpc3RlbmN5OiBudW1iZXI7XG4gIHN0eWxlX3N5bWJvbF9hbGlnbm1lbnQ6IG51bWJlcjtcbiAgZXhwcmVzc2lvbl9sYW5ndWFnZV9jb2hlcmVuY2U6IG51bWJlcjtcbiAgdG9uZV9sYW5ndWFnZV9tYXRjaGluZzogbnVtYmVyO1xuICBzdHlsZV9tZXNzYWdlX2NvbnNpc3RlbmN5OiBudW1iZXI7XG4gIHZpc3VhbF9sYW5ndWFnZV9pbnRlZ3JhdGlvbjogbnVtYmVyO1xuICBjb2xvcl9sYW5ndWFnZV9lbW90aW9uOiBudW1iZXI7XG4gIHN5bWJvbF9zbG9nYW5fc3luZXJneTogbnVtYmVyO1xuICBwcm9taXNlX3BoaWxvc29waHlfYWxpZ25tZW50OiBudW1iZXI7XG4gIHByb21pc2VfZXhwcmVzc2lvbl9jb25zaXN0ZW5jeTogbnVtYmVyO1xuICBwcm9taXNlX3Zpc3VhbF9zdXBwb3J0OiBudW1iZXI7XG4gIHByb21pc2VfbGFuZ3VhZ2VfY2xhcml0eTogbnVtYmVyO1xuICBydGJfcGhpbG9zb3BoeV9mb3VuZGF0aW9uOiBudW1iZXI7XG4gIHJ0Yl9leHByZXNzaW9uX3JlaW5mb3JjZW1lbnQ6IG51bWJlcjtcbiAgcnRiX3Zpc3VhbF9ldmlkZW5jZTogbnVtYmVyO1xuICBydGJfbGFuZ3VhZ2VfcGVyc3Vhc2lvbjogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEV2YWx1YXRpb25Db250ZXh0IHtcbiAgY29udGVudDogYW55O1xuICBhbmFseXNpczogc3RyaW5nO1xuICBzdHJlbmd0aHM6IHN0cmluZ1tdO1xuICB3ZWFrbmVzc2VzOiBzdHJpbmdbXTtcbiAgc2NvcmU6IG51bWJlcjtcbiAgcmVhc29uczogc3RyaW5nW107XG4gIHN1Z2dlc3Rpb25zOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb25zaXN0ZW5jeVJlc3VsdCB7XG4gIHRvdGFsX3Njb3JlOiBudW1iZXI7XG4gIGdyYWRlOiBzdHJpbmc7XG4gIGRldGFpbHM6IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIGFuYWx5c2lzX3JlcG9ydDogc3RyaW5nO1xuICBzd290X2FuYWx5c2lzPzoge1xuICAgIHN0cmVuZ3Roczogc3RyaW5nW107XG4gICAgd2Vha25lc3Nlczogc3RyaW5nW107XG4gICAgb3Bwb3J0dW5pdGllczogc3RyaW5nW107XG4gICAgdGhyZWF0czogc3RyaW5nW107XG4gIH07XG4gIGZpbmFsX3N1bW1hcnk/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBCcmFuZENvbnNpc3RlbmN5RXZhbHVhdG9yIHtcbiAgcHJpdmF0ZSBsbG06IExMTTtcbiAgcHJpdmF0ZSB3ZWlnaHRzOiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+PjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmxsbSA9IG5ldyBMTE0oKTtcblxuICAgIC8vIOe7n+S4gOeahOadg+mHjemFjee9ru+8jOaAu+WSjOS4ujEuMFxuICAgIHRoaXMud2VpZ2h0cyA9IHtcbiAgICAgIC8vIOWTgeeJjOeQhuW/tSAoMjAlKVxuICAgICAgYnJhbmRfcGhpbG9zb3BoeToge1xuICAgICAgICBtaXNzaW9uX2NsYXJpdHk6IDAuMDMsXG4gICAgICAgIG1pc3Npb25fY29uc2lzdGVuY3k6IDAuMDMsXG4gICAgICAgIHZpc2lvbl9jbGFyaXR5OiAwLjAzLFxuICAgICAgICB2aXNpb25fYXBwZWFsOiAwLjAzLFxuICAgICAgICB2YWx1ZXNfY2xhcml0eTogMC4wNCxcbiAgICAgICAgdmFsdWVzX2F1dGhlbnRpY2l0eTogMC4wNCxcbiAgICAgIH0sXG4gICAgICAvLyDlk4HniYzooajovr4gKDE1JSlcbiAgICAgIGJyYW5kX2V4cHJlc3Npb246IHtcbiAgICAgICAgc3R5bGVfY29uc2lzdGVuY3k6IDAuMDQsXG4gICAgICAgIHRvbmVfYXBwcm9wcmlhdGVuZXNzOiAwLjA0LFxuICAgICAgICBrZXl3b3JkX3JlY29nbml0aW9uOiAwLjAzNSxcbiAgICAgICAgc2NlbmFyaW9fYWRhcHRhdGlvbjogMC4wMzUsXG4gICAgICB9LFxuICAgICAgLy8g6KeG6KeJ6K+G5YirICgxNSUpXG4gICAgICB2aXN1YWxfaWRlbnRpdHk6IHtcbiAgICAgICAgY29sb3JfY29uc2lzdGVuY3k6IDAuMDMsXG4gICAgICAgIHR5cG9ncmFwaHlfY29uc2lzdGVuY3k6IDAuMDMsXG4gICAgICAgIGxheW91dF9jb25zaXN0ZW5jeTogMC4wMyxcbiAgICAgICAgc3ltYm9sX3JlY29nbml0aW9uOiAwLjAzLFxuICAgICAgICB2aXN1YWxfYXBwZWFsOiAwLjAzLFxuICAgICAgfSxcbiAgICAgIC8vIOivreiogOmjjuagvCAoMTAlKVxuICAgICAgbGFuZ3VhZ2Vfc3R5bGU6IHtcbiAgICAgICAgbGFuZ3VhZ2VfY29uc2lzdGVuY3k6IDAuMDI1LFxuICAgICAgICBsYW5ndWFnZV9hcHByb3ByaWF0ZW5lc3M6IDAuMDI1LFxuICAgICAgICBzbG9nYW5fbWVtb3JhYmlsaXR5OiAwLjAyNSxcbiAgICAgICAgbWVzc2FnZV9jbGFyaXR5OiAwLjAyNSxcbiAgICAgIH0sXG4gICAgICAvLyDlk4HniYzmib/or7ogKDEwJSlcbiAgICAgIGJyYW5kX3Byb21pc2U6IHtcbiAgICAgICAgcHJvbWlzZV9jbGFyaXR5OiAwLjAyNSxcbiAgICAgICAgcHJvbWlzZV9jcmVkaWJpbGl0eTogMC4wMjUsXG4gICAgICAgIGJlbmVmaXRfY2xhcml0eTogMC4wMjUsXG4gICAgICAgIGV4cGVyaWVuY2VfY29oZXJlbmNlOiAwLjAyNSxcbiAgICAgIH0sXG4gICAgICAvLyBSVEIgKDUlKVxuICAgICAgcnRiOiB7XG4gICAgICAgIHJ0Yl9jbGFyaXR5OiAwLjAyLFxuICAgICAgICBydGJfdW5pcXVlbmVzczogMC4wMTUsXG4gICAgICAgIHJ0Yl9jcmVkaWJpbGl0eTogMC4wMTUsXG4gICAgICB9LFxuICAgICAgLy8g55uu5qCH5Y+X5LyX5aWR5ZCI5bqmICgxMCUpXG4gICAgICB0YV9hbGlnbm1lbnQ6IHtcbiAgICAgICAgcGhpbG9zb3BoeV90YV9hbGlnbm1lbnQ6IDAuMDQsXG4gICAgICAgIHZhbHVlc190YV9yZXNvbmFuY2U6IDAuMDMsXG4gICAgICAgIHZpc2lvbl90YV9hcHBlYWw6IDAuMDMsXG4gICAgICB9LFxuICAgICAgLy8g5bGC57qn6Ze05aWR5ZCI5bqmICgxNSUpXG4gICAgICBoaWVyYXJjaHlfYWxpZ25tZW50OiB7XG4gICAgICAgIHBoaWxvc29waHlfZXhwcmVzc2lvbl9hbGlnbm1lbnQ6IDAuMDE1LFxuICAgICAgICBwaGlsb3NvcGh5X3Zpc3VhbF9hbGlnbm1lbnQ6IDAuMDE1LFxuICAgICAgICBwaGlsb3NvcGh5X2xhbmd1YWdlX2FsaWdubWVudDogMC4wMTUsXG4gICAgICAgIGV4cHJlc3Npb25fdmlzdWFsX2hhcm1vbnk6IDAuMDE1LFxuICAgICAgICBleHByZXNzaW9uX2xhbmd1YWdlX2NvaGVyZW5jZTogMC4wMTUsXG4gICAgICAgIHZpc3VhbF9sYW5ndWFnZV9pbnRlZ3JhdGlvbjogMC4wMTUsXG4gICAgICAgIHByb21pc2VfcGhpbG9zb3BoeV9hbGlnbm1lbnQ6IDAuMDEsXG4gICAgICAgIHByb21pc2VfZXhwcmVzc2lvbl9jb25zaXN0ZW5jeTogMC4wMSxcbiAgICAgICAgcHJvbWlzZV92aXN1YWxfc3VwcG9ydDogMC4wMSxcbiAgICAgICAgcnRiX2V4cHJlc3Npb25fcmVpbmZvcmNlbWVudDogMC4wMSxcbiAgICAgICAgcnRiX3Zpc3VhbF9ldmlkZW5jZTogMC4wMSxcbiAgICAgICAgdmFsdWVzX3RvbmVfY29uc2lzdGVuY3k6IDAuMDA1LFxuICAgICAgICB2YWx1ZXNfc2xvZ2FuX2NvbnNpc3RlbmN5OiAwLjAwNSxcbiAgICAgICAgdG9uZV9sYW5ndWFnZV9tYXRjaGluZzogMC4wMDUsXG4gICAgICAgIHN5bWJvbF9zbG9nYW5fc3luZXJneTogMC4wMDUsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICog6K+E5Lyw5ZOB54mM5bGL5LiA6Ie05oCnXG4gICAqL1xuICBhc3luYyBldmFsdWF0ZUJyYW5kSG91c2UoXG4gICAgbWV0cmljczogQnJhbmRDb25zaXN0ZW5jeU1ldHJpY3MsXG4gICAgYW5hbHlzaXNSZXBvcnQ6IHN0cmluZ1xuICApOiBQcm9taXNlPENvbnNpc3RlbmN5UmVzdWx0PiB7XG4gICAgLy8gMS4g6K6h566X5oC75YiGXG4gICAgY29uc3QgdG90YWxTY29yZSA9IHRoaXMuY2FsY3VsYXRlVG90YWxTY29yZShtZXRyaWNzKTtcblxuICAgIC8vIDIuIOehruWumuetiee6p1xuICAgIGNvbnN0IGdyYWRlID0gdGhpcy5nZXRCcmFuZEhvdXNlR3JhZGUodG90YWxTY29yZSk7XG5cbiAgICAvLyAzLiDnlJ/miJBTV09U5YiG5p6QXG4gICAgY29uc3Qgc3dvdEFuYWx5c2lzID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVNXT1RBbmFseXNpcyhhbmFseXNpc1JlcG9ydCk7XG5cbiAgICAvLyA0LiDnlJ/miJDmnIDnu4jmgLvnu5NcbiAgICBjb25zdCBmaW5hbFN1bW1hcnkgPSBhd2FpdCB0aGlzLmdlbmVyYXRlRmluYWxTdW1tYXJ5KFxuICAgICAgdG90YWxTY29yZSxcbiAgICAgIGdyYWRlLFxuICAgICAgc3dvdEFuYWx5c2lzLFxuICAgICAgYW5hbHlzaXNSZXBvcnRcbiAgICApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsX3Njb3JlOiB0b3RhbFNjb3JlLFxuICAgICAgZ3JhZGUsXG4gICAgICBkZXRhaWxzOiB7XG4gICAgICAgIG1ldHJpY3MsXG4gICAgICAgIHN3b3RfYW5hbHlzaXM6IHN3b3RBbmFseXNpcyxcbiAgICAgICAgZmluYWxfc3VtbWFyeTogZmluYWxTdW1tYXJ5LFxuICAgICAgfSxcbiAgICAgIGFuYWx5c2lzX3JlcG9ydDogYW5hbHlzaXNSZXBvcnQsXG4gICAgICBzd290X2FuYWx5c2lzOiBzd290QW5hbHlzaXMsXG4gICAgICBmaW5hbF9zdW1tYXJ5OiBmaW5hbFN1bW1hcnksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiDorqHnrpfmgLvliIZcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlVG90YWxTY29yZShtZXRyaWNzOiBCcmFuZENvbnNpc3RlbmN5TWV0cmljcyk6IG51bWJlciB7XG4gICAgbGV0IHRvdGFsU2NvcmUgPSAwO1xuXG4gICAgLy8g6YGN5Y6G5omA5pyJ5p2D6YeN6YWN572uXG4gICAgZm9yIChjb25zdCBbY2F0ZWdvcnksIGNhdGVnb3J5V2VpZ2h0c10gb2YgT2JqZWN0LmVudHJpZXModGhpcy53ZWlnaHRzKSkge1xuICAgICAgZm9yIChjb25zdCBbbWV0cmljLCB3ZWlnaHRdIG9mIE9iamVjdC5lbnRyaWVzKGNhdGVnb3J5V2VpZ2h0cykpIHtcbiAgICAgICAgY29uc3Qgc2NvcmUgPSAobWV0cmljcyBhcyBhbnkpW21ldHJpY10gfHwgMDtcbiAgICAgICAgdG90YWxTY29yZSArPSBzY29yZSAqIHdlaWdodDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDovazmjaLkuLowLTEwMOWIhuWItlxuICAgIHJldHVybiBNYXRoLnJvdW5kKHRvdGFsU2NvcmUgKiAxMCk7XG4gIH1cblxuICAvKipcbiAgICog55Sf5oiQU1dPVOWIhuaekFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVNXT1RBbmFseXNpcyhhbmFseXNpc1JlcG9ydDogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgc3RyZW5ndGhzOiBzdHJpbmdbXTtcbiAgICB3ZWFrbmVzc2VzOiBzdHJpbmdbXTtcbiAgICBvcHBvcnR1bml0aWVzOiBzdHJpbmdbXTtcbiAgICB0aHJlYXRzOiBzdHJpbmdbXTtcbiAgfT4ge1xuICAgIGNvbnN0IHByb21wdCA9IGBcbuWfuuS6juS7peS4i+WTgeeJjOS4gOiHtOaAp+WIhuaekOaKpeWRiu+8jOivt+eUn+aIkFNXT1TliIbmnpDvvJpcblxuJHthbmFseXNpc1JlcG9ydH1cblxu6K+35LuO5Lul5LiL5Zub5Liq57u05bqm6L+b6KGM5YiG5p6Q77yaXG4xLiDkvJjlir8gKFN0cmVuZ3Rocyk6IOWTgeeJjOWcqOS4gOiHtOaAp+aWuemdoueahOW8uumhuVxuMi4g5Yqj5Yq/IChXZWFrbmVzc2VzKTog5ZOB54mM5Zyo5LiA6Ie05oCn5pa56Z2i6ZyA6KaB5pS56L+b55qE5Zyw5pa5XG4zLiDmnLrkvJogKE9wcG9ydHVuaXRpZXMpOiDlj6/ku6Xov5vkuIDmraXmj5DljYfkuIDoh7TmgKfnmoTmnLrkvJpcbjQuIOWogeiDgSAoVGhyZWF0cyk6IOWPr+iDveW9seWTjeWTgeeJjOS4gOiHtOaAp+eahOa9nOWcqOWogeiDgVxuXG7or7fku6VKU09O5qC85byP6L+U5Zue77yM5YyF5ZCrc3RyZW5ndGhz44CBd2Vha25lc3Nlc+OAgW9wcG9ydHVuaXRpZXPjgIF0aHJlYXRz5Zub5Liq5pWw57uE44CCXG5gO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubGxtLmpzb24ocHJvbXB0KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RyZW5ndGhzOiByZXN1bHQuc3RyZW5ndGhzIHx8IFtcIuWTgeeJjOeQhuW/tea4heaZsFwiLCBcIuihqOi+vumjjuagvOe7n+S4gFwiXSxcbiAgICAgICAgd2Vha25lc3NlczogcmVzdWx0LndlYWtuZXNzZXMgfHwgW1xuICAgICAgICAgIFwi6ZyA6KaB5Yqg5by66KeG6KeJ5LiA6Ie05oCnXCIsXG4gICAgICAgICAgXCLor63oqIDpo47moLzmnInlvoXnu5/kuIBcIixcbiAgICAgICAgXSxcbiAgICAgICAgb3Bwb3J0dW5pdGllczogcmVzdWx0Lm9wcG9ydHVuaXRpZXMgfHwgW1xuICAgICAgICAgIFwi5Y+v5Lul6L+b5LiA5q2l5LyY5YyW5ZOB54mM6KGo6L6+XCIsXG4gICAgICAgICAgXCLmnInmnLrkvJrmj5DljYfnlKjmiLfkvZPpqoxcIixcbiAgICAgICAgXSxcbiAgICAgICAgdGhyZWF0czogcmVzdWx0LnRocmVhdHMgfHwgW1wi5biC5Zy656ue5LqJ5r+A54OIXCIsIFwi5raI6LS56ICF6ZyA5rGC5Y+Y5YyW5b+rXCJdLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8g6L+U5Zue6buY6K6k55qEU1dPVOWIhuaekFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RyZW5ndGhzOiBbXCLlk4HniYznkIblv7XmuIXmmbBcIiwgXCLooajovr7po47moLznu5/kuIBcIl0sXG4gICAgICAgIHdlYWtuZXNzZXM6IFtcIumcgOimgeWKoOW8uuinhuinieS4gOiHtOaAp1wiLCBcIuivreiogOmjjuagvOacieW+hee7n+S4gFwiXSxcbiAgICAgICAgb3Bwb3J0dW5pdGllczogW1wi5Y+v5Lul6L+b5LiA5q2l5LyY5YyW5ZOB54mM6KGo6L6+XCIsIFwi5pyJ5py65Lya5o+Q5Y2H55So5oi35L2T6aqMXCJdLFxuICAgICAgICB0aHJlYXRzOiBbXCLluILlnLrnq57kuonmv4Dng4hcIiwgXCLmtojotLnogIXpnIDmsYLlj5jljJblv6tcIl0sXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDnlJ/miJDmnIDnu4jmgLvnu5NcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVGaW5hbFN1bW1hcnkoXG4gICAgdG90YWxTY29yZTogbnVtYmVyLFxuICAgIGdyYWRlOiBzdHJpbmcsXG4gICAgc3dvdEFuYWx5c2lzOiBhbnksXG4gICAgYW5hbHlzaXNSZXBvcnQ6IHN0cmluZ1xuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHByb21wdCA9IGBcbuWfuuS6juS7peS4i+S/oeaBr++8jOeUn+aIkOWTgeeJjOS4gOiHtOaAp+ivhOS8sOeahOacgOe7iOaAu+e7k++8mlxuXG7mgLvliIY6ICR7dG90YWxTY29yZX0vMTAwXG7nrYnnuqc6ICR7Z3JhZGV9XG5TV09U5YiG5p6QOiAke0pTT04uc3RyaW5naWZ5KHN3b3RBbmFseXNpcywgbnVsbCwgMil9XG7liIbmnpDmiqXlkYo6ICR7YW5hbHlzaXNSZXBvcnQuc3Vic3RyaW5nKDAsIDUwMCl9Li4uXG5cbuivt+eUn+aIkOS4gOS4queugOa0geOAgeS4k+S4mueahOaAu+e7k++8jOWMheWQq++8mlxuMS4g5oC75L2T6K+E5Lu3XG4yLiDkuLvopoHkvJjlir9cbjMuIOmcgOimgeaUuei/m+eahOWcsOaWuVxuNC4g5bu66K6uXG5gO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBhd2FpdCB0aGlzLmxsbS50ZXh0KHByb21wdCk7XG4gICAgICByZXR1cm4gc3VtbWFyeTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIGDlk4HniYzkuIDoh7TmgKfor4TkvLDmgLvnu5Ncblxu5oC75YiGOiAke3RvdGFsU2NvcmV9LzEwMFxu562J57qnOiAke2dyYWRlfVxuXG7mgLvkvZPor4Tku7c6IOivpeWTgeeJjOWcqOS4gOiHtOaAp+aWuemdouihqOeOsCR7XG4gICAgICAgIHRvdGFsU2NvcmUgPj0gODAgPyBcIuS8mOengFwiIDogdG90YWxTY29yZSA+PSA2MCA/IFwi6Imv5aW9XCIgOiBcIumcgOimgeaUuei/m1wiXG4gICAgICB944CCXG5cbuS4u+imgeS8mOWKvzpcbi0g5ZOB54mM55CG5b+15riF5pmw5piO56GuXG4tIOihqOi+vumjjuagvOebuOWvuee7n+S4gFxuLSDnm67moIflj5fkvJflpZHlkIjluqboia/lpb1cblxu6ZyA6KaB5pS56L+b55qE5Zyw5pa5OlxuLSDop4bop4nor4bliKvns7vnu5/pnIDopoHov5vkuIDmraXnu5/kuIBcbi0g6K+t6KiA6aOO5qC85pyJ5b6F5Yqg5by65LiA6Ie05oCnXG4tIOWxgue6p+mXtOWNj+WQjOaAp+mcgOimgeaPkOWNh1xuXG7lu7rorq46XG4xLiDliLblrprnu5/kuIDnmoTlk4HniYzop4bop4nop4TojINcbjIuIOW7uueri+WujOaVtOeahOWTgeeJjOivreiogOS9k+ezu1xuMy4g5Yqg5by65ZCE5bGC57qn6Ze055qE5Y2P5ZCM6YWN5ZCIXG40LiDlrprmnJ/ov5vooYzlk4HniYzkuIDoh7TmgKflrqHmn6VgO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5blk4HniYzlsYvnrYnnuqdcbiAgICovXG4gIHByaXZhdGUgZ2V0QnJhbmRIb3VzZUdyYWRlKHNjb3JlOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmIChzY29yZSA+PSA5MCkgcmV0dXJuIFwiQStcIjtcbiAgICBpZiAoc2NvcmUgPj0gODApIHJldHVybiBcIkFcIjtcbiAgICBpZiAoc2NvcmUgPj0gNzApIHJldHVybiBcIkIrXCI7XG4gICAgaWYgKHNjb3JlID49IDYwKSByZXR1cm4gXCJCXCI7XG4gICAgaWYgKHNjb3JlID49IDUwKSByZXR1cm4gXCJDK1wiO1xuICAgIGlmIChzY29yZSA+PSA0MCkgcmV0dXJuIFwiQ1wiO1xuICAgIHJldHVybiBcIkRcIjtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkxMTSIsIkJyYW5kQ29uc2lzdGVuY3lFdmFsdWF0b3IiLCJsbG0iLCJ3ZWlnaHRzIiwiYnJhbmRfcGhpbG9zb3BoeSIsIm1pc3Npb25fY2xhcml0eSIsIm1pc3Npb25fY29uc2lzdGVuY3kiLCJ2aXNpb25fY2xhcml0eSIsInZpc2lvbl9hcHBlYWwiLCJ2YWx1ZXNfY2xhcml0eSIsInZhbHVlc19hdXRoZW50aWNpdHkiLCJicmFuZF9leHByZXNzaW9uIiwic3R5bGVfY29uc2lzdGVuY3kiLCJ0b25lX2FwcHJvcHJpYXRlbmVzcyIsImtleXdvcmRfcmVjb2duaXRpb24iLCJzY2VuYXJpb19hZGFwdGF0aW9uIiwidmlzdWFsX2lkZW50aXR5IiwiY29sb3JfY29uc2lzdGVuY3kiLCJ0eXBvZ3JhcGh5X2NvbnNpc3RlbmN5IiwibGF5b3V0X2NvbnNpc3RlbmN5Iiwic3ltYm9sX3JlY29nbml0aW9uIiwidmlzdWFsX2FwcGVhbCIsImxhbmd1YWdlX3N0eWxlIiwibGFuZ3VhZ2VfY29uc2lzdGVuY3kiLCJsYW5ndWFnZV9hcHByb3ByaWF0ZW5lc3MiLCJzbG9nYW5fbWVtb3JhYmlsaXR5IiwibWVzc2FnZV9jbGFyaXR5IiwiYnJhbmRfcHJvbWlzZSIsInByb21pc2VfY2xhcml0eSIsInByb21pc2VfY3JlZGliaWxpdHkiLCJiZW5lZml0X2NsYXJpdHkiLCJleHBlcmllbmNlX2NvaGVyZW5jZSIsInJ0YiIsInJ0Yl9jbGFyaXR5IiwicnRiX3VuaXF1ZW5lc3MiLCJydGJfY3JlZGliaWxpdHkiLCJ0YV9hbGlnbm1lbnQiLCJwaGlsb3NvcGh5X3RhX2FsaWdubWVudCIsInZhbHVlc190YV9yZXNvbmFuY2UiLCJ2aXNpb25fdGFfYXBwZWFsIiwiaGllcmFyY2h5X2FsaWdubWVudCIsInBoaWxvc29waHlfZXhwcmVzc2lvbl9hbGlnbm1lbnQiLCJwaGlsb3NvcGh5X3Zpc3VhbF9hbGlnbm1lbnQiLCJwaGlsb3NvcGh5X2xhbmd1YWdlX2FsaWdubWVudCIsImV4cHJlc3Npb25fdmlzdWFsX2hhcm1vbnkiLCJleHByZXNzaW9uX2xhbmd1YWdlX2NvaGVyZW5jZSIsInZpc3VhbF9sYW5ndWFnZV9pbnRlZ3JhdGlvbiIsInByb21pc2VfcGhpbG9zb3BoeV9hbGlnbm1lbnQiLCJwcm9taXNlX2V4cHJlc3Npb25fY29uc2lzdGVuY3kiLCJwcm9taXNlX3Zpc3VhbF9zdXBwb3J0IiwicnRiX2V4cHJlc3Npb25fcmVpbmZvcmNlbWVudCIsInJ0Yl92aXN1YWxfZXZpZGVuY2UiLCJ2YWx1ZXNfdG9uZV9jb25zaXN0ZW5jeSIsInZhbHVlc19zbG9nYW5fY29uc2lzdGVuY3kiLCJ0b25lX2xhbmd1YWdlX21hdGNoaW5nIiwic3ltYm9sX3Nsb2dhbl9zeW5lcmd5IiwiZXZhbHVhdGVCcmFuZEhvdXNlIiwibWV0cmljcyIsImFuYWx5c2lzUmVwb3J0IiwidG90YWxTY29yZSIsImNhbGN1bGF0ZVRvdGFsU2NvcmUiLCJncmFkZSIsImdldEJyYW5kSG91c2VHcmFkZSIsInN3b3RBbmFseXNpcyIsImdlbmVyYXRlU1dPVEFuYWx5c2lzIiwiZmluYWxTdW1tYXJ5IiwiZ2VuZXJhdGVGaW5hbFN1bW1hcnkiLCJ0b3RhbF9zY29yZSIsImRldGFpbHMiLCJzd290X2FuYWx5c2lzIiwiZmluYWxfc3VtbWFyeSIsImFuYWx5c2lzX3JlcG9ydCIsImNhdGVnb3J5IiwiY2F0ZWdvcnlXZWlnaHRzIiwiT2JqZWN0IiwiZW50cmllcyIsIm1ldHJpYyIsIndlaWdodCIsInNjb3JlIiwiTWF0aCIsInJvdW5kIiwicHJvbXB0IiwicmVzdWx0IiwianNvbiIsInN0cmVuZ3RocyIsIndlYWtuZXNzZXMiLCJvcHBvcnR1bml0aWVzIiwidGhyZWF0cyIsImVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsInN1YnN0cmluZyIsInN1bW1hcnkiLCJ0ZXh0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/services/core/ConsistencyEvaluator.ts\n");

/***/ }),

/***/ "(rsc)/./app/services/core/LLM.ts":
/*!**********************************!*\
  !*** ./app/services/core/LLM.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LLM: () => (/* binding */ LLM)\n/* harmony export */ });\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv */ \"(rsc)/./node_modules/dotenv/lib/main.js\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\n\n// 加载环境变量\ndotenv__WEBPACK_IMPORTED_MODULE_0__.config();\nclass LLM {\n    constructor(config){\n        this.config = this.loadFromEnv();\n        if (config) {\n            this.config = {\n                ...this.config,\n                ...config\n            };\n        }\n        // 初始化OpenAI客户端\n        this.openai = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n            apiKey: this.config.api_key,\n            baseURL: this.config.base_url || undefined\n        });\n    }\n    /**\n   * 从环境变量加载配置\n   */ loadFromEnv() {\n        return {\n            api_key: process.env.LLM_API_KEY || \"\",\n            model: process.env.LLM_MODEL || \"qwen-plus-2025-04-28\",\n            base_url: process.env.LLM_BASE_URL || \"\",\n            temperature: parseFloat(process.env.LLM_TEMPERATURE || \"0.3\"),\n            system_prompt: process.env.LLM_SYSTEM_PROMPT || \"你是一个有用的AI助手。\"\n        };\n    }\n    /**\n   * 检查LLM是否可用\n   */ isAvailable() {\n        return !!this.config.api_key;\n    }\n    /**\n   * 合并配置\n   */ mergeConfig(config) {\n        return {\n            model: this.config.model,\n            system_prompt: this.config.system_prompt,\n            temperature: this.config.temperature,\n            ...config\n        };\n    }\n    /**\n   * 获取文本响应\n   */ async text(message) {\n        if (!this.isAvailable()) {\n            return \"LLM不可用\";\n        }\n        try {\n            // 调用真实的LLM API\n            return await this.callLLMAPI(message);\n        } catch (error) {\n            console.error(\"LLM调用失败:\", error);\n            return `错误: ${error instanceof Error ? error.message : \"未知错误\"}`;\n        }\n    }\n    /**\n   * 获取JSON响应\n   */ async json(message) {\n        if (!this.isAvailable()) {\n            return {\n                error: \"LLM不可用\"\n            };\n        }\n        try {\n            // 调用真实的LLM API\n            const response = await this.callLLMAPI(message, true);\n            try {\n                const jsonResponse = JSON.parse(response);\n                return jsonResponse;\n            } catch  {\n                // 尝试从文本中提取JSON\n                const jsonMatch = response.match(/\\{.*\\}/s);\n                if (jsonMatch) {\n                    return JSON.parse(jsonMatch[0]);\n                } else {\n                    return {\n                        error: \"无法解析JSON\",\n                        raw_content: response\n                    };\n                }\n            }\n        } catch (error) {\n            console.error(\"LLM调用失败:\", error);\n            return {\n                error: error instanceof Error ? error.message : \"未知错误\"\n            };\n        }\n    }\n    /**\n   * 调用真实的LLM API - 使用OpenAI SDK\n   */ async callLLMAPI(message, json) {\n        try {\n            const completion = await this.openai.chat.completions.create({\n                model: this.config.model,\n                messages: [\n                    {\n                        role: \"system\",\n                        content: this.config.system_prompt\n                    },\n                    {\n                        role: \"user\",\n                        content: message\n                    }\n                ],\n                temperature: this.config.temperature,\n                response_format: json ? {\n                    type: \"json_object\"\n                } : undefined\n            });\n            return completion.choices[0]?.message?.content || \"无响应内容\";\n        } catch (error) {\n            console.error(\"LLM调用失败:\", error);\n            return `错误: ${error instanceof Error ? error.message : \"未知错误\"}`;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvc2VydmljZXMvY29yZS9MTE0udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQUNMO0FBRTVCLFNBQVM7QUFDVEEsMENBQWE7QUFlTixNQUFNRztJQUlYLFlBQVlELE1BQTJCLENBQUU7UUFDdkMsSUFBSSxDQUFDQSxNQUFNLEdBQUcsSUFBSSxDQUFDRSxXQUFXO1FBQzlCLElBQUlGLFFBQVE7WUFDVixJQUFJLENBQUNBLE1BQU0sR0FBRztnQkFBRSxHQUFHLElBQUksQ0FBQ0EsTUFBTTtnQkFBRSxHQUFHQSxNQUFNO1lBQUM7UUFDNUM7UUFFQSxlQUFlO1FBQ2YsSUFBSSxDQUFDRyxNQUFNLEdBQUcsSUFBSUosOENBQU1BLENBQUM7WUFDdkJLLFFBQVEsSUFBSSxDQUFDSixNQUFNLENBQUNLLE9BQU87WUFDM0JDLFNBQVMsSUFBSSxDQUFDTixNQUFNLENBQUNPLFFBQVEsSUFBSUM7UUFDbkM7SUFDRjtJQUVBOztHQUVDLEdBQ0QsY0FBaUM7UUFDL0IsT0FBTztZQUNMSCxTQUFTSSxRQUFRQyxHQUFHLENBQUNDLFdBQVcsSUFBSTtZQUNwQ0MsT0FBT0gsUUFBUUMsR0FBRyxDQUFDRyxTQUFTLElBQUk7WUFDaENOLFVBQVVFLFFBQVFDLEdBQUcsQ0FBQ0ksWUFBWSxJQUFJO1lBQ3RDQyxhQUFhQyxXQUFXUCxRQUFRQyxHQUFHLENBQUNPLGVBQWUsSUFBSTtZQUN2REMsZUFBZVQsUUFBUUMsR0FBRyxDQUFDUyxpQkFBaUIsSUFBSTtRQUNsRDtJQUNGO0lBRUE7O0dBRUMsR0FDRCxjQUErQjtRQUM3QixPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUNuQixNQUFNLENBQUNLLE9BQU87SUFDOUI7SUFFQTs7R0FFQyxHQUNELFlBQW9CTCxNQUE0QixFQUF1QjtRQUNyRSxPQUFPO1lBQ0xZLE9BQU8sSUFBSSxDQUFDWixNQUFNLENBQUNZLEtBQUs7WUFDeEJNLGVBQWUsSUFBSSxDQUFDbEIsTUFBTSxDQUFDa0IsYUFBYTtZQUN4Q0gsYUFBYSxJQUFJLENBQUNmLE1BQU0sQ0FBQ2UsV0FBVztZQUNwQyxHQUFHZixNQUFNO1FBQ1g7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBTXNCLEtBQUtDLE9BQWUsRUFBbUI7UUFDM0MsSUFBSSxDQUFDLElBQUksQ0FBQ0gsV0FBVyxJQUFJO1lBQ3ZCLE9BQU87UUFDVDtRQUVBLElBQUk7WUFDRixlQUFlO1lBQ2YsT0FBTyxNQUFNLElBQUksQ0FBQ0ksVUFBVSxDQUFDRDtRQUMvQixFQUFFLE9BQU9FLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLFlBQVlBO1lBQzFCLE9BQU8sQ0FBQyxJQUFJLEVBQUVBLGlCQUFpQkUsUUFBUUYsTUFBTUYsT0FBTyxHQUFHLFFBQVE7UUFDakU7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBTUssS0FBS0wsT0FBZSxFQUFnQztRQUN4RCxJQUFJLENBQUMsSUFBSSxDQUFDSCxXQUFXLElBQUk7WUFDdkIsT0FBTztnQkFBRUssT0FBTztZQUFTO1FBQzNCO1FBRUEsSUFBSTtZQUNGLGVBQWU7WUFDZixNQUFNSSxXQUFXLE1BQU0sSUFBSSxDQUFDTCxVQUFVLENBQUNELFNBQVM7WUFFaEQsSUFBSTtnQkFDRixNQUFNTyxlQUFlQyxLQUFLQyxLQUFLLENBQUNIO2dCQUNoQyxPQUFPQztZQUNULEVBQUUsT0FBTTtnQkFDTixlQUFlO2dCQUNmLE1BQU1HLFlBQVlKLFNBQVNLLEtBQUssQ0FBQztnQkFDakMsSUFBSUQsV0FBVztvQkFDYixPQUFPRixLQUFLQyxLQUFLLENBQUNDLFNBQVMsQ0FBQyxFQUFFO2dCQUNoQyxPQUFPO29CQUNMLE9BQU87d0JBQUVSLE9BQU87d0JBQVlVLGFBQWFOO29CQUFTO2dCQUNwRDtZQUNGO1FBQ0YsRUFBRSxPQUFPSixPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyxZQUFZQTtZQUMxQixPQUFPO2dCQUFFQSxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU1GLE9BQU8sR0FBRztZQUFPO1FBQ2xFO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWNDLFdBQVdELE9BQWUsRUFBRUssSUFBYyxFQUFtQjtRQUN6RSxJQUFJO1lBQ0YsTUFBTVEsYUFBYSxNQUFNLElBQUksQ0FBQ2pDLE1BQU0sQ0FBQ2tDLElBQUksQ0FBQ0MsV0FBVyxDQUFDQyxNQUFNLENBQUM7Z0JBQzNEM0IsT0FBTyxJQUFJLENBQUNaLE1BQU0sQ0FBQ1ksS0FBSztnQkFDeEI0QixVQUFVO29CQUNSO3dCQUNFQyxNQUFNO3dCQUNOQyxTQUFTLElBQUksQ0FBQzFDLE1BQU0sQ0FBQ2tCLGFBQWE7b0JBQ3BDO29CQUNBO3dCQUNFdUIsTUFBTTt3QkFDTkMsU0FBU25CO29CQUNYO2lCQUNEO2dCQUNEUixhQUFhLElBQUksQ0FBQ2YsTUFBTSxDQUFDZSxXQUFXO2dCQUNwQzRCLGlCQUFpQmYsT0FDYjtvQkFDRWdCLE1BQU07Z0JBQ1IsSUFDQXBDO1lBQ047WUFFQSxPQUFPNEIsV0FBV1MsT0FBTyxDQUFDLEVBQUUsRUFBRXRCLFNBQVNtQixXQUFXO1FBQ3BELEVBQUUsT0FBT2pCLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLFlBQVlBO1lBQzFCLE9BQU8sQ0FBQyxJQUFJLEVBQUVBLGlCQUFpQkUsUUFBUUYsTUFBTUYsT0FBTyxHQUFHLFFBQVE7UUFDakU7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvd2FuZ2VuaXVzL0RvY3VtZW50cy90d2lua2xlL3R5cGVzY3JpcHQtYnJhbmR2YWx1ZS9hcHAvc2VydmljZXMvY29yZS9MTE0udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcbmltcG9ydCBPcGVuQUkgZnJvbSBcIm9wZW5haVwiO1xuXG4vLyDliqDovb3njq/looPlj5jph49cbmRvdGVudi5jb25maWcoKTtcblxuLyoqXG4gKiDnroDljJbnmoRMTE3mjqXlj6MgLSBUeXBlU2NyaXB054mI5pysXG4gKiDmj5DkvpvnroDljZXmmJPnlKjnmoTlpKfmqKHlnovosIPnlKjmjqXlj6NcbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIExMTUNvbmZpZyB7XG4gIGFwaV9rZXk6IHN0cmluZztcbiAgbW9kZWw6IHN0cmluZztcbiAgYmFzZV91cmw6IHN0cmluZztcbiAgdGVtcGVyYXR1cmU6IG51bWJlcjtcbiAgc3lzdGVtX3Byb21wdDogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgTExNIHtcbiAgcHJpdmF0ZSBjb25maWc6IExMTUNvbmZpZztcbiAgcHJpdmF0ZSBvcGVuYWk6IE9wZW5BSTtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc/OiBQYXJ0aWFsPExMTUNvbmZpZz4pIHtcbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubG9hZEZyb21FbnYoKTtcbiAgICBpZiAoY29uZmlnKSB7XG4gICAgICB0aGlzLmNvbmZpZyA9IHsgLi4udGhpcy5jb25maWcsIC4uLmNvbmZpZyB9O1xuICAgIH1cblxuICAgIC8vIOWIneWni+WMlk9wZW5BSeWuouaIt+err1xuICAgIHRoaXMub3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gICAgICBhcGlLZXk6IHRoaXMuY29uZmlnLmFwaV9rZXksXG4gICAgICBiYXNlVVJMOiB0aGlzLmNvbmZpZy5iYXNlX3VybCB8fCB1bmRlZmluZWQsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5LuO546v5aKD5Y+Y6YeP5Yqg6L296YWN572uXG4gICAqL1xuICBwcml2YXRlIGxvYWRGcm9tRW52KCk6IExMTUNvbmZpZyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFwaV9rZXk6IHByb2Nlc3MuZW52LkxMTV9BUElfS0VZIHx8IFwiXCIsXG4gICAgICBtb2RlbDogcHJvY2Vzcy5lbnYuTExNX01PREVMIHx8IFwicXdlbi1wbHVzLTIwMjUtMDQtMjhcIixcbiAgICAgIGJhc2VfdXJsOiBwcm9jZXNzLmVudi5MTE1fQkFTRV9VUkwgfHwgXCJcIixcbiAgICAgIHRlbXBlcmF0dXJlOiBwYXJzZUZsb2F0KHByb2Nlc3MuZW52LkxMTV9URU1QRVJBVFVSRSB8fCBcIjAuM1wiKSxcbiAgICAgIHN5c3RlbV9wcm9tcHQ6IHByb2Nlc3MuZW52LkxMTV9TWVNURU1fUFJPTVBUIHx8IFwi5L2g5piv5LiA5Liq5pyJ55So55qEQUnliqnmiYvjgIJcIixcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIOajgOafpUxMTeaYr+WQpuWPr+eUqFxuICAgKi9cbiAgcHJpdmF0ZSBpc0F2YWlsYWJsZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISF0aGlzLmNvbmZpZy5hcGlfa2V5O1xuICB9XG5cbiAgLyoqXG4gICAqIOWQiOW5tumFjee9rlxuICAgKi9cbiAgcHJpdmF0ZSBtZXJnZUNvbmZpZyhjb25maWc/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogUmVjb3JkPHN0cmluZywgYW55PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1vZGVsOiB0aGlzLmNvbmZpZy5tb2RlbCxcbiAgICAgIHN5c3RlbV9wcm9tcHQ6IHRoaXMuY29uZmlnLnN5c3RlbV9wcm9tcHQsXG4gICAgICB0ZW1wZXJhdHVyZTogdGhpcy5jb25maWcudGVtcGVyYXR1cmUsXG4gICAgICAuLi5jb25maWcsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bmlofmnKzlk43lupRcbiAgICovXG4gIGFzeW5jIHRleHQobWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAoIXRoaXMuaXNBdmFpbGFibGUoKSkge1xuICAgICAgcmV0dXJuIFwiTExN5LiN5Y+v55SoXCI7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIOiwg+eUqOecn+WunueahExMTSBBUElcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNhbGxMTE1BUEkobWVzc2FnZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJMTE3osIPnlKjlpLHotKU6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBg6ZSZ6K+vOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCLmnKrnn6XplJnor69cIn1gO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5ZKU09O5ZON5bqUXG4gICAqL1xuICBhc3luYyBqc29uKG1lc3NhZ2U6IHN0cmluZyk6IFByb21pc2U8UmVjb3JkPHN0cmluZywgYW55Pj4ge1xuICAgIGlmICghdGhpcy5pc0F2YWlsYWJsZSgpKSB7XG4gICAgICByZXR1cm4geyBlcnJvcjogXCJMTE3kuI3lj6/nlKhcIiB9O1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyDosIPnlKjnnJ/lrp7nmoRMTE0gQVBJXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbExMTUFQSShtZXNzYWdlLCB0cnVlKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QganNvblJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XG4gICAgICAgIHJldHVybiBqc29uUmVzcG9uc2U7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgLy8g5bCd6K+V5LuO5paH5pys5Lit5o+Q5Y+WSlNPTlxuICAgICAgICBjb25zdCBqc29uTWF0Y2ggPSByZXNwb25zZS5tYXRjaCgvXFx7LipcXH0vcyk7XG4gICAgICAgIGlmIChqc29uTWF0Y2gpIHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uTWF0Y2hbMF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7IGVycm9yOiBcIuaXoOazleino+aekEpTT05cIiwgcmF3X2NvbnRlbnQ6IHJlc3BvbnNlIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkxMTeiwg+eUqOWksei0pTpcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCLmnKrnn6XplJnor69cIiB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDosIPnlKjnnJ/lrp7nmoRMTE0gQVBJIC0g5L2/55SoT3BlbkFJIFNES1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBjYWxsTExNQVBJKG1lc3NhZ2U6IHN0cmluZywganNvbj86IGJvb2xlYW4pOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgdGhpcy5vcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgICBtb2RlbDogdGhpcy5jb25maWcubW9kZWwsXG4gICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcm9sZTogXCJzeXN0ZW1cIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMuY29uZmlnLnN5c3RlbV9wcm9tcHQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgdGVtcGVyYXR1cmU6IHRoaXMuY29uZmlnLnRlbXBlcmF0dXJlLFxuICAgICAgICByZXNwb25zZV9mb3JtYXQ6IGpzb25cbiAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJqc29uX29iamVjdFwiLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBjb21wbGV0aW9uLmNob2ljZXNbMF0/Lm1lc3NhZ2U/LmNvbnRlbnQgfHwgXCLml6Dlk43lupTlhoXlrrlcIjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkxMTeiwg+eUqOWksei0pTpcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIGDplJnor686ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIuacquefpemUmeivr1wifWA7XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiZG90ZW52IiwiT3BlbkFJIiwiY29uZmlnIiwiTExNIiwibG9hZEZyb21FbnYiLCJvcGVuYWkiLCJhcGlLZXkiLCJhcGlfa2V5IiwiYmFzZVVSTCIsImJhc2VfdXJsIiwidW5kZWZpbmVkIiwicHJvY2VzcyIsImVudiIsIkxMTV9BUElfS0VZIiwibW9kZWwiLCJMTE1fTU9ERUwiLCJMTE1fQkFTRV9VUkwiLCJ0ZW1wZXJhdHVyZSIsInBhcnNlRmxvYXQiLCJMTE1fVEVNUEVSQVRVUkUiLCJzeXN0ZW1fcHJvbXB0IiwiTExNX1NZU1RFTV9QUk9NUFQiLCJpc0F2YWlsYWJsZSIsIm1lcmdlQ29uZmlnIiwidGV4dCIsIm1lc3NhZ2UiLCJjYWxsTExNQVBJIiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJqc29uIiwicmVzcG9uc2UiLCJqc29uUmVzcG9uc2UiLCJKU09OIiwicGFyc2UiLCJqc29uTWF0Y2giLCJtYXRjaCIsInJhd19jb250ZW50IiwiY29tcGxldGlvbiIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJyZXNwb25zZV9mb3JtYXQiLCJ0eXBlIiwiY2hvaWNlcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/services/core/LLM.ts\n");

/***/ }),

/***/ "(rsc)/./app/services/index.ts":
/*!*******************************!*\
  !*** ./app/services/index.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BrandAssetGenerator: () => (/* reexport safe */ _core_BrandAssetGenerator__WEBPACK_IMPORTED_MODULE_4__.BrandAssetGenerator),\n/* harmony export */   BrandConsistencyEvaluator: () => (/* reexport safe */ _core_ConsistencyEvaluator__WEBPACK_IMPORTED_MODULE_2__.BrandConsistencyEvaluator),\n/* harmony export */   BrandContentAnalyzer: () => (/* reexport safe */ _core_ConsistencyAnalyzer__WEBPACK_IMPORTED_MODULE_3__.BrandContentAnalyzer),\n/* harmony export */   BrandZCalculator: () => (/* reexport safe */ _core_BrandZCalculator__WEBPACK_IMPORTED_MODULE_0__.BrandZCalculator),\n/* harmony export */   LLM: () => (/* reexport safe */ _core_LLM__WEBPACK_IMPORTED_MODULE_1__.LLM),\n/* harmony export */   brand_valuate: () => (/* binding */ brand_valuate),\n/* harmony export */   generateBrandAsset: () => (/* reexport safe */ _core_BrandAssetGenerator__WEBPACK_IMPORTED_MODULE_4__.generateBrandAsset)\n/* harmony export */ });\n/* harmony import */ var _core_BrandZCalculator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core/BrandZCalculator */ \"(rsc)/./app/services/core/BrandZCalculator.ts\");\n/* harmony import */ var _core_LLM__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/LLM */ \"(rsc)/./app/services/core/LLM.ts\");\n/* harmony import */ var _core_ConsistencyEvaluator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/ConsistencyEvaluator */ \"(rsc)/./app/services/core/ConsistencyEvaluator.ts\");\n/* harmony import */ var _core_ConsistencyAnalyzer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/ConsistencyAnalyzer */ \"(rsc)/./app/services/core/ConsistencyAnalyzer.ts\");\n/* harmony import */ var _core_BrandAssetGenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/BrandAssetGenerator */ \"(rsc)/./app/services/core/BrandAssetGenerator.ts\");\n/**\n * 品牌价值评估系统 - TypeScript版本\n * 主要模块接口\n */ \n/**\n * 品牌价值评估主函数\n * @param input 品牌输入数据，格式参考input.json\n * @returns 评估结果\n */ async function brand_valuate(input) {\n    try {\n        // 1. 品牌评估：使用BrandZ计算器进行综合评估\n        const calculator = new _core_BrandZCalculator__WEBPACK_IMPORTED_MODULE_0__.BrandZCalculator();\n        const comprehensiveReport = await calculator.evaluateBrandZ(input);\n        // 2. 返回成功结果\n        return {\n            success: true,\n            data: comprehensiveReport\n        };\n    } catch (error) {\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : '未知错误'\n        };\n    }\n}\n// 导出工具类\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvc2VydmljZXMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7OztDQUdDLEdBSTBEO0FBRTNEOzs7O0NBSUMsR0FDTSxlQUFlQyxjQUFjQyxLQUFxQjtJQUN2RCxJQUFJO1FBQ0YsNEJBQTRCO1FBQzVCLE1BQU1DLGFBQWEsSUFBSUgsb0VBQWdCQTtRQUN2QyxNQUFNSSxzQkFBc0IsTUFBTUQsV0FBV0UsY0FBYyxDQUFDSDtRQUU1RCxZQUFZO1FBQ1osT0FBTztZQUNMSSxTQUFTO1lBQ1RDLE1BQU1IO1FBQ1I7SUFFRixFQUFFLE9BQU9JLE9BQU87UUFDZCxPQUFPO1lBQ0xGLFNBQVM7WUFDVEUsT0FBT0EsaUJBQWlCQyxRQUFRRCxNQUFNRSxPQUFPLEdBQUc7UUFDbEQ7SUFDRjtBQUNGO0FBTUEsUUFBUTtBQUNtRDtBQUMxQjtBQUN1QztBQUNOO0FBQ21CIiwic291cmNlcyI6WyIvVXNlcnMvd2FuZ2VuaXVzL0RvY3VtZW50cy90d2lua2xlL3R5cGVzY3JpcHQtYnJhbmR2YWx1ZS9hcHAvc2VydmljZXMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDlk4HniYzku7flgLzor4TkvLDns7vnu58gLSBUeXBlU2NyaXB054mI5pysXG4gKiDkuLvopoHmqKHlnZfmjqXlj6NcbiAqL1xuXG5pbXBvcnQgeyBCcmFuZElucHV0RGF0YSB9IGZyb20gJy4vdHlwZXMvQnJhbmRBc3NldCc7XG5pbXBvcnQgeyBCcmFuZFZhbHVhdGlvblJlc3VsdCB9IGZyb20gJy4vdHlwZXMvRXZhbHVhdGlvblJlc3VsdCc7XG5pbXBvcnQgeyBCcmFuZFpDYWxjdWxhdG9yIH0gZnJvbSAnLi9jb3JlL0JyYW5kWkNhbGN1bGF0b3InO1xuXG4vKipcbiAqIOWTgeeJjOS7t+WAvOivhOS8sOS4u+WHveaVsFxuICogQHBhcmFtIGlucHV0IOWTgeeJjOi+k+WFpeaVsOaNru+8jOagvOW8j+WPguiAg2lucHV0Lmpzb25cbiAqIEByZXR1cm5zIOivhOS8sOe7k+aenFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYnJhbmRfdmFsdWF0ZShpbnB1dDogQnJhbmRJbnB1dERhdGEpOiBQcm9taXNlPEJyYW5kVmFsdWF0aW9uUmVzdWx0PiB7XG4gIHRyeSB7XG4gICAgLy8gMS4g5ZOB54mM6K+E5Lyw77ya5L2/55SoQnJhbmRa6K6h566X5Zmo6L+b6KGM57u85ZCI6K+E5LywXG4gICAgY29uc3QgY2FsY3VsYXRvciA9IG5ldyBCcmFuZFpDYWxjdWxhdG9yKCk7XG4gICAgY29uc3QgY29tcHJlaGVuc2l2ZVJlcG9ydCA9IGF3YWl0IGNhbGN1bGF0b3IuZXZhbHVhdGVCcmFuZFooaW5wdXQpO1xuICAgIFxuICAgIC8vIDIuIOi/lOWbnuaIkOWKn+e7k+aenFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YTogY29tcHJlaGVuc2l2ZVJlcG9ydFxuICAgIH07XG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ+acquefpemUmeivrydcbiAgICB9O1xuICB9XG59XG5cbi8vIOWvvOWHuuexu+Wei+WumuS5iVxuZXhwb3J0IHR5cGUgeyBCcmFuZElucHV0RGF0YSB9IGZyb20gJy4vdHlwZXMvQnJhbmRBc3NldCc7XG5leHBvcnQgdHlwZSB7IEJyYW5kVmFsdWF0aW9uUmVzdWx0LCBDb21wcmVoZW5zaXZlUmVwb3J0IH0gZnJvbSAnLi90eXBlcy9FdmFsdWF0aW9uUmVzdWx0JztcblxuLy8g5a+85Ye65bel5YW357G7XG5leHBvcnQgeyBCcmFuZFpDYWxjdWxhdG9yIH0gZnJvbSAnLi9jb3JlL0JyYW5kWkNhbGN1bGF0b3InO1xuZXhwb3J0IHsgTExNIH0gZnJvbSAnLi9jb3JlL0xMTSc7XG5leHBvcnQgeyBCcmFuZENvbnNpc3RlbmN5RXZhbHVhdG9yIH0gZnJvbSAnLi9jb3JlL0NvbnNpc3RlbmN5RXZhbHVhdG9yJztcbmV4cG9ydCB7IEJyYW5kQ29udGVudEFuYWx5emVyIH0gZnJvbSAnLi9jb3JlL0NvbnNpc3RlbmN5QW5hbHl6ZXInO1xuZXhwb3J0IHsgQnJhbmRBc3NldEdlbmVyYXRvciwgZ2VuZXJhdGVCcmFuZEFzc2V0IH0gZnJvbSAnLi9jb3JlL0JyYW5kQXNzZXRHZW5lcmF0b3InOyJdLCJuYW1lcyI6WyJCcmFuZFpDYWxjdWxhdG9yIiwiYnJhbmRfdmFsdWF0ZSIsImlucHV0IiwiY2FsY3VsYXRvciIsImNvbXByZWhlbnNpdmVSZXBvcnQiLCJldmFsdWF0ZUJyYW5kWiIsInN1Y2Nlc3MiLCJkYXRhIiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJMTE0iLCJCcmFuZENvbnNpc3RlbmN5RXZhbHVhdG9yIiwiQnJhbmRDb250ZW50QW5hbHl6ZXIiLCJCcmFuZEFzc2V0R2VuZXJhdG9yIiwiZ2VuZXJhdGVCcmFuZEFzc2V0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/services/index.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbrand%2Fevaluate%2Froute&page=%2Fapi%2Fbrand%2Fevaluate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbrand%2Fevaluate%2Froute.ts&appDir=%2FUsers%2Fwangenius%2FDocuments%2Ftwinkle%2Ftypescript-brandvalue%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fwangenius%2FDocuments%2Ftwinkle%2Ftypescript-brandvalue&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbrand%2Fevaluate%2Froute&page=%2Fapi%2Fbrand%2Fevaluate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbrand%2Fevaluate%2Froute.ts&appDir=%2FUsers%2Fwangenius%2FDocuments%2Ftwinkle%2Ftypescript-brandvalue%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fwangenius%2FDocuments%2Ftwinkle%2Ftypescript-brandvalue&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _Users_wangenius_Documents_twinkle_typescript_brandvalue_app_api_brand_evaluate_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./app/api/brand/evaluate/route.ts */ \"(rsc)/./app/api/brand/evaluate/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/brand/evaluate/route\",\n        pathname: \"/api/brand/evaluate\",\n        filename: \"route\",\n        bundlePath: \"app/api/brand/evaluate/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"/Users/wangenius/Documents/twinkle/typescript-brandvalue/app/api/brand/evaluate/route.ts\",\n    nextConfigOutput,\n    userland: _Users_wangenius_Documents_twinkle_typescript_brandvalue_app_api_brand_evaluate_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/brand/evaluate/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        // if we aren't wrapped by base-server handle here\n        if (!activeSpan && !(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZicmFuZCUyRmV2YWx1YXRlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZicmFuZCUyRmV2YWx1YXRlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYnJhbmQlMkZldmFsdWF0ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRndhbmdlbml1cyUyRkRvY3VtZW50cyUyRnR3aW5rbGUlMkZ0eXBlc2NyaXB0LWJyYW5kdmFsdWUlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGd2FuZ2VuaXVzJTJGRG9jdW1lbnRzJTJGdHdpbmtsZSUyRnR5cGVzY3JpcHQtYnJhbmR2YWx1ZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCZpc0dsb2JhbE5vdEZvdW5kRW5hYmxlZD0hIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ2Q7QUFDUztBQUNPO0FBQ0s7QUFDbUM7QUFDakQ7QUFDTztBQUNmO0FBQ3NDO0FBQ3pCO0FBQ007QUFDQztBQUNoQjtBQUNtRDtBQUNySDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhLE9BQW9DLElBQUksQ0FBRTtBQUN2RCx3QkFB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QUNBO0FBQ0EsNkNBQTZDLDBGQUFxQjtBQUNsRTtBQUNBLGtCQUFrQiw2RUFBWTtBQUM5QjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDViw2RUFBNkUsZ0ZBQWM7QUFDM0YsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTjtBQUNBLDRDQUE0Qyw2RkFBZTtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywyRkFBbUI7QUFDckQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkVBQVk7QUFDMUI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0IHsgZ2V0UmVxdWVzdE1ldGEgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXF1ZXN0LW1ldGFcIjtcbmltcG9ydCB7IGdldFRyYWNlciwgU3BhbktpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvdHJhY2VyXCI7XG5pbXBvcnQgeyBub3JtYWxpemVBcHBQYXRoIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL3JvdXRlci91dGlscy9hcHAtcGF0aHNcIjtcbmltcG9ydCB7IE5vZGVOZXh0UmVxdWVzdCwgTm9kZU5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Jhc2UtaHR0cC9ub2RlXCI7XG5pbXBvcnQgeyBOZXh0UmVxdWVzdEFkYXB0ZXIsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvc3BlYy1leHRlbnNpb24vYWRhcHRlcnMvbmV4dC1yZXF1ZXN0XCI7XG5pbXBvcnQgeyBCYXNlU2VydmVyU3BhbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS9jb25zdGFudHNcIjtcbmltcG9ydCB7IGdldFJldmFsaWRhdGVSZWFzb24gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9pbnN0cnVtZW50YXRpb24vdXRpbHNcIjtcbmltcG9ydCB7IHNlbmRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3NlbmQtcmVzcG9uc2VcIjtcbmltcG9ydCB7IGZyb21Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycywgdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi91dGlsc1wiO1xuaW1wb3J0IHsgZ2V0Q2FjaGVDb250cm9sSGVhZGVyIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL2NhY2hlLWNvbnRyb2xcIjtcbmltcG9ydCB7IElORklOSVRFX0NBQ0hFLCBORVhUX0NBQ0hFX1RBR1NfSEVBREVSIH0gZnJvbSBcIm5leHQvZGlzdC9saWIvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBOb0ZhbGxiYWNrRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvbm8tZmFsbGJhY2stZXJyb3IuZXh0ZXJuYWxcIjtcbmltcG9ydCB7IENhY2hlZFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3Jlc3BvbnNlLWNhY2hlXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3dhbmdlbml1cy9Eb2N1bWVudHMvdHdpbmtsZS90eXBlc2NyaXB0LWJyYW5kdmFsdWUvYXBwL2FwaS9icmFuZC9ldmFsdWF0ZS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYnJhbmQvZXZhbHVhdGUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9icmFuZC9ldmFsdWF0ZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYnJhbmQvZXZhbHVhdGUvcm91dGVcIlxuICAgIH0sXG4gICAgZGlzdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX0RJU1RfRElSIHx8ICcnLFxuICAgIHJlbGF0aXZlUHJvamVjdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX1BST0pFQ1RfRElSIHx8ICcnLFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3dhbmdlbml1cy9Eb2N1bWVudHMvdHdpbmtsZS90eXBlc2NyaXB0LWJyYW5kdmFsdWUvYXBwL2FwaS9icmFuZC9ldmFsdWF0ZS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICB2YXIgX25leHRDb25maWdfZXhwZXJpbWVudGFsO1xuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL2JyYW5kL2V2YWx1YXRlL3JvdXRlXCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH0gZWxzZSBpZiAoc3JjUGFnZSA9PT0gJy9pbmRleCcpIHtcbiAgICAgICAgLy8gd2UgYWx3YXlzIG5vcm1hbGl6ZSAvaW5kZXggc3BlY2lmaWNhbGx5XG4gICAgICAgIHNyY1BhZ2UgPSAnLyc7XG4gICAgfVxuICAgIGNvbnN0IG11bHRpWm9uZURyYWZ0TW9kZSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREU7XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZSxcbiAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IGJ1aWxkSWQsIHBhcmFtcywgbmV4dENvbmZpZywgaXNEcmFmdE1vZGUsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0LCBpc09uRGVtYW5kUmV2YWxpZGF0ZSwgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsIHJlc29sdmVkUGF0aG5hbWUgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgY29uc3Qgbm9ybWFsaXplZFNyY1BhZ2UgPSBub3JtYWxpemVBcHBQYXRoKHNyY1BhZ2UpO1xuICAgIGxldCBpc0lzciA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0gfHwgcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICBpZiAoaXNJc3IgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNvbnN0IGlzUHJlcmVuZGVyZWQgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgICAgIGNvbnN0IHByZXJlbmRlckluZm8gPSBwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXTtcbiAgICAgICAgaWYgKHByZXJlbmRlckluZm8pIHtcbiAgICAgICAgICAgIGlmIChwcmVyZW5kZXJJbmZvLmZhbGxiYWNrID09PSBmYWxzZSAmJiAhaXNQcmVyZW5kZXJlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb0ZhbGxiYWNrRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgY2FjaGVLZXkgPSBudWxsO1xuICAgIGlmIChpc0lzciAmJiAhcm91dGVNb2R1bGUuaXNEZXYgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNhY2hlS2V5ID0gcmVzb2x2ZWRQYXRobmFtZTtcbiAgICAgICAgLy8gZW5zdXJlIC9pbmRleCBhbmQgLyBpcyBub3JtYWxpemVkIHRvIG9uZSBrZXlcbiAgICAgICAgY2FjaGVLZXkgPSBjYWNoZUtleSA9PT0gJy9pbmRleCcgPyAnLycgOiBjYWNoZUtleTtcbiAgICB9XG4gICAgY29uc3Qgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UgPSAvLyBJZiB3ZSdyZSBpbiBkZXZlbG9wbWVudCwgd2UgYWx3YXlzIHN1cHBvcnQgZHluYW1pYyBIVE1MXG4gICAgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgLy8gSWYgdGhpcyBpcyBub3QgU1NHIG9yIGRvZXMgbm90IGhhdmUgc3RhdGljIHBhdGhzLCB0aGVuIGl0IHN1cHBvcnRzXG4gICAgLy8gZHluYW1pYyBIVE1MLlxuICAgICFpc0lzcjtcbiAgICAvLyBUaGlzIGlzIGEgcmV2YWxpZGF0aW9uIHJlcXVlc3QgaWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljXG4gICAgLy8gcGFnZSBhbmQgaXQgaXMgbm90IGJlaW5nIHJlc3VtZWQgZnJvbSBhIHBvc3Rwb25lZCByZW5kZXIgYW5kXG4gICAgLy8gaXQgaXMgbm90IGEgZHluYW1pYyBSU0MgcmVxdWVzdCB0aGVuIGl0IGlzIGEgcmV2YWxpZGF0aW9uXG4gICAgLy8gcmVxdWVzdC5cbiAgICBjb25zdCBpc1JldmFsaWRhdGUgPSBpc0lzciAmJiAhc3VwcG9ydHNEeW5hbWljUmVzcG9uc2U7XG4gICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgICAgICAgICAgIGNhY2hlQ29tcG9uZW50czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jYWNoZUNvbXBvbmVudHMpLFxuICAgICAgICAgICAgICAgIGF1dGhJbnRlcnJ1cHRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmF1dGhJbnRlcnJ1cHRzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlLFxuICAgICAgICAgICAgaW5jcmVtZW50YWxDYWNoZTogZ2V0UmVxdWVzdE1ldGEocmVxLCAnaW5jcmVtZW50YWxDYWNoZScpLFxuICAgICAgICAgICAgY2FjaGVMaWZlUHJvZmlsZXM6IChfbmV4dENvbmZpZ19leHBlcmltZW50YWwgPSBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbC5jYWNoZUxpZmUsXG4gICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWwsXG4gICAgICAgICAgICBvbkNsb3NlOiAoY2IpPT57XG4gICAgICAgICAgICAgICAgcmVzLm9uKCdjbG9zZScsIGNiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkFmdGVyVGFza0Vycm9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBvbkluc3RydW1lbnRhdGlvblJlcXVlc3RFcnJvcjogKGVycm9yLCBfcmVxdWVzdCwgZXJyb3JDb250ZXh0KT0+cm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnJvciwgZXJyb3JDb250ZXh0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KVxuICAgICAgICB9LFxuICAgICAgICBzaGFyZWRDb250ZXh0OiB7XG4gICAgICAgICAgICBidWlsZElkXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG5vZGVOZXh0UmVxID0gbmV3IE5vZGVOZXh0UmVxdWVzdChyZXEpO1xuICAgIGNvbnN0IG5vZGVOZXh0UmVzID0gbmV3IE5vZGVOZXh0UmVzcG9uc2UocmVzKTtcbiAgICBjb25zdCBuZXh0UmVxID0gTmV4dFJlcXVlc3RBZGFwdGVyLmZyb21Ob2RlTmV4dFJlcXVlc3Qobm9kZU5leHRSZXEsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UocmVzKSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW52b2tlUm91dGVNb2R1bGUgPSBhc3luYyAoc3Bhbik9PntcbiAgICAgICAgICAgIHJldHVybiByb3V0ZU1vZHVsZS5oYW5kbGUobmV4dFJlcSwgY29udGV4dCkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGlmICghc3BhbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICduZXh0LnJzYyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHdlcmUgdW5hYmxlIHRvIGdldCBhdHRyaWJ1dGVzLCBwcm9iYWJseSBPVEVMIGlzIG5vdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKCFyb290U3BhbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKSAhPT0gQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke21ldGhvZH0gJHtyb3V0ZX1gO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGAke21ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoYW5kbGVSZXNwb25zZSA9IGFzeW5jIChjdXJyZW50U3Bhbik9PntcbiAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlR2VuZXJhdG9yID0gYXN5bmMgKHsgcHJldmlvdXNDYWNoZUVudHJ5IH0pPT57XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzT25EZW1hbmRSZXZhbGlkYXRlICYmIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkICYmICFwcmV2aW91c0NhY2hlRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24tZGVtYW5kIHJldmFsaWRhdGUgYWx3YXlzIHNldHMgdGhpcyBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgJ1JFVkFMSURBVEVEJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGN1cnJlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmZldGNoTWV0cmljcyA9IGNvbnRleHQucmVuZGVyT3B0cy5mZXRjaE1ldHJpY3M7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwZW5kaW5nV2FpdFVudGlsID0gY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWw7XG4gICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdXNpbmcgcHJvdmlkZWQgd2FpdFVudGlsIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIG5vdCB3ZSBmYWxsYmFjayB0byBzZW5kUmVzcG9uc2UncyBoYW5kbGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ1dhaXRVbnRpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC53YWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgud2FpdFVudGlsKHBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdXYWl0VW50aWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVUYWdzID0gY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFRhZ3M7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpYyByZXNwb25zZSwgd2UgY2FuIGNhY2hlIGl0IHNvIGxvbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgaXQncyBub3QgZWRnZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSXNyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29weSB0aGUgaGVhZGVycyBmcm9tIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlVGFncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl0gPSBjYWNoZVRhZ3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddICYmIGJsb2IudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gYmxvYi50eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV2YWxpZGF0ZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPj0gSU5GSU5JVEVfQ0FDSEUgPyBmYWxzZSA6IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwaXJlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPj0gSU5GSU5JVEVfQ0FDSEUgPyB1bmRlZmluZWQgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjYWNoZSBlbnRyeSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogQnVmZmVyLmZyb20oYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmQgcmVzcG9uc2Ugd2l0aG91dCBjYWNoaW5nIGlmIG5vdCBJU1JcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIHJlc3BvbnNlLCBjb250ZXh0LnJlbmRlck9wdHMucGVuZGluZ1dhaXRVbnRpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgYmFja2dyb3VuZCByZXZhbGlkYXRlIHdlIG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXF1ZXN0IGVycm9yIGhlcmUgYXMgaXQgd29uJ3QgYmUgYnViYmxlZFxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNDYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2aW91c0NhY2hlRW50cnkuaXNTdGFsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVQYXRoOiBzcmNQYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSBhd2FpdCByb3V0ZU1vZHVsZS5oYW5kbGVSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgIG5leHRDb25maWcsXG4gICAgICAgICAgICAgICAgY2FjaGVLZXksXG4gICAgICAgICAgICAgICAgcm91dGVLaW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgIGlzRmFsbGJhY2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICAgICAgICAgIGlzUm91dGVQUFJFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlT25seUdlbmVyYXRlZCxcbiAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcixcbiAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgY3JlYXRlIGEgY2FjaGVFbnRyeSBmb3IgSVNSXG4gICAgICAgICAgICBpZiAoIWlzSXNyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZS5raW5kKSAhPT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50OiBhcHAtcm91dGUgcmVjZWl2ZWQgaW52YWxpZCBjYWNoZSBlbnRyeSAke2NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZTEgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNzAxXCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgaXNPbkRlbWFuZFJldmFsaWRhdGUgPyAnUkVWQUxJREFURUQnIDogY2FjaGVFbnRyeS5pc01pc3MgPyAnTUlTUycgOiBjYWNoZUVudHJ5LmlzU3RhbGUgPyAnU1RBTEUnIDogJ0hJVCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHJhZnQgbW9kZSBzaG91bGQgbmV2ZXIgYmUgY2FjaGVkXG4gICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMoY2FjaGVFbnRyeS52YWx1ZS5oZWFkZXJzKTtcbiAgICAgICAgICAgIGlmICghKGdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNJc3IpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5kZWxldGUoTkVYVF9DQUNIRV9UQUdTX0hFQURFUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBjYWNoZSBjb250cm9sIGlzIGFscmVhZHkgc2V0IG9uIHRoZSByZXNwb25zZSB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gb3ZlcnJpZGUgaXQgdG8gYWxsb3cgdXNlcnMgdG8gY3VzdG9taXplIGl0IHZpYSBuZXh0LmNvbmZpZ1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sICYmICFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykgJiYgIWhlYWRlcnMuZ2V0KCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIGdldENhY2hlQ29udHJvbEhlYWRlcihjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKGNhY2hlRW50cnkudmFsdWUuYm9keSwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBjYWNoZUVudHJ5LnZhbHVlLnN0YXR1cyB8fCAyMDBcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlUmVzcG9uc2UoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtyZXEudXJsfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlUmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBpZiB3ZSBhcmVuJ3Qgd3JhcHBlZCBieSBiYXNlLXNlcnZlciBoYW5kbGUgaGVyZVxuICAgICAgICBpZiAoIWFjdGl2ZVNwYW4gJiYgIShlcnIgaW5zdGFuY2VvZiBOb0ZhbGxiYWNrRXJyb3IpKSB7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IG5vcm1hbGl6ZWRTcmNQYWdlLFxuICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRocm93IHNvIHRoYXQgd2UgY2FuIGhhbmRsZSBzZXJ2aW5nIGVycm9yIHBhZ2VcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBkdXJpbmcgc3RhdGljIGdlbmVyYXRpb24sIHRocm93IHRoZSBlcnJvciBhZ2Fpbi5cbiAgICAgICAgaWYgKGlzSXNyKSB0aHJvdyBlcnI7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgc2VuZCBhIDUwMCByZXNwb25zZS5cbiAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgIHN0YXR1czogNTAwXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbrand%2Fevaluate%2Froute&page=%2Fapi%2Fbrand%2Fevaluate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbrand%2Fevaluate%2Froute.ts&appDir=%2FUsers%2Fwangenius%2FDocuments%2Ftwinkle%2Ftypescript-brandvalue%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fwangenius%2FDocuments%2Ftwinkle%2Ftypescript-brandvalue&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/openai","vendor-chunks/dotenv"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbrand%2Fevaluate%2Froute&page=%2Fapi%2Fbrand%2Fevaluate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbrand%2Fevaluate%2Froute.ts&appDir=%2FUsers%2Fwangenius%2FDocuments%2Ftwinkle%2Ftypescript-brandvalue%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fwangenius%2FDocuments%2Ftwinkle%2Ftypescript-brandvalue&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();